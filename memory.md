### 2025-12-14 14:23 - Established Go parity plan with detailed beads backlog referencing Node repo. Epic mmm-1 now encodes execution order; each task notes to consult epic; P1 audit (mmm-14) blocks epic.
### 2025-12-14 15:03 - bd --no-db ignores blockers in ready output; rely on issue dependencies/epic order instead of ready list until DB bug fixed.
### 2025-12-14 15:27 - New session kicked off; need to identify next beads issue for Go port despite ready cmd bug—cross-reference epic ordering before picking work.
### 2025-12-14 15:37 - Completed mmm-14 audit; logged gaps for config schema (mmm-18), Makefile (mmm-19), locale detection (mmm-20), HTTP retry leaks (mmm-21), init TUI networking (mmm-22), and environment metadata (mmm-23). Prioritize these before jumping into parity work.
### 2025-12-14 15:49 - mmm-18 fixed: ModsJson.mods now uses []models.Mod (config entries) instead of lock-style ModInstall; default config seeded with []models.Mod. README updated to reflect per-mod allowVersionFallback (no global flag).
### 2025-12-14 16:01 - mcp beads ready/list endpoints crash when dependencies metadata incomplete; inspect .beads/issues.jsonl directly until schema bug fixed.
### 2025-12-14 16:03 - CLI bd --no-db ready works; API-only failure scoped to MCP. Use CLI for ready list until fix.
### 2025-12-14 16:21 - mmm-23 now active; release prepare script rewrites internal/environment.go placeholders (version + API keys + HELP_URL) but Go build still hardcodes REPL_* defaults—need ldflags-driven versioning + env helpers wired into CLI/help output.
### 2025-12-14 16:30 - Wired HELP_URL helper + Cobra help footer mirroring Node CLI; ended up keeping helper as placeholder-only (no runtime env lookup) because release scripts still replace REPL_* directly; tests cover footer contains REPL_HELP_URL.
### 2025-12-14 17:08 - Ready list reviewed; plan to tackle mmm-21 (retry body leak) next since it's the lone P1 bug blocking network stability work.
### 2025-12-14 17:12 - mmm-21 resolved via `drainAndClose` helper + regression test checking retry responses are drained/closed; remembered to cover nil bodies to keep coverage at 100%.
### 2025-12-14 17:27 - Ready queue now elevates mmm-17 (telemetry lifecycle redesign) as sole P1; plan to tackle it next before moving on to CLI/global flag work.
### 2025-12-14 17:37 - Reworking telemetry lifecycle for mmm-17: introduce Init/Capture/Shutdown APIs with session-scoped PostHog client, signal-driven flushing in `main.go`, and new `MMM_DISABLE_TELEMETRY` opt-out plus docs/telemetry.md for future TUI guidance.
### 2025-12-14 17:48 - Added shared `internal/lifecycle` signal manager so telemetry (and future subsystems) register handlers once; `main.go` now triggers lifecycle instead of calling telemetry directly.
### 2025-12-14 18:06 - Explicit reminder: must adhere to provided instructions and guidelines perfectly.
### 2025-12-14 19:05 - Reinforced: instructions are absolute (no edits to historical docs, keep user-facing docs simple) and must be followed without improvisation; refer to memory before every action.
### 2025-12-14 20:29 - Pulled latest Engineer/Beads/LongTermMemory/ADR/Golang guidance; `bd --no-db ready --json` shows open work including Makefile portability (mmm-19), locale detection bug (mmm-20), and init TUI minecraft client injection/offline flow (mmm-22), plus epic-ordered parity tasks starting at mmm-2.
### 2025-12-14 20:33 - Verified mmm-19 is a real issue on Unix shells: `make build` produces host-compiled binaries for darwin/windows outputs because `@set GOOS=...` doesn’t export env vars in sh; `od -N 4` shows all artifacts start with `7f 45 4c 46` (ELF), including `build/windows/mmm.exe`. Note: current `run` target is `go run .` so the issue description’s old run-path claim appears stale.
### 2025-12-14 20:38 - mmm-19 closed after fixing Makefile cross-platform build env handling and confirming artifacts; user verified on Windows as well.
### 2025-12-14 20:43 - Follow-up: Windows `make build` can fail when cross-compiling linux/darwin due to CGO defaulting on (runtime/cgo errors without a cross C toolchain). Updated Makefile to disable CGO for cross builds by default via CROSS_CGO_ENABLED?=0 and per-target CGO_ENABLED export; tracked as mmm-24 (in progress pending user re-verify on Windows).
### 2025-12-14 20:44 - mmm-24 closed after user confirmed `make build` succeeds cleanly on Windows with CGO disabled for cross builds by default.
### 2025-12-14 20:45 - Next planned work: start epic mmm-1 execution order at mmm-2 (global flags/config helpers) now that build/test/coverage gates and telemetry lifecycle are in place.
### 2025-12-14 21:04 - TS reference (/tmp/mmm) uses commander with global options: `-c, --config <MODLIST_JSON>` default `./modlist.json`; `-q, --quiet` suppresses output and forces non-interactive behavior by erroring instead of prompting in interactions; `-d, --debug` enables debug logging. Logger behavior: `log()` prints if not quiet OR forceShow OR debug; `debug()` prints only when debug; errors use commander `program.error(..., exitCode)`. Go mmm-2 should mirror semantics without introducing runtime/context or store proxies; define persistent flags on root and let subcommands read flags via Cobra.
### 2025-12-14 21:12 - Implemented mmm-2 per KISS: root Cobra now defines -c/--config, -q/--quiet, -d/--debug directly; removed runtime/context injection and store proxy; added internal/logger with TS-like quiet/debug semantics; added internal/config SaveConfiguration/SaveLockFile helpers; updated Makefile `test` to `go test ./...` while keeping coverage gating on internal; verification passed (make test / make coverage-enforce / make build).
### 2025-12-14 21:28 - Refactored internal/config into a cohesive module: introduced config.Metadata (config path + derived lock/mods-folder paths) and split responsibilities across defaults/io/lock/metadata files; removed earlier save.go/config.go legacy entrypoints. Verified `make test`, `make coverage-enforce` (100%), `make build`.
### 2025-12-14 21:31 - Tweaked naming to be domain-first: renamed io.go/io_test.go to config.go/config_test.go (lock.go remains lock-focused). Verified `make test`, `make coverage-enforce` (100%), `make build`.
### 2025-12-14 21:37 - User direction: default loader should be Fabric for now; gameVersion default ideally resolves to latest Minecraft version (but should live in init flow, with offline fallback). Created mmm-25 to remove hard-coded defaults and rely on init/user input long-term; updated DefaultConfig loader to Fabric.
### 2025-12-14 21:44 - Wired minecraft.GetLatestVersion into config init (InitConfig now accepts a minecraft Doer and uses it to seed GameVersion). Added minecraft.ClearManifestCache and test coverage to manage manifest caching deterministically in tests; all make targets still green with 100% coverage.
### 2025-12-14 21:46 - Removed nil-guards for required dependencies (minecraft client in config.InitConfig) to reduce cyclomatic complexity; treat Doer as mandatory and keep behavior deterministic via ClearManifestCache in tests.
### 2025-12-14 21:51 - Removed DefaultConfig() (avoid shared defaults helper); InitConfig now inlines temporary defaults and sets gameVersion via minecraft.GetLatestVersion with explicit fallback. Tests now use explicit literals instead of reusing values from code under test.
### 2025-12-14 21:54 - User clarified: no default gameVersion is allowed. Updated config.InitConfig to require minecraft.GetLatestVersion (error if unavailable/empty); tests updated; 100% coverage preserved.
### 2025-12-14 21:56 - Further refinement: InitConfig now fetches latest version before constructing config (fail-fast), avoiding any post-construction mutation of GameVersion.
### 2025-12-14 21:58 - Per user direction, removed latest==\"\" guard in InitConfig to reduce cyclomatic complexity; treat nil error from GetLatestVersion as always yielding a valid latest release. Kept fail-fast behavior on errors; tests updated.
### 2025-12-14 22:18 - Simplified internal/config further by making afero.Fs a required param for config/lock functions (removed variadic filesystem args and InitFilesystem-style fallback), reducing defensive branching since this is a single application.
### 2025-12-14 22:24 - Fixed Windows behavior for config.Metadata.ModsFolderPath: treat paths starting with `/` or `\\` as rooted/absolute so they aren’t incorrectly joined under the config directory; tests/coverage still green.
### 2025-12-14 22:27 - Added Windows-only metadata test to cover drive-letter absolute paths, plus a rooted forward-slash test, to keep 100% coverage on Windows for ModsFolderPath absolute detection.
### 2025-12-14 22:28 - Closed mmm-2 after implementing Cobra global flags, logger abstraction, and cohesive config module refactor with strict latest-version init and cross-platform path handling; all verification targets passing with 100% coverage.
