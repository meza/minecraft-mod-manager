{"id":"mmm-1","title":"Go CLI reaches Node feature parity","description":"Track all work required to bring the new Go CLI up to parity with the established Node implementation. This includes implementing every documented command (`init`, `add`, `install`, `update`, `list`, `change`, `test`, `prune`, `scan`, `remove`), wiring shared CLI features such as global flags, config management, telemetry, update checks, and ensuring mod configuration/lock handling works end-to-end.\n\nImplementation note: for every task under this epic, ensure the original Node repository at https://github.com/meza/minecraft-mod-manager is available at /tmp/mmm (clone it if missing) and use it as the canonical behavioral reference.\n\nExecution order (follow unless blockers/bugs force a change):\n1. `mmm-2` – global CLI flags/config helpers\n2. `mmm-3` – finish init with actual file persistence\n3. `mmm-4` – list command\n4. `mmm-5` – add command\n5. `mmm-6` – install command\n6. `mmm-7` – update command\n7. `mmm-8` – test command\n8. `mmm-9` – change command\n9. `mmm-10` – prune command\n10. `mmm-11` – scan command\n11. `mmm-12` – remove command\n12. `mmm-13` – telemetry + update notifications\n\nThis ordering encodes the dependency chain while we’re constrained to bd’s `--no-db` mode (which ignores blockers in ready lists). Adjust only with explicit justification.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-14T14:05:24.625721222Z","updated_at":"2025-12-14T14:18:13.298002714Z","dependencies":[{"issue_id":"mmm-1","depends_on_id":"mmm-14","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-1.1","title":"Init command: Bubble Tea interactive flow","description":"Move Bubble Tea (TUI) collection of init inputs out of mmm-3. Implement full interactive init flow (loader, game version, release types, mods folder) and wire it to the init persistence logic, honoring --quiet semantics by failing fast when interaction would be required. Should inject minecraft client/Doer (no http.DefaultClient in models) and support offline manifest behavior per docs/commands/init.md.","acceptance_criteria":"- Bubble Tea init flow collects loader, game version, release types, and mods folder, seeded by any provided flags.\\n- Uses injected minecraft client/Doer for version suggestions/validation; no direct http.DefaultClient usage in TUI models.\\n- Offline manifest (fetch fails) still allows manual game-version entry and continues without suggestions.\\n- Uses the same write/overwrite logic as non-interactive init, producing modlist.json + empty modlist-lock.json.\\n- Unit tests cover model transitions and offline flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T22:59:19.303389634Z","updated_at":"2025-12-15T17:31:29.475867888Z","closed_at":"2025-12-15T17:31:29.475867888Z","dependencies":[{"issue_id":"mmm-1.1","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-1.1","depends_on_id":"mmm-3","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-10","title":"Implement prune command with .mmmignore support","description":"Implement the `prune` command so users can delete unmanaged files from the mods directory. This requires parsing `.mmmignore`, comparing filesystem contents to `modlist-lock.json`, and prompting (unless `--force` or `--quiet`).","acceptance_criteria":"- `mmm prune` exists with `--force` and honors quiet/debug flags.\n- Command respects `.mmmignore` glob patterns and skips files ending with `.disabled` as documented.\n- Without `--force`, prompt the user before deleting; in quiet mode without force, abort with a warning.\n- Deletes only files not present in the lock file and reports what was removed.\n- Tests cover ignore handling, confirmation logic, quiet-mode behavior, and deletion results.\n","notes":"Reminder: consult epic mmm-1 for the canonical Node reference repo path and execution-order guidance before working on this task.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:08:02.300690178Z","updated_at":"2025-12-14T14:19:39.903423627Z","dependencies":[{"issue_id":"mmm-10","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-10","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-10","depends_on_id":"mmm-6","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-11","title":"Implement scan command for unmanaged mods","description":"Port the `scan` command so it inspects the mods directory (respecting `.mmmignore` and `.disabled` suffixes), calculates SHA-1 hashes, queries the preferred platform for matches, and optionally writes discoveries to config/lock (`--add`).","acceptance_criteria":"- `mmm scan` exists with options `--prefer` (default modrinth) and `--add`.\n- Command groups detected files into recognized vs unknown, printing summaries similar to the Node behavior.\n- When `--add` (or user confirmation) is used, updates config + lock with the discovered mods.\n- Honors quiet mode (no prompts) and debug logging.\n- Tests cover ignore handling, Modrinth/CurseForge lookup flows, and `--add` persistence.\n","notes":"$Progress update (2025-12-18):\n- Actioned follow-up review: ran make fmt and re-verified make test/coverage-enforce/build after last-minute changes.\n- Fixed CurseForge fingerprint matching decoding drift (live API sometimes returns partialMatchFingerprints as object and unmatchedFingerprints as null).\n- Added File.fileFingerprint decoding + backfill to File.Fingerprint so exact matches map back to local fingerprints (fixes false \"not found\" cases like InventorySorter fingerprint 111526896).\n- Added regression tests for these CurseForge response shapes and fingerprint backfill.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:08:17.392641555Z","updated_at":"2025-12-18T02:15:09.619450593Z","closed_at":"2025-12-18T02:15:09.619450593Z","dependencies":[{"issue_id":"mmm-11","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-11","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-11","depends_on_id":"mmm-5","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-11","depends_on_id":"mmm-6","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-12","title":"Implement remove command for deleting mods","description":"Implement `mmm remove` so users can remove one or more mods (with glob support) from both the config and filesystem, with a `--dry-run` mode. The command should resolve patterns, delete matching files if present, update the lock file, and log skipped/missing entries without failing the whole operation.","acceptance_criteria":"- `mmm remove \u003cmods...\u003e` exists with `--dry-run` flag and honors quiet/debug modes.\n- Glob/pattern handling matches Node semantics (e.g., partial names, quoted strings for spaces).\n- For each resolved mod, remove its lock entry and delete the file (unless `--dry-run`). Missing files are logged but not treated as errors.\n- Command exits non-zero only for unrecoverable errors (config missing, invalid patterns, etc.).\n- Tests cover dry-run output, actual deletion, glob resolution, and missing file handling.\n","notes":"Reminder: consult epic mmm-1 for the canonical Node reference repo path and execution-order guidance before working on this task.\n\nAlignment update: Node parity is a guideline for knowing when we're \"done\"; for user-visible behavior we follow `docs/specs/*` as the source of truth.\n\nSpec decision (remove): `--dry-run` must not change any files. In particular, if `modlist-lock.json` is missing, `mmm remove --dry-run` must treat the lock as empty and must NOT create/write `modlist-lock.json`.\n\nImplementation notes:\n- `--quiet` suppresses normal remove output.\n- Lookup glob matching uses Go's built-in `filepath.Match` (not full minimatch).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:08:31.773739433Z","updated_at":"2025-12-17T18:17:18.30880986Z","closed_at":"2025-12-17T18:17:18.30880986Z","dependencies":[{"issue_id":"mmm-12","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-12","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-12","depends_on_id":"mmm-5","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-13","title":"Wire telemetry and update notifications","description":"Connect the existing PostHog telemetry client and GitHub release check into the CLI. Each command should record success/failure events with context, and the application should notify users about newer releases after command execution, matching the Node CLI behavior.","acceptance_criteria":"- Telemetry helper initializes once per run, captures per-command events (including success flag, error messages, basic config stats), and flushes on exit.\n- Commands use a consistent wrapper to emit telemetry without duplicating logic.\n- After successful command execution, the CLI performs a GitHub release check and prints the yellow-highlighted upgrade message when a newer version exists; failures to reach GitHub are silent as in Node.\n- Environment variables (`POSTHOG_API_KEY`, `HELP_URL`, etc.) influence behavior as documented.\n- Tests cover telemetry payload construction and release-check branching (newer version vs current).\n","notes":"Reminder: consult epic mmm-1 for the canonical Node reference repo path and execution-order guidance before working on this task.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:08:48.041531904Z","updated_at":"2025-12-14T14:19:53.461821165Z","dependencies":[{"issue_id":"mmm-13","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-13","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-13","depends_on_id":"mmm-7","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-14","title":"Audit Go codebase for baseline technical debt","description":"Before implementing the feature-parity epic, perform a focused codebase audit to identify any immediate technical debt, inconsistent patterns, missing docs/tests, or stale files that could slow down the upcoming work. Document findings and propose remediation tasks if needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T14:20:50.554524492Z","updated_at":"2025-12-14T15:56:25.370778182Z","closed_at":"2025-12-14T15:56:25.370778182Z","dependencies":[{"issue_id":"mmm-14","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-15","title":"Fix fmt.Errorf vet failures in init game version validation","description":"`go test ./...` currently fails because `cmd/mmm/init/gameVersion.go` calls `fmt.Errorf(i18n.T(...))`, and Go 1.24's vet disallows non-constant format strings. Adjust `isValidMinecraftVersion` to use constant format strings (e.g., `fmt.Errorf(\"%s\", i18n.T(...))`) or otherwise satisfy vet so the command package builds cleanly.","notes":"fmt.Errorf calls in cmd/mmm/init now use constant format strings and go test ./cmd/mmm/init passes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T14:28:30.839401172Z","updated_at":"2025-12-14T14:38:35.509271009Z","closed_at":"2025-12-14T14:38:35.509271009Z","dependencies":[{"issue_id":"mmm-15","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-16","title":"Stabilize telemetry tests by decoupling machine ID lookup","description":"`internal/telemetry/telemetry_test.go` fails in CI because `machineid.ID()` returns an empty string on this platform. Introduce dependency injection or environment overrides so tests can stub the machine ID, and ensure the telemetry client does not depend on unavailable hardware identifiers.","notes":"Telemetry machine ID logic now injectable/fallback-safe; go test ./... and make coverage pass.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T14:28:39.79401769Z","updated_at":"2025-12-14T14:46:24.189827081Z","closed_at":"2025-12-14T14:46:24.189827081Z","dependencies":[{"issue_id":"mmm-16","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-17","title":"Redesign telemetry lifecycle with init/flush hooks","description":"Telemetry should match the Node CLI’s behavior and support future multi-command TUI sessions without impacting user flows. Design and implement a lifecycle where telemetry is initialized once per application execution (session), captures multiple command events safely, and flushes on shutdown. Ensure failures remain silent (best-effort), allow injection/testing of machine IDs, and expose hooks so the entry point can defer cleanup before exiting or on Ctrl+C. Document the behavior and provide a clear API for future commands to emit telemetry.","acceptance_criteria":"- Telemetry package exposes explicit Init/Capture/Shutdown (or equivalent) APIs so the CLI entry point can control when telemetry starts and flushes.\n- Initialization happens once per application execution; multiple commands/events can be captured without reinitializing.\n- Shutdown flushes/closes gracefully (with a short timeout) and runs on normal exit and Ctrl+C.\n- Telemetry failures (init/enqueue/flush) are logged at debug level but never interrupt the user flow.\n- Tests can override machine IDs and telemetry clients, with helpers to reset global state between runs.\n- Documentation explains telemetry behavior, opt-out env vars, and lifecycle hooks for future TUI work.","notes":"Reminder: read epic mmm-1 for Node reference repo and execution order before working on telemetry lifecycle redesign.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-14T14:58:44.702771579Z","updated_at":"2025-12-14T19:17:37.8415082Z","closed_at":"2025-12-14T19:17:37.8415082Z","dependencies":[{"issue_id":"mmm-17","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-17","depends_on_id":"mmm-2","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-18","title":"Fix modlist config schema to match Node format","description":"`internal/models/ModsJson` currently defines `mods` as `[]ModInstall` (lock entries) and lacks top-level `allowVersionFallback`, so `config.InitializeConfigFile` and JSON parsing cannot represent the structure documented in README and docs/commands/init.md. This prevents us from serializing allowed release types, per-mod pins, or fallback defaults. Update the model to use a dedicated config entry type (matching the Node schema), add the root fallback flag, and ensure default config generation plus tests reflect the correct layout.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T15:36:13.926570371Z","updated_at":"2025-12-14T15:55:16.403597724Z","closed_at":"2025-12-14T15:49:18.041529477Z","dependencies":[{"issue_id":"mmm-18","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-18","depends_on_id":"mmm-14","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-19","title":"Repair Makefile run/build targets","description":"The Makefile’s core targets are currently broken on Unix-like systems:\n- `run` executes `go run cmd/minecraft-mod-manager/main.go`, but the only entrypoints are `main.go` at repo root and `cmd/mmm`; this target fails immediately.\n- The cross-platform build jobs rely on `@set GOOS=darwin` style commands (Windows syntax), so `make build` silently compiles for the host OS instead of the intended target and never creates the `build/\u003cos\u003e/mmm` artifacts.\nBring the Makefile in line with the repo layout (call `go run ./main.go` or `go run ./cmd/mmm` as appropriate) and use portable environment overrides (`GOOS=darwin GOARCH=amd64 $(GO_BUILD) ...`). Include regression tests/docs (e.g., CI snippet or README update) showing how to invoke the fixed targets.","notes":"Fixed Makefile build targets to cross-compile correctly by using target-specific exported GOOS/GOARCH and portable build subdir creation (new build-dirs target). Verified on Linux: darwin artifact starts with cf fa ed fe (Mach-O) and windows artifact starts with 4d 5a (PE). Ran: make test, make coverage-enforce, make build.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-14T15:36:24.683262892Z","updated_at":"2025-12-14T20:38:14.513844689Z","closed_at":"2025-12-14T20:38:14.513844689Z","dependencies":[{"issue_id":"mmm-19","depends_on_id":"mmm-14","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-2","title":"Implement CLI globals and shared config handling","description":"Add support for the global flags documented in `README.md` (`--config`, `--quiet`, `--debug`) and make the Cobra root command load configuration paths consistently for subcommands. Introduce a reusable logger/output abstraction that respects quiet/debug settings, and ensure both configuration (`modlist.json`) and lock (`modlist-lock.json`) helpers can be injected wherever needed (but do not change command behavior yet).","acceptance_criteria":"- Root command accepts `--config`, `--quiet`, and `--debug` flags with the documented semantics.\n- Logger/output helper suppresses normal logs in quiet mode and includes extra context when `--debug` is set.\n- Config path flag propagates to subcommands via `cmd.Flags().StringP(...)` or equivalent.\n- Helpers exist to load/save both config and lock files given the configured path so later commands can reuse them.\n- Basic unit tests cover flag parsing and quiet/debug behavior.\n","notes":"Windows coverage fix: added metadata tests for rooted forward-slash paths and Windows drive-letter absolute paths so ModsFolderPath absolute detection is fully covered across platforms. Verified: make test, make coverage-enforce (100%), make build.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:05:38.593381854Z","updated_at":"2025-12-14T22:28:31.067006562Z","closed_at":"2025-12-14T22:28:31.067006562Z","dependencies":[{"issue_id":"mmm-2","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-2","depends_on_id":"mmm-17","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-20","title":"Fix locale detection to avoid empty locales","description":"`internal/i18n/getUserLocales` preallocates `locales := make([]string, len(detectedLocales))` and then appends to it, producing leading empty strings. When the detected locales list is non-empty, the returned slice starts with \"\"; go-i18n treats this as an unknown locale and fails to fall back properly. Rewrite the function to reserve capacity without pre-filling (e.g., `make([]string, 0, len(...))`) and add unit tests covering LANG unset + locale provider returning multiple values.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-14T15:36:30.314752936Z","updated_at":"2025-12-15T18:03:55.4049153Z","closed_at":"2025-12-15T17:53:35.806559314Z","dependencies":[{"issue_id":"mmm-20","depends_on_id":"mmm-14","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-21","title":"Close response bodies before RLHTTPClient retries","description":"In `internal/httpClient/httpClient.go`, the retry loop reuses the same `http.Request` and immediately retries on 5xx responses without draining/closing the previous body. This leaves the TCP connection open and eventually exhausts the client's idle pool. Update the logic to always `io.Copy(io.Discard, response.Body)` and `response.Body.Close()` before sleeping and retrying, and add regression tests that simulate repeated 5xx responses to ensure no goroutine leaks and the client respects retry limits.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T15:36:35.532505089Z","updated_at":"2025-12-14T17:25:56.730009179Z","closed_at":"2025-12-14T17:25:56.730009179Z","dependencies":[{"issue_id":"mmm-21","depends_on_id":"mmm-14","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-22","title":"Inject Mojang client into init TUI and handle offline flows","description":"`cmd/mmm/init/gameVersion.go` calls `minecraft.GetLatestVersion`/`GetAllMineCraftVersions`/`IsValidVersion` directly with `http.DefaultClient` each time the TUI starts. This bypasses the rate-limited client, makes init hang for users without internet access, and is almost impossible to unit-test. Update the TUI models to accept a `minecraft` service (or at least a Doer) so we can reuse the shared rate-limited HTTP client, stub it in tests, and obey docs/commands/init.md’s rule to gracefully fall back when the manifest cannot be fetched. Add tests proving that offline mode still lets the user input versions manually.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T15:36:43.909459675Z","updated_at":"2025-12-15T17:47:26.129059461Z","closed_at":"2025-12-15T17:47:26.129059461Z","dependencies":[{"issue_id":"mmm-22","depends_on_id":"mmm-14","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-23","title":"Expose build metadata and HELP_URL in environment helpers","description":"`internal/environment/environment.go` only surfaces MODRINTH/CURSEFORGE/POSTHOG keys plus a hard-coded `AppVersion()` that always returns `REPL_VERSION`. Docs (docs/requirements-go-port.md) and the Node CLI rely on a `HELP_URL` env var, and the HTTP clients are supposed to embed the real binary version in their User-Agent. Add helper(s) for HELP_URL (and any other documented envs), switch `AppVersion` to read from a variable set via `-ldflags` at build time, and update the Makefile/docs/tests accordingly so `mmm version` and API calls expose the release tag instead of the placeholder.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T15:36:49.262506181Z","updated_at":"2025-12-14T17:04:03.877485799Z","closed_at":"2025-12-14T17:04:03.877485799Z","dependencies":[{"issue_id":"mmm-23","depends_on_id":"mmm-14","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-24","title":"Makefile build fails on Windows when cross-compiling due to CGO","description":"On Windows, `make build` cross-compiles `build/darwin/mmm`, `build/linux/mmm`, and `build/windows/mmm.exe`. When CGO is enabled (Go defaults to CGO_ENABLED=1 on Windows), the linux cross-compile can fail in `runtime/cgo` because it tries to use the host C toolchain without a proper cross compiler / headers (e.g., missing `sigset_t`). The Makefile should disable CGO for cross builds by default to avoid requiring extra toolchains, while still allowing advanced users to override.","notes":"Implemented Makefile change: added CROSS_CGO_ENABLED?=0 and exported CGO_ENABLED per build target (darwin/linux/windows). Verified on Linux that darwin artifact is Mach-O and windows artifact is PE; tests and coverage-enforce pass.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T20:43:10.569581214Z","updated_at":"2025-12-14T20:44:33.763097432Z","closed_at":"2025-12-14T20:44:33.763097432Z","dependencies":[{"issue_id":"mmm-24","depends_on_id":"mmm-19","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-25","title":"Remove hard-coded defaults from config/init","description":"We currently seed DefaultConfig with hard-coded values (e.g., loader=Fabric and a fixed gameVersion). Long-term, init should collect these from the user (or from explicit flags) and we should avoid assuming defaults because setups vary. Consider resolving gameVersion from the latest available Minecraft version during init (with offline fallback per docs) rather than embedding a static version in config defaults.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T21:36:32.747969161Z","updated_at":"2025-12-15T17:47:28.943875775Z","closed_at":"2025-12-15T17:47:28.943875775Z","dependencies":[{"issue_id":"mmm-25","depends_on_id":"mmm-2","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-26","title":"Init: decide behavior when mods folder missing","description":"Currently `mmm init` errors if the resolved mods folder path does not exist. Decide intended UX/behavior for missing mods folder: create automatically vs prompt vs hard error; define --quiet behavior; ensure path resolution (relative to config dir vs absolute) remains consistent; implement in non-interactive init and future Bubble Tea init (mmm-1.1). Update docs/commands/init.md and add tests once decided.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T11:51:40.872151616Z","updated_at":"2025-12-15T13:28:23.152760526Z","closed_at":"2025-12-15T13:28:23.152760526Z","dependencies":[{"issue_id":"mmm-26","depends_on_id":"mmm-3","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-27","title":"Docs: move README init section to docs/commands","description":"Root README.md currently embeds full command documentation. We want README to stay concise and link to user-facing docs in docs/commands/ (for future Docusaurus). Remove/replace README's init section with a link to docs/commands/init.md and update TOC accordingly; later apply the same pattern to other commands.","notes":"Updated README strategy: removed the redundant in-README INIT subsection entirely; TOC link to docs/commands/init.md is sufficient.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T12:24:48.61590315Z","updated_at":"2025-12-15T17:47:32.164433336Z","closed_at":"2025-12-15T17:47:32.164433336Z","dependencies":[{"issue_id":"mmm-27","depends_on_id":"mmm-3","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-28","title":"Docs: add Docusaurus site (Stonecraft pattern)","description":"Set up a Docusaurus documentation site for this repo using the same structure/pattern as https://github.com/meza/Stonecraft. Use the minecraftmodmanager.com domain. Goals: host user-facing docs (from docs/commands) and potentially specs separately; keep root README concise with links. Define hosting/deploy approach, migration plan, and ensure docs follow plain-ASCII + conversational tone guidelines.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-12-15T12:28:03.790775227Z","updated_at":"2025-12-15T12:28:03.790775227Z"}
{"id":"mmm-29","title":"Migrate i18n to kaptinlin/go-i18n with ICU-style translations","description":"We want to migrate off nicksnyder/go-i18n to kaptinlin/go-i18n (ICU-style). Scope: evaluate kaptinlin API, file format, Crowdin compatibility, and extraction workflow. Deliverables: proposal or PR to switch, with tests for plural/select/fallback and LANG/Accept-Language parity, plus Crowdin config notes.\n\nTasks to cover:\n- Compare APIs: how to load bundles/localizers, how ICU placeholders and plural/select are expressed, fallback behavior.\n- Define translation file format (JSON/TOML/YAML) compatible with Crowdin and kaptinlin; verify {var} placeholder handling and ICU block preservation.\n- Establish extraction/merge workflow (no goi18n CLI). If needed, outline a custom extractor or manual source-of-truth file for Crowdin.\n- Prototype: port a few keys (e.g., cmd.init prompts) to kaptinlin format and run unit tests for plural/select + fallback; confirm MMM_TEST behavior.\n- Migration plan: steps to rewrite existing lang files, update T() helper, and adjust tests.\n\nRisks/notes: kaptinlin library is independent (not a fork); need to ensure dependency stability and licensing; validate performance/footprint vs current.","notes":"Keep internal/i18n T signature unchanged; migrate wiring to new library without altering public API or existing tests.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T18:03:20.46139975Z","updated_at":"2025-12-15T19:12:21.16730906Z","closed_at":"2025-12-15T19:12:21.16730906Z","dependencies":[{"issue_id":"mmm-29","depends_on_id":"mmm-20","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-3","title":"Finish init command with persistence","description":"Make `mmm init` actually write `modlist.json` and `modlist-lock.json`, supporting both interactive prompts and CLI flags for loader, game version, release types, and mods folder. Validate inputs as described in `docs/commands/init.md`, reuse the config helpers introduced earlier, and ensure rerunning `init` respects quiet mode (e.g., failing fast when a config already exists).","design":"Rescope: focus mmm-3 on non-TUI init persistence + validation. Interactive Bubble Tea init flow moved to mmm-1.1. mmm-3 should implement flag-driven init (loader/game-version/release-types/mods-folder) that writes modlist.json and empty modlist-lock.json, plus config-exists overwrite/new-path behavior and --quiet semantics per docs/commands/init.md. TUI integration and minecraft client injection into TUI are deferred to mmm-1.1.","acceptance_criteria":"- Running `mmm init` guided prompts collect loader, game version, release types, and mods folder, then create `modlist.json` and `modlist-lock.json`.\n- CLI flags (`-l/-g/-r/-m`) bypass prompts and produce the same file content as the Node version for identical answers.\n- Existing config handling matches README rules: prompts to overwrite unless `--quiet`, and quiet mode errors if file exists.\n- Mods folder validation and Minecraft version verification behave as in docs (latest release fallback, validation optional when manifest unavailable).\n- Tests cover both interactive-free (flag-driven) flows and file-writing behavior using in-memory filesystems.\n","notes":"Update defaults: Cobra flags now default --game-version=latest (resolved at runtime), --release-types=release, and --mods-folder=mods; only required flag is --loader. Removed initWithDeps defaulting logic except interpreting \"latest\". Tests/docs updated; make test/coverage-enforce/build green.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:05:46.325362604Z","updated_at":"2025-12-15T12:29:06.331260289Z","closed_at":"2025-12-15T12:29:06.331260289Z","dependencies":[{"issue_id":"mmm-3","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-3","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-30","title":"List: verify installed mods by hash","description":"Enhance the list command to treat a mod as installed only when the lock entry matches id/type and the file exists with the expected hash. Add hash verification check, flag mismatches as not installed, and consider reporting hash mismatches distinctly.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T19:34:25.912765763Z","updated_at":"2025-12-15T19:34:25.912765763Z","dependencies":[{"issue_id":"mmm-30","depends_on_id":"mmm-4","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-31","title":"List: improve missing-lock handling","description":"When the lock file is absent, list currently treats all mods as not installed and continues. Define and implement the desired UX (e.g., warning, guidance to run install, optional auto-create) and add tests to lock the behavior.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T19:34:29.300470774Z","updated_at":"2025-12-15T19:34:29.300470774Z","dependencies":[{"issue_id":"mmm-31","depends_on_id":"mmm-4","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-32","title":"Init: add telemetry capture","description":"Add PostHog telemetry to the init command to mirror other commands: capture success/failure, arguments (loader/gameVersion/releaseTypes/modsFolder), config metadata, and duration. Include tests to verify capture is invoked and respects telemetry opt-out.","notes":"Implemented init telemetry capture (matching established command pattern) and addressed review feedback:\n- Telemetry now uses final init values: runInit returns the final initOptions (including normalization of --game-version=latest and any interactive selections), and the payload is built from those final values.\n- Interactive flag now reflects whether Bubble Tea actually launched (not merely that the environment supports TUI).\n\nTests:\n- Added cmd/mmm/init/init_test.go coverage asserting telemetry arguments use normalized final values and that Interactive=false when TUI was not launched even in a terminal environment.\n\nVerification:\n- make fmt\n- make test\n- make coverage-enforce\n- make build","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-15T19:34:33.54817011Z","updated_at":"2025-12-17T22:26:38.899516771Z","closed_at":"2025-12-17T22:26:38.899516771Z","dependencies":[{"issue_id":"mmm-32","depends_on_id":"mmm-4","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-33","title":"Review/streamline command dependency injection (replace ad-hoc deps structs)","description":"Commands hand-roll deps structs and previously used nil-guards (add/list/init). Standardize DI/testing (constructor injection or small interfaces) to avoid defensive code and reduce boilerplate.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T23:07:32.060712216Z","updated_at":"2025-12-15T23:07:32.060712216Z","dependencies":[{"issue_id":"mmm-33","depends_on_id":"mmm-5","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-34","title":"Add static analyzer to enforce i18n var stringability","description":"Add a build-time static check (go/analysis or custom vet tool) that scans calls to internal/i18n.T and flags any Tvars/TData values that are not ICU-formatter compatible (string/bool/numbers/time.Duration or fmt.Stringer). This prevents silent placeholder failures when custom types are passed without String().","design":"Rationale: kaptinlin/go-i18n + gotnospirit/messageformat silently falls back to the unformatted template text if interpolation fails. We want failures caught during build/CI. Sketch: write analyzer to inspect composite literals of i18n.Tvars{Data:\u0026i18n.TData{...}} (and other common patterns) and validate types implement fmt.Stringer or are primitives; wire into make targets/CI.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T11:05:27.295410227Z","updated_at":"2025-12-16T11:05:27.295410227Z","dependencies":[{"issue_id":"mmm-34","depends_on_id":"mmm-5","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-35","title":"Move doc/images to docs/images","description":"Move documentation images from doc/images to docs/images and update all markdown references accordingly. This will unblock/enable the planned Docusaurus documentation setup by keeping all docs assets under docs/.","design":"Notes: keep paths stable via redirects or update all links in README.md and docs/**/*.md; ensure markdown remains ASCII; verify via make test and a grep for old paths. If Docusaurus issue ID differs, update the dependency to block the correct one.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T11:22:28.255316977Z","updated_at":"2025-12-16T11:22:28.255316977Z","dependencies":[{"issue_id":"mmm-35","depends_on_id":"mmm-28","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-36","title":"Document internal Go modules (module READMEs)","description":"Add engineer-focused README.md files next to any internal/* package that is currently undocumented, following the repo documentation guidelines (purpose-first, minimal runnable examples, clear error contracts, extension points). Keep content truthful to current code; link to higher-level docs instead of duplicating.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:46:59.888507701Z","updated_at":"2025-12-16T12:07:44.136720098Z","closed_at":"2025-12-16T12:07:44.136720098Z"}
{"id":"mmm-37","title":"Add maintainer README for cmd/mmm/add","description":"Pilot a short maintainer-focused README for cmd/mmm/add that links to the authoritative command docs/specs and captures only code-adjacent maintenance details (wiring, flow splits, tests/snapshots, error mapping). If useful, replicate pattern to other commands.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:55:39.359789398Z","updated_at":"2025-12-16T11:58:15.57768763Z","closed_at":"2025-12-16T11:58:15.57768763Z"}
{"id":"mmm-38","title":"Add maintainer READMEs for all cmd/mmm commands","description":"Add short maintainer-focused README.md files under cmd/mmm/\u003ccommand\u003e/ for all implemented commands, following the cmd/mmm/add README pattern: link to docs/commands/\u003ccommand\u003e.md and docs/specs/\u003ccommand\u003e.md where present, include code map, flow notes, interactive vs non-interactive notes, and testing/snapshot update commands. Keep DRY.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T11:58:58.025339079Z","updated_at":"2025-12-16T12:01:03.612185063Z","closed_at":"2025-12-16T12:01:03.612185063Z"}
{"id":"mmm-39","title":"Refresh existing internal module READMEs","description":"Review the internal module READMEs that existed prior to the documentation sweep (e.g., internal/i18n, internal/lifecycle, internal/modrinth, internal/telemetry). Bring them up to the current documentation tone/structure, preserving all existing information while improving clarity and navigation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-16T12:03:17.615615223Z","updated_at":"2025-12-16T12:07:47.729646287Z","closed_at":"2025-12-16T12:06:49.169627709Z"}
{"id":"mmm-4","title":"Add list command to display managed mods","description":"Implement the `list` command described in `docs/commands/list.md`. It should load the configured `modlist.json`/lock file, determine whether each mod's file is present in the mods folder, and print a formatted list (respecting quiet/debug modes). Include telemetry for the total mod count.","acceptance_criteria":"- `mmm list` is available (with aliases `l`/`ls`) and honors global flags.\n- Output lists mods alphabetically with indicators for installed vs missing files, matching the Node CLI semantics.\n- Command errors cleanly when config or lock files are missing/invalid.\n- PostHog telemetry is emitted with the total mod count for successful runs.\n- Unit tests cover config loading, missing files, and telemetry invocation.\n","notes":"Discovery: list should mirror Node CLI (no prompts) and also get a minimal Bubble Tea TUI for snapshot coverage and consistency. Installed status determined via lock entry matching mod id/type and file existence (hash verification can be a follow-up issue). If lock file is missing, treat all mods as not installed but do not error or create the lock. Quiet mode still prints the list (no prompts exist); debug adds detail only when enabled. Translation keys for list likely need to be added if absent in Node; follow internal/i18n naming guidance.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:06:14.548483351Z","updated_at":"2025-12-15T20:27:10.854225534Z","closed_at":"2025-12-15T20:27:10.854225534Z","dependencies":[{"issue_id":"mmm-4","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-4","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-4","depends_on_id":"mmm-3","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-40","title":"Instrument full app lifecycle with internal/perf (paired with telemetry)","description":"We need to capture the entire application lifecycle (process start -\u003e command execution -\u003e shutdown) with internal/perf markers, and ensure telemetry events can be correlated with that lifecycle. Requirements:\\n\\n- Add perf regions/marks in main entrypoint to bracket: startup, command execution, and shutdown (including signal-triggered shutdown).\\n- Ensure telemetry init/capture/shutdown is within those perf regions so we can measure overhead and correlate failures.\\n- Keep behavior non-blocking: perf must not change CLI output or command semantics.\\n- Tests must assert lifecycle marks/measurements exist and are deterministic (use existing internal/perf log helpers).\\n- Update any relevant internal docs (internal/perf, internal/telemetry, main) to describe the lifecycle instrumentation and how to read it.\\n\\nContext: init/list/add implementations shipped without end-to-end perf coverage; this patches that gap.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T12:09:26.719546643Z","updated_at":"2025-12-16T13:41:14.048860652Z","closed_at":"2025-12-16T13:41:14.048860652Z"}
{"id":"mmm-41","title":"Add --perf / --perf-out-dir to write mmm-perf.json","description":"Add a `--perf` flag that writes `mmm-perf.json` at process termination. Add `--perf-out-dir` (default: directory containing the resolved `--config` path). Export includes perf marks + measurements, and normalizes filesystem paths in `PerformanceDetails` to be relative to the config directory. Best-effort: never affects exit codes or user output; only logs failures when `--debug` is enabled.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T13:15:33.491073252Z","updated_at":"2025-12-16T13:41:17.883136686Z","closed_at":"2025-12-16T13:41:17.883136686Z","dependencies":[{"issue_id":"mmm-41","depends_on_id":"mmm-40","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-42","title":"Correlated perf spans (IDs + DAG links) for parallel operations","description":"Problem: Our exported perf log is a flat list of marks/measures. With parallel operations (goroutines, concurrent file ops, overlapping HTTP/download work), correlation is ambiguous and becomes guesswork.\n\nGoal: Provide robust causality and correlation so we can answer \"what spawned this?\" and attribute time to the right user intent/subroutine even when work overlaps.\n\nStrategy: Add an explicit correlation layer on top of perf instrumentation.\n\nRequirements:\n- Add stable identities: span_id for each region, trace_id for the process run.\n- Add causality: a primary parent_span_id plus optional links[] so the model can represent a DAG (not just a tree).\n- Preserve the existing semantic naming taxonomy (app.lifecycle.*, app.command.*, platform.*, api.*, net.http.*, io.*, tui.*) as the human query layer.\n- Add a lightweight propagation mechanism so child spans can inherit context across call stacks and goroutines (likely context.Context based), and allow explicit linking when a span has multiple logical parents.\n- Export schema update: emit spans/events with ids and links so consumers can reconstruct a tree/DAG deterministically (no interval-guessing).\n- Define top-level structure: per-process root with child command spans; commands may contain multiple TUI sessions and nested work (pyramid).\n- Keep behavior best-effort and non-blocking: no CLI output changes, no exit code changes.\n- Testing: 100% coverage for new code. Add deterministic tests proving parent/child linkage and link edges under simulated parallel execution.\n- Docs: update internal/perf/README.md with guidance on when to use parent vs link, how to propagate context, and how this interacts with tui wait spans.\n\nNotes:\n- Tree vs DAG: Use a single primary parent for the \"main\" containment hierarchy, and links for cross-cutting correlation (e.g., an HTTP request that should be attributed to both a command stage and a module invocation).\n- Consider aligning the span model with OpenTelemetry semantics (trace_id/span_id/parent, links) while keeping runtime overhead low; keep runtime/trace as an implementation detail for Go execution tracing.","design":"## Implementation Plan: OpenTelemetry Integration (Clean Break)\n\n### Philosophy\n\nWe instrument for diagnosis, not vanity metrics. The goal is answering \"why is X slow?\" with confidence:\n- Which part of the user flow dominates wall time?\n- User thinking vs system work?\n- Which subsystem (platform, API, HTTP, filesystem)?\n- Which entrypoint or retry loop is responsible?\n\nThis requires proper correlation. OTEL provides it natively via context propagation.\n\n### Approach: Clean Replacement (No Legacy Layer)\n\nReplace internal/perf entirely with OTEL-backed implementation. Update ALL existing call sites to thread context properly. No compatibility shims.\n\n### 1. Dependencies\n\n```\ngo.opentelemetry.io/otel\ngo.opentelemetry.io/otel/sdk/trace\ngo.opentelemetry.io/otel/exporters/stdout/stdouttrace\ngo.opentelemetry.io/otel/trace\ngo.opentelemetry.io/otel/attribute\ngo.opentelemetry.io/otel/sdk/resource\ngo.opentelemetry.io/otel/semconv/v1.26.0\n```\n\n### 2. New API (replaces existing)\n\n```go\n// Initialize tracing (call once in main.go)\nfunc Init(cfg Config) error\nfunc Shutdown(ctx context.Context) error\n\n// Span creation - ALWAYS requires context\nfunc StartSpan(ctx context.Context, name string, opts ...SpanOption) (context.Context, *Span)\n\n// Span methods\nfunc (s *Span) End()\nfunc (s *Span) SetAttributes(attrs ...attribute.KeyValue)\nfunc (s *Span) AddEvent(name string, opts ...trace.EventOption)\nfunc (s *Span) Link() trace.Link  // for DAG relationships\n\n// Context helpers\nfunc SpanFromContext(ctx context.Context) *Span\nfunc LinkFromContext(ctx context.Context) trace.Link\n\n// Options\nfunc WithAttributes(attrs ...attribute.KeyValue) SpanOption\nfunc WithLinks(links ...trace.Link) SpanOption\n\n// Testing\nfunc Reset()  // clear global state between tests\n```\n\n### 3. Package Structure\n\n```\ninternal/perf/\n  config.go    # Config struct, Init/Shutdown\n  span.go      # Span wrapper, StartSpan, options\n  export.go    # File writer for --perf flag\n  perf_test.go # All tests\n  README.md    # Updated documentation\n```\n\nRemove: The current Mark/Measure/Region pattern. OTEL spans handle start/end/duration natively.\n\n### 4. Migration of Call Sites\n\nThread context.Context through all code paths:\n\n**main.go:**\n- Create root span, pass ctx to command execution\n- Shutdown flushes all spans\n\n**Commands (cmd/mmm/*):**\n- Accept ctx from Cobra via cmd.Context()\n- Create command span: `ctx, span := perf.StartSpan(ctx, \"app.command.add\")`\n- Pass ctx to all downstream calls\n\n**Platform layer (internal/platform):**\n- All public functions accept ctx as first param\n- Create spans like `platform.fetch_mod`\n\n**HTTP client (internal/httpClient):**\n- DoWithContext creates `net.http.request` span\n- Child spans for retries: `net.http.request.attempt`\n\n**API clients (internal/curseforge, internal/modrinth):**\n- All methods accept ctx\n- Create spans like `api.modrinth.project.get`\n\n**Config I/O (internal/config):**\n- Read/Write accept ctx\n- Spans like `io.config.read`, `io.config.lock.write`\n\n**TUI (cmd/mmm/*/tui.go):**\n- Store ctx in model\n- Spans for state transitions: `tui.add.state.fetching`\n- Events for user actions\n\n### 5. Preserve Semantic Naming\n\nKeep the existing taxonomy:\n- `app.lifecycle.*` - startup, execute, shutdown\n- `app.command.*` - user-initiated commands\n- `platform.*` - orchestration layer\n- `api.\u003cprovider\u003e.*` - API calls\n- `net.http.*` - HTTP transport\n- `io.*` - filesystem operations\n- `tui.*` - interactive UI\n\n### 6. Export (--perf flag)\n\nUse stdouttrace with file writer. Output is standard OTEL JSON:\n- TraceID, SpanID, ParentSpanID for correlation\n- Attributes for details (success, provider, status, attempt, etc.)\n- Links for DAG relationships\n- Timestamps and durations\n\nViewable in Jaeger, Chrome tracing, or any OTEL-compatible tool.\n\n### 7. Testing Strategy\n\n- Use in-memory exporter for tests\n- Assert span hierarchy (parent-child relationships)\n- Assert span attributes match expected details\n- Test parallel operations produce correct links\n- Each test calls perf.Reset() via t.Cleanup()\n- 100% coverage required\n\n### 8. Execution Order\n\n1. Add OTEL dependencies to go.mod\n2. Rewrite internal/perf with new API\n3. Update main.go with Init/Shutdown and root span\n4. Update internal/httpClient to accept and propagate ctx\n5. Update internal/config to accept ctx\n6. Update internal/curseforge and internal/modrinth to accept ctx\n7. Update internal/platform to accept ctx\n8. Update each command (init, add, list, version) to thread ctx\n9. Update TUI models to store and use ctx\n10. Update tests throughout\n11. Update internal/perf/README.md\n12. Verify make test \u0026\u0026 make coverage-enforce \u0026\u0026 make build\n\n### 9. Acceptance Criteria\n\n1. All spans within one CLI run share the same TraceID\n2. Nested operations show correct parent-child hierarchy\n3. Parallel operations can be linked via span links\n4. --perf writes valid OTEL JSON\n5. Zero overhead when --perf not set (noop provider)\n6. No legacy StartRegion/Mark API remains\n7. 100% test coverage\n8. Documentation updated","notes":"2025-12-17: Reduced per-command duplication for telemetry duration. internal/telemetry.CaptureCommand now derives duration_ms from perf spans (latest-ended app.command.\u003ccmd\u003e span) when CommandTelemetry.Duration is omitted. Refactored add/list to emit telemetry after ending the command span; updated tests; make coverage-enforce remains 100%.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T13:36:52.445510327Z","updated_at":"2025-12-17T12:31:17.854318373Z","closed_at":"2025-12-17T12:31:17.854318373Z","dependencies":[{"issue_id":"mmm-42","depends_on_id":"mmm-41","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-43","title":"Exported perf paths should use forward slashes","description":"Windows runs export relative paths using OS separators (\\\\) which makes `mmm-perf.json` harder to diff/share and breaks tests expecting forward slashes. Export should normalize relative paths to use `/` consistently in JSON while remaining relative to the config directory.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T13:43:15.983361816Z","updated_at":"2025-12-16T13:45:15.964835557Z","closed_at":"2025-12-16T13:45:15.964835557Z","dependencies":[{"issue_id":"mmm-43","depends_on_id":"mmm-41","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-44","title":"Fix Windows path expectations in perf export config tests","description":"Tests for perf export config parsing in main_test.go hardcode Unix-style absolute paths (e.g. /workdir/...). On Windows, filepath.Abs prefixes the current drive (e.g. F:\\\\workdir\\\\...), causing failures. Update tests to compute expected baseDir/outDir using filepath.Join + filepath.Abs so they are cross-platform.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-16T13:46:58.715664444Z","updated_at":"2025-12-16T13:47:46.98928497Z","closed_at":"2025-12-16T13:47:46.98928497Z","dependencies":[{"issue_id":"mmm-44","depends_on_id":"mmm-41","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-45","title":"Modrinth API client ignores JSON decode errors","description":"The Modrinth API client silently ignores JSON decode errors in three locations, returning partially populated or empty structs instead of errors. This could cause subtle bugs when the API returns malformed JSON or unexpected response formats.\n\n**Affected locations:**\n\n1. `internal/modrinth/project.go:82`\n```go\nresult := \u0026Project{}\n_ = json.NewDecoder(response.Body).Decode(result)\nreturn result, nil\n```\n\n2. `internal/modrinth/version.go:122`\n```go\nresult := \u0026Versions{}\n_ = json.NewDecoder(response.Body).Decode(result)\nreturn *result, nil\n```\n\n3. `internal/modrinth/version.go:150`\n```go\nresult := \u0026Version{}\n_ = json.NewDecoder(response.Body).Decode(result)\nreturn result, nil\n```\n\n**Inconsistency:** The CurseForge client properly handles decode errors:\n```go\n// curseforge/project.go:47-49\nerr = json.NewDecoder(response.Body).Decode(\u0026projectResponse)\nif err != nil {\n    return nil, globalErrors.ProjectApiErrorWrap(errors.Wrap(err, \"failed to decode response body\"), projectId, models.CURSEFORGE)\n}\n```\n\n**Recommended fix:** Handle decode errors like CurseForge does:\n```go\nif err := json.NewDecoder(response.Body).Decode(result); err != nil {\n    return nil, globalErrors.ProjectApiErrorWrap(err, projectId, models.MODRINTH)\n}\n```\n\n**Risk:** High - silent data corruption possible if API returns malformed JSON.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-17T11:20:09.5542855Z","updated_at":"2025-12-17T11:23:34.9338395Z","dependencies":[{"issue_id":"mmm-45","depends_on_id":"mmm-42","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-46","title":"Ignored http.NewRequestWithContext errors across API clients","description":"Multiple locations in the codebase ignore errors from `http.NewRequestWithContext`. While these are unlikely to fail in practice (the URL is constructed from known-valid parts), this pattern is inconsistent and could mask bugs if URL construction logic changes.\n\n**Affected locations:**\n\n1. `internal/modrinth/project.go:62`\n```go\nrequest, _ := http.NewRequestWithContext(ctx, http.MethodGet, url, nil)\n```\n\n2. `internal/modrinth/version.go:97`\n```go\nbaseURL, _ := url.Parse(fmt.Sprintf(\"%s/v2/project/%s/version\", GetBaseUrl(), lookup.ProjectId))\n```\n\n3. `internal/modrinth/version.go:103`\n```go\nrequest, _ := http.NewRequestWithContext(ctx, \"GET\", baseURL.String(), nil)\n```\n\n4. `internal/modrinth/version.go:132`\n```go\nrequest, _ := http.NewRequestWithContext(ctx, \"GET\", url, nil)\n```\n\n5. `internal/curseforge/project.go:27`\n```go\nrequest, _ := http.NewRequestWithContext(ctx, http.MethodGet, url, nil)\n```\n\n6. `internal/curseforge/files.go:58`\n```go\nrequest, _ := http.NewRequestWithContext(ctx, http.MethodGet, url, nil)\n```\n\n7. `internal/curseforge/files.go:114-115`\n```go\nbody, _ := json.Marshal(getFingerprintsRequest{Fingerprints: fingerprints})\nrequest, _ := http.NewRequestWithContext(ctx, http.MethodPost, url, bytes.NewBuffer(body))\n```\n\n**Risk:** Low - URLs are constructed from known-valid base URLs and IDs. The `json.Marshal` for simple structs is also extremely unlikely to fail. However, the pattern is inconsistent with error handling elsewhere.\n\n**Recommended approach:** Either handle these errors consistently, or add brief comments explaining why they are safe to ignore (e.g., `// URL constructed from validated inputs, cannot fail`).","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-17T11:20:25.5149664Z","updated_at":"2025-12-17T11:23:51.3369381Z","dependencies":[{"issue_id":"mmm-46","depends_on_id":"mmm-42","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-47","title":"Config package ignores marshal and exists errors","description":"The config package ignores several errors that, while unlikely to fail, represent inconsistent error handling patterns.\n\n**Affected locations:**\n\n1. `internal/config/config.go:20` - Exists check\n```go\nexists, _ := afero.Exists(fs, meta.ConfigPath)\nif !exists {\n    return models.ModsJson{}, \u0026ConfigFileNotFoundException{Path: meta.ConfigPath}\n}\n```\n**Assessment:** Likely safe - if Exists fails, treating as \"not exists\" and returning ConfigFileNotFoundException is reasonable behavior.\n\n2. `internal/config/config.go:42` - Marshal for write\n```go\ndata, _ := json.MarshalIndent(config, \"\", \"  \")\nreturn afero.WriteFile(fs, meta.ConfigPath, data, 0644)\n```\n**Assessment:** Low risk - ModsJson contains only basic types (strings, slices, structs of primitives). Marshal only fails for non-serializable types (channels, functions, cycles). However, if the struct changes to include such types, this would silently produce empty/corrupt output.\n\n3. `internal/config/lock.go:19` - Exists check\n```go\nexists, _ := afero.Exists(fs, lockPath)\n```\n**Assessment:** Same as #1 - likely safe.\n\n4. `internal/config/lock.go:52` - Marshal for write\n```go\ndata, _ := json.MarshalIndent(lock, \"\", \"  \")\nreturn afero.WriteFile(fs, meta.LockPath(), data, 0644)\n```\n**Assessment:** Same as #2 - low risk but could mask future bugs.\n\n**Recommended approach:**\n- For Exists errors: Add comment explaining the fallback behavior is intentional\n- For MarshalIndent errors: Either handle the error, or add a compile-time check that the struct is JSON-serializable (e.g., via a test that marshals an empty struct)","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-17T11:20:29.1787264Z","updated_at":"2025-12-17T11:24:08.1775865Z","dependencies":[{"issue_id":"mmm-47","depends_on_id":"mmm-42","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-48","title":"Define baseline performance metrics and establish SLA/SLOs","description":"Now that perf spans are exported (mmm-perf.json) and uploaded via telemetry (performance span tree), define what baseline performance looks like for common user flows and decide the SLA/SLO targets.\n\nScope:\n- Identify key user journeys to baseline (e.g., add mod, init, list, install/update once implemented).\n- Define the canonical rollup metrics from span data (e.g., end-to-end command duration, stage durations, HTTP request durations, download durations, retry rates).\n- Decide how to aggregate (p50/p95/p99), segment (platform, command, success/failure), and window (e.g., 7d rolling).\n- Establish SLA/SLO targets and alert thresholds based on observed baselines.\n- Document the metrics dictionary and SLOs in docs/ (new doc; do not modify docs/specs).\n\nAcceptance criteria:\n- Baseline report for at least add/init/list (current commands).\n- Proposed SLO table (metric, target, window, notes).\n- Clear guidance on how to compute each metric from the exported/uploaded span schema.\n- Tests not required (docs/analysis only), unless tooling code is added.\n\nNotes:\nFollow-up on mmm-42 perf/telemetry work: we now have span trees and need to turn them into actionable performance baselines and targets.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T11:59:49.266353871Z","updated_at":"2025-12-17T11:59:49.266353871Z","dependencies":[{"issue_id":"mmm-48","depends_on_id":"mmm-42","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-49","title":"Emit telemetry once per session with full perf tree","description":"Current telemetry sends per-command events. Because perf spans are exported only when ended, per-command uploads can miss still-open lifecycle parents and produce a partial forest in PostHog.\n\nChange proposal:\n- Emit telemetry once per process session (at the same point we write mmm-perf.json / shutdown lifecycle), so the uploaded performance tree includes the full hierarchy (lifecycle root + all commands + TUIs).\n- Reduce PostHog ingest volume by replacing per-command capture with one session-level event.\n- Preserve key command summary fields by including a summarized list of commands executed (name, success, duration_ms, key extras) alongside the full performance tree.\n\nAcceptance criteria:\n- A single PostHog event is emitted per process run when telemetry is enabled.\n- The event includes the full perf export tree (same shape as mmm-perf.json) and a concise command summary list.\n- No change to CLI output/exit codes; telemetry remains best-effort.\n- Tests cover: one event emitted, full tree present (has lifecycle root + child command spans), and per-command events no longer emitted.\n\nDependencies:\n- discovered-from:mmm-42","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T12:29:52.471639815Z","updated_at":"2025-12-17T13:54:10.772789565Z","closed_at":"2025-12-17T13:54:10.772789565Z","dependencies":[{"issue_id":"mmm-49","depends_on_id":"mmm-42","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-5","title":"Implement add command for Modrinth/CurseForge mods","description":"Port the `add` command (docs/commands/add.md) so users can add a mod by platform + ID, optionally pinning a version and enabling fallback. This should query the appropriate repository (Modrinth/CurseForge) using the existing clients, download the file into the mods folder, and update both `modlist.json` and `modlist-lock.json` accordingly.","acceptance_criteria":"- `mmm add \u003cplatform\u003e \u003cid\u003e` exists with aliases and options `--version` and `--allow-version-fallback` matching the Node behavior.\n- Command validates platform input, handles project-not-found errors, and prompts/aborts coherently in quiet mode.\n- Downloads selected files via the HTTP downloader, writes them to the mods folder, and records hash/download metadata in the lock file.\n- Updates the config entry for the added mod (including optional per-mod release types/fallback/version pin).\n- Includes unit/integration tests covering Modrinth and CurseForge happy paths plus error cases.\n","notes":"Analysis checkpoint: revert add TUI snapshots to command-level flows (unknown platform, mod-not-found, no-file, quiet) rather than unit models under MMM_TEST; investigate placeholder interpolation (id/platform) and add integration test to prevent regressions; clean env handling (remove CF key print, rely on dotenv defaults) and align HTTP headers/base URLs with Node; simplify resolveRemoteMod/deps to be mandatory; audit add tests against Node cases (download failure messaging, duplicate debug logging, quiet no-file handling).\n\nRefactor plan (add TUI):\n- Replace the current multi-program prompt TUI (cmd/mmm/add/tui.go + teaPrompter) with a single Bubble Tea app for the add command implemented as a finite state machine (FSM).\n- Each prompt/error path becomes an explicit FSM state (fetching, unknown-platform pick, mod-not-found confirm/pick/enter-id, no-file confirm/enter-id, done, aborted, fatal-error), and transitions are handled inside one model.\n- Esc always navigates up one step in the FSM; Ctrl+C aborts the whole flow.\n- Do not invent a download/progress state; only include it if the UX already has one. Regardless, snapshot every FSM state.\n\nSnapshot tests:\n- Add black-box e2e snapshot tests using github.com/charmbracelet/x/exp/teatest.\n- Tests must set MMM_TEST=true so i18n returns deterministic raw keys+data.\n- Tests drive the program via high-level key sequences (tm.Send/tm.Type) and snapshot output per state (wait for stable screen markers), ensuring UX regressions are caught.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:06:30.213591416Z","updated_at":"2025-12-16T11:37:47.685417919Z","closed_at":"2025-12-16T11:37:47.685417919Z","dependencies":[{"issue_id":"mmm-5","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-5","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-5","depends_on_id":"mmm-3","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-50","title":"Separate non-mmm-49 agent config changes","description":"During the mmm-49 worktree there are unrelated changes:\n- AGENTS.md: adds code-review persona instructions.\n- .claude/settings.local.json: adds additional allowed commands (make coverage-enforce, make build).\n\nThese are probably useful, but they should be reviewed/landed separately from mmm-49 to keep the telemetry change scoped and auditable. Either revert them from the mmm-49 changeset or move them into their own issue/PR.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-17T13:39:28.468263822Z","updated_at":"2025-12-17T13:43:46.676624865Z","closed_at":"2025-12-17T13:43:46.676624865Z","dependencies":[{"issue_id":"mmm-50","depends_on_id":"mmm-49","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-51","title":"Docs: fix missing docs/commands/README.md reference","description":"Multiple references assume a command-doc index at docs/commands/README.md, but it does not exist (command docs currently live under docs/commands/*.md). Also, some Beads tickets (e.g., mmm-6, mmm-8) reference docs/commands/install.md / docs/commands/test.md, but those pages have not been created yet (only add/init/list exist). Decide whether to (a) add missing docs/commands/*.md pages and an index README, or (b) update references to docs/specs/*.md and keep guidance consistent.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-17T13:59:37.859587875Z","updated_at":"2025-12-17T14:03:10.810775517Z","closed_at":"2025-12-17T14:03:10.810775517Z","dependencies":[{"issue_id":"mmm-51","depends_on_id":"mmm-1","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-52","title":"Unify command output handling (Bubble Tea as output driver)","description":"Today, commands mix patterns: some render strings directly (non-interactive) and only use Bubble Tea when TTY+interactive; others use Bubble Tea state machines only for recovery flows. For parity work (starting with mmm-6 install), we want a consistent approach where the command's Bubble Tea model is the single source of truth for output, and we decide separately whether to enable the renderer (TTY) vs run headless (no renderer) but still use the same model/view.\n\nScope:\n- Define a shared pattern/API for running a command model in both interactive and non-interactive contexts.\n- Ensure it works with pipes/CI (renderer disabled) and preserves current UX/output.\n- Update at least one command to use the shared helper as a reference implementation.\n\nAcceptance:\n- Document the standard in code (likely under internal/tui) and in a short README section.\n- Add tests covering TTY vs non-TTY behavior (including tea.WithoutRenderer usage).\n- Keep output stable for existing commands (snapshot/strings as appropriate).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T14:17:55.920301058Z","updated_at":"2025-12-17T14:17:55.920301058Z","dependencies":[{"issue_id":"mmm-52","depends_on_id":"mmm-6","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-53","title":"Define quiet vs non-interactive behavior (TTY vs --quiet)","description":"We currently conflate a few concerns across commands: (1) whether we are allowed to prompt (interactive), (2) whether stdout/stderr are terminals (TTY vs pipes/CI), and (3) whether the user requested suppression via --quiet. Some commands treat non-TTY as a reason to avoid Bubble Tea or prompts, but still print output; --quiet also suppresses prompts and can suppress normal logs depending on logger usage.\n\nGoal: define and standardize the contract across all commands for:\n- When prompts/TUI are allowed (TTY detection) vs forbidden (non-interactive contexts)\n- What --quiet means (no prompts? reduced output? error-only?)\n- How non-interactive (no TTY) differs from --quiet (user intent)\n- Where output goes (stdout vs stderr) in each mode\n\nAcceptance:\n- Write a short decision doc in the repo (likely internal/tui or cmd/mmm root README) describing the rules.\n- Add a small shared helper API (or update internal/tui.ShouldUseTUI) so commands can make consistent decisions.\n- Update at least one command to follow the standard (and add tests that lock behavior for TTY/non-TTY/quiet combinations).\n- Ensure changes do not break existing automated flows; run make gates.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T17:10:39.916413341Z","updated_at":"2025-12-17T17:10:39.916413341Z","dependencies":[{"issue_id":"mmm-53","depends_on_id":"mmm-52","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-54","title":"Telemetry: derive command name from app.command.* span (avoid alias like i)","description":"Bug: session-level telemetry currently derives the command name from the CLI argv (subcommand token), so aliases produce different PostHog event names (e.g., install vs i). This breaks aggregation and violates the intended contract.\n\nExpected behavior (original brief): for non-interactive commands, determine the canonical command name by inspecting perf spans and using the top-most span named app.command.\u003cname\u003e. Use that \u003cname\u003e as the command name/event taxonomy regardless of argv alias.\n\nAcceptance:\n- When running via an alias (e.g., mmm i), telemetry records/exports command name as install.\n- Implementation uses perf span inspection (top-most app.command.*) rather than argv token.\n- Add tests covering at least: canonical command, alias invocation, and interactive sessions unchanged.\n- Run make gates (test, coverage-enforce, build).","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-17T17:15:13.677133985Z","updated_at":"2025-12-17T17:25:48.318271806Z","closed_at":"2025-12-17T17:25:48.318271806Z"}
{"id":"mmm-55","title":"Revisit .mmmignore and *.disabled handling","description":"We need to revisit and clearly define the semantics of `.mmmignore` and how files ending in `*.disabled` are treated across commands.\n\nContext:\n- README describes `.mmmignore` as gitignore-like glob patterns, rooted at the directory containing `modlist.json`, and notes the rooting may change.\n- Current Go implementation has install-specific ignore parsing (`cmd/mmm/install/install.go`) and implicitly ignores `**/*.disabled`.\n- Upcoming `scan`/`prune` work (mmm-11 / mmm-10) also requires ignore behavior; we should avoid duplicating logic and avoid subtle inconsistencies between commands.\n\nQuestions to resolve:\n- What is the exact root for patterns (config dir vs mods dir), and should patterns be interpreted as path globs only (current) or support gitignore features (comments with `#`, negation `!`, leading `/`, etc.)?\n- How should `*.disabled` behave?\n  - Is the match case-sensitive?\n  - Should `foo.jar.disabled` be treated as a mod file that is ignored everywhere (install/scan/prune/update), and should it be protected from prune deletions?\n  - Should `.disabled` handling be implicit (always ignored) or configurable/overridable via `.mmmignore`?\n\nProposed work:\n- Compare Node behavior and existing specs/docs.\n- Decide/record the intended behavior (and update user-facing docs accordingly).\n- Implement a shared ignore/matcher helper and use it in commands that scan the filesystem.\n- Add focused unit tests for the ignore/matcher behavior, including `.disabled` edge cases.","acceptance_criteria":"- `.mmmignore` semantics are defined (rooting + supported syntax) and documented in `README.md`.\n- `*.disabled` semantics are defined (scope + case-sensitivity + interaction with prune/delete) and documented.\n- Shared ignore helper exists and is used by filesystem-scanning code paths (starting with install, then scan/prune).\n- Tests cover: basic glob matches, whitespace handling, comment/blank lines (if supported), and `.disabled` edge cases (including case variations and `*.jar.disabled`).","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T18:59:53.889605472Z","updated_at":"2025-12-17T18:59:53.889605472Z","dependencies":[{"issue_id":"mmm-55","depends_on_id":"mmm-10","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-55","depends_on_id":"mmm-11","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-56","title":"Make config/lock writes crash-safe (atomic)","description":"Today internal/config.WriteConfig and internal/config.WriteLock write directly to the target path. If the process crashes or the disk fills mid-write, modlist.json/modlist-lock.json can be left partially written/corrupted. This affects all commands that persist config/lock, and also weakens the 'atomic' expectations called out in mmm-7.\n\nProposed: write to a temp file in the same directory and then replace via rename (with Windows-safe semantics), ensuring we never leave a partially-written config/lock behind.","acceptance_criteria":"- WriteConfig/WriteLock (or shared helper) writes via temp file + atomic replace in the same directory.\n- Behavior works on Windows/macOS/Linux.\n- Unit tests cover success + simulated failure paths (e.g., rename failure, pre-existing dest).","notes":"Implemented crash-safe (atomic-ish) writes for config and lock:\n- internal/config now writes via temp sibling + replace strategy.\n- When the target exists, writeFileAtomic attempts Rename(temp -\u003e target) first (reduces 'target missing' crash window on POSIX), and falls back to a Windows-safe backup-swap strategy if overwrite-rename fails.\n- Target file is never left partially written if the process crashes mid-write.\n\nTests:\n- internal/config/atomic_write_test.go covers success and failure modes, including forced overwrite-rename failure to exercise backup-swap and rollback paths.\n\nVerification:\n- make fmt\n- make test\n- make coverage-enforce\n- make build","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-17T20:06:20.04951954Z","updated_at":"2025-12-18T02:15:09.428463058Z","closed_at":"2025-12-18T02:15:09.428463058Z","dependencies":[{"issue_id":"mmm-56","depends_on_id":"mmm-7","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-57","title":"Define CLI error reporting strategy (Cobra vs global handler)","description":"We currently have a mixed error-reporting model: commands print detailed per-item failures (via logger/Print*), then return an error which Cobra prints as \"Error: ...\". We removed an extra main.go log.Printf that caused a redundant timestamped line, but we still need an explicit project-wide policy.","design":"Dilemma: choose between (A) centralized/global error handling vs (B) per-command responsibility.\n\nOptions to evaluate:\n1) Cobra owns fatal error printing (default): commands return error; Cobra prints a single \"Error: ...\" line; commands print any detailed context themselves.\n2) Global handler owns fatal printing: set SilenceErrors=true and centralize formatting (logger/i18n/quiet/debug) + exit-code mapping.\n3) Hybrid: commands print detailed failures and return a sentinel/typed error; global handler prints a single summary line only if the command did not already print it.\n\nQuestions to decide:\n- Quiet-mode behavior: should --quiet suppress fatal output or keep a minimal fatal line?\n- Exit codes: do we want typed/stable exit codes for automation or stick with 1?\n- Localization: should fatal errors be i18n-driven (pushes toward centralized handling)?","acceptance_criteria":"- Team agrees on one error-reporting policy and documents it.\n- Clarify how --quiet affects fatal output.\n- Clarify whether we want stable exit codes.\n- (If implemented) Remove duplicate/competing error output and add tests for the chosen policy.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-17T21:18:01.518465016Z","updated_at":"2025-12-17T21:18:20.609097837Z","dependencies":[{"issue_id":"mmm-57","depends_on_id":"mmm-7","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-58","title":"Bake Modrinth/CurseForge/PostHog tokens into binaries at build time","description":"We need the Windows/macOS/Linux executables to embed the Modrinth, CurseForge, and PostHog tokens at build time, instead of requiring users to provide them via environment variables at runtime. This should align with the existing build/version/HELP_URL injection approach and work with `make build` outputs.","design":"Approach options:\n- Use Go `-ldflags -X` to set token variables in `internal/environment` at build time.\n- Or keep the existing \"REPL_*\" placeholder replacement approach but ensure the release/build pipeline replaces the three tokens for all targets.\n\nConsiderations:\n- Avoid printing tokens in logs/help.\n- Ensure `make build` produces usable artifacts without additional env setup.\n- Decide whether runtime env vars should override embedded values (and document the precedence).","acceptance_criteria":"- Build pipeline injects Modrinth/CurseForge/PostHog tokens into produced executables for all targets (darwin/linux/windows).\n- No runtime env vars required for normal operation of API calls/telemetry.\n- Precedence rules are documented (embedded vs env override).\n- Tests cover the injection mechanism (without committing real secrets).","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-17T21:25:18.146870309Z","updated_at":"2025-12-18T12:31:32.486450575Z","closed_at":"2025-12-18T12:31:32.486450575Z","dependencies":[{"issue_id":"mmm-58","depends_on_id":"mmm-23","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-59","title":"Telemetry: remove CaptureCommand alias","description":"internal/telemetry currently exposes both RecordCommand (canonical) and CaptureCommand (compat alias that now just calls RecordCommand). No production call sites use CaptureCommand anymore (only a unit test). Remove CaptureCommand and update tests/docs so there is a single, unambiguous API for command telemetry recording.","notes":"Removed internal/telemetry.CaptureCommand alias and deleted the obsolete alias unit test. Verification: make fmt, make test, make coverage-enforce (100%), make build.","status":"closed","priority":3,"issue_type":"chore","created_at":"2025-12-17T22:24:39.552016967Z","updated_at":"2025-12-17T22:39:00.274131038Z","closed_at":"2025-12-17T22:39:00.274131038Z","dependencies":[{"issue_id":"mmm-59","depends_on_id":"mmm-32","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-6","title":"Implement install command to reconcile lockfile","description":"Port the Node install behavior (see docs/specs/install.md and /tmp/mmm/src/actions/install.ts): read config + lock, scan the mods directory for unmanaged files, (re)download missing or hash-mismatched mods, and persist updated modlist-lock.json plus any updated mod names in modlist.json. Respect .mmmignore patterns and ignore files ending in .disabled during directory scans.","acceptance_criteria":"- mmm install exists (alias: i), honoring global flags: --config, --quiet, --debug.\n- Directory scans respect .mmmignore and ignore *.disabled.\n- Preflight scan matches Node parity: unmanaged matches are reported but do not stop the run; only \"unsure\" matches halt the command with an actionable error suggesting mmm scan.\n- For each configured mod, validate the on-disk SHA-1 hash against the lock entry; if missing or mismatched, download the expected file.\n- When no lock entry exists for a configured mod, resolve a compatible file via internal/platform.FetchMod, download it, and append/update the lock entry.\n- Missing mod / no compatible remote file is handled like Node: log a clear message and continue.\n- Output is logger-driven (no Bubble Tea app for now); use color styling when stdout is a TTY (similar to list), while keeping Node-style messaging (✅/❌, wording).\n- Tests cover: unmanaged/unsure preflight handling, missing-file download, hash-mismatch re-download, lock/config persistence.","notes":"Alignment notes (2025-12-17):\n- We initially considered using Bubble Tea for all output (even non-interactive), but deferred unification to mmm-52.\n- For mmm-6 specifically, keep the existing pattern: logger-only output; no prompts; colorize when stdout is a TTY.\n- Node parity decision: only halt on scan \"unsure\" matches; unmanaged findings are printed and the install proceeds.\n\nImplementation notes (2025-12-17):\n- Added cmd/mmm/install and registered it in cmd/mmm/root.go.\n- Preflight scan uses Modrinth SHA-1 lookup + CurseForge fingerprint lookup (via github.com/meza/curseforge-fingerprint-go) to detect unmanaged vs unsure.\n- Files with no lookup hits are intentionally silent for Node parity.\n- Fixed potential CurseForge fingerprint collisions by mapping fingerprint -\u003e multiple files.\n- Output convention (documented by tests): warning/error-like messages that do not fail the command are printed to stdout; fatal guidance is printed to stderr.\n- Added internal/modrinth.NewVersionHashLookup helper to construct hash lookups outside the package.\n- Added install-related i18n strings; de-DE/fr-CA install strings are now translated.\n\nVerification:\n- go fmt ./...\n- make test\n- make coverage-enforce\n- make build","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:06:45.125360255Z","updated_at":"2025-12-17T17:12:15.686219429Z","closed_at":"2025-12-17T17:12:15.686219429Z","dependencies":[{"issue_id":"mmm-6","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-6","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-6","depends_on_id":"mmm-5","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-60","title":"Handle platform connection errors gracefully","description":"Improve UX and behavior when Modrinth/CurseForge are unreachable (timeouts, DNS failures, connection resets, proxy issues). Today these show up as generic platform errors and can lead to confusing output and inconsistent fallback behavior between platforms/commands.\\n\\nScope ideas (confirm during implementation):\\n- Add a small error-classification helper for transient network errors (net.Error timeout, temporary, context deadline) and common HTTP connectivity failures.\\n- Ensure commands that do lookups surface a concise, actionable message (what happened, what to try next, point to --debug).\\n- Ensure transient connection errors do not result in unsafe fallback matches/persistence (scan should keep results as unsure rather than silently matching on the other platform).\\n\\nOut of scope: changing core command specs without explicit approval.","acceptance_criteria":"- Connection-related errors to Modrinth/CurseForge are classified as transient and rendered with a user-actionable message.\\n- scan does not fallback to the other platform when the preferred platform fails due to a connection error; affected files are reported as unsure.\\n- Tests cover at least: timeout error classification, scan preferred-platform connection error handling, and message formatting in quiet vs non-quiet mode.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-18T01:03:24.071643504Z","updated_at":"2025-12-18T01:03:24.071643504Z","dependencies":[{"issue_id":"mmm-60","depends_on_id":"mmm-11","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-61","title":"CurseForge fingerprints: handle unmatchedFingerprints map shape","description":"CurseForge fingerprints match responses already include object-shaped fingerprint fields (exactFingerprints, partialMatchFingerprints, installedFingerprints). If unmatchedFingerprints is ever returned as an object/map (instead of []int or null), internal/curseforge.GetFingerprintsMatches currently returns an error, which causes scan to classify all files as unsure.\\n\\nMake unmatchedFingerprints decoding tolerant (accept null, []int, and map[string]bool or map[string]any; parse keys to ints when possible).","acceptance_criteria":"- GetFingerprintsMatches accepts unmatchedFingerprints as null, []int, or object map without failing the entire response.\\n- Unit tests cover each supported unmatchedFingerprints shape.\\n- scan continues to surface sure/unknown results when only unmatchedFingerprints is oddly shaped.","notes":"$Implemented tolerant decoding for CurseForge fingerprint match responses:\n- internal/curseforge.GetFingerprintsMatches now accepts unmatchedFingerprints as null, []int, or map (map[string]bool / map[string]any), parsing numeric keys.\n- Map keys that are not numeric are ignored instead of failing the entire response.\n- Added unit tests for list/null/map/unsupported types, and a full GetFingerprintsMatches regression test for map-shaped unmatchedFingerprints.\n\nVerification:\n- make fmt\n- make test\n- make coverage-enforce\n- make build","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-18T01:56:29.489184004Z","updated_at":"2025-12-18T02:05:44.988732877Z","dependencies":[{"issue_id":"mmm-61","depends_on_id":"mmm-11","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-62","title":"Set up GitHub Actions release workflow for Go builds","description":"Set up GitHub Actions so this repo can publish releases (and prereleases) with the same end-user deliverables as the legacy Node pipeline, but built from the Go implementation.\n\nDeliverables (must match the existing semantic-release GitHub asset config):\n- dist/*-windows.zip (contains mmm.exe)\n- dist/*-macos.zip (contains mmm)\n- dist/*-linux.zip (contains mmm)\n\nContext:\n- .github/workflows/ci.yml currently runs make build + make coverage-enforce; semantic-release is commented out.\n- .releaserc.json is already configured to upload dist/*-windows.zip, dist/*-macos.zip, dist/*-linux.zip.\n- The Go build now produces cross-compiled executables via make build and zips via scripts/binaries.sh.\n- Token embedding for release artifacts should come from GitHub Actions secrets (env vars) and must not leak in logs.","design":"Proposed implementation:\n- Split workflows into:\n  - CI workflow (PR + push): make fmt, make test, make coverage-enforce.\n  - Release workflow (push only, semantic-release branches): run semantic-release.\n- Ensure semantic-release dependencies exist in this repo (either add a package.json with devDependencies for semantic-release + configured plugins, or use npx -p to install them in the workflow).\n- Update .releaserc.json prepareCmd (or scripts/prepare.sh) so it no longer references Node-only paths (e.g. ./src/version.ts), and instead:\n  - inject version/help URL placeholders needed by Go\n  - run make build (with required secrets present as env vars)\n  - ensure dist/ exists and run scripts/binaries.sh\n- Secrets required in GH Actions:\n  - GH_TOKEN (for semantic-release/github)\n  - MODRINTH_API_KEY, CURSEFORGE_API_KEY, POSTHOG_API_KEY (for embedding)\n  - HELP_URL (if still injected via prepare step)\n- Keep logs secret-safe (no echoing secret env vars; keep make recipes quiet).","acceptance_criteria":"- CI workflow runs on PRs and pushes: make fmt, make test, make coverage-enforce.\n- Release workflow runs on pushes to semantic-release branches and successfully runs semantic-release end-to-end.\n- A successful release publishes a GitHub Release with exactly 3 assets matching .releaserc.json paths:\n  - dist/*-windows.zip, dist/*-macos.zip, dist/*-linux.zip\n- Each zip contains the correct executable name (mmm.exe on Windows; mmm on Linux/Mac).\n- Release build consumes secrets via GitHub Actions env/secrets and does not print them in logs.\n- The workflow uses existing Make targets (no direct go build/go test calls).","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-18T12:35:06.214156822Z","updated_at":"2025-12-18T12:35:58.258292073Z","dependencies":[{"issue_id":"mmm-62","depends_on_id":"mmm-1","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-62","depends_on_id":"mmm-58","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63","title":"Audit: Independent report (2025-12-19)","description":"# Audit report (source: audit.md)\n\n# Minecraft Mod Manager (Go) - Audit Report\n\nDate: 2025-12-19\n\n## Scope\n\nRepository-wide audit of:\n\n- Go codebase architecture, correctness, style, hygiene\n- Tests and coverage gates\n- CI/CD and release automation\n- Dependencies and vulnerability posture\n- Documentation accuracy vs current behavior\n- Security posture (secrets, networking, file I/O, telemetry/privacy)\n\n## Clarifications From Maintainer (applied)\n\n- Help/version replacement strings are injected during semantic-release; local dev builds may keep placeholders (not an issue).\n- Local builds requiring secrets (tokens) is acceptable because the app requires those tokens to function.\n- API keys are intended to be embedded in distributed binaries.\n- Runtime `.env` support is required so users can provide their own Modrinth/CurseForge keys (for example, private projects).\n- Telemetry is intended to be opt-out.\n- Go port is not complete; some commands documented in legacy docs may not exist yet.\n- `CURSEFORGE_API_URL` / `MODRINTH_API_URL` must not be configurable via env vars in production; if tests need overrides, they must be injected via build/test harness (not runtime env).\n- Runtime `.env` should be loaded from the current working directory (global config location will be added later).\n- Current behavior for `mmm` with no args is \"print help\" (no-args TUI is not implemented yet).\n- Missing no-args TUI is a known gap while pushing for Node parity; once parity is complete, the plan is to add a fully interactive no-args TUI flow.\n- Retry should be enabled even for APIs that use POST incorrectly; treat requests as safe to retry, but implement retries safely for requests with bodies.\n- Telemetry may include request URLs, but must not include API keys from headers (or other secret header values).\n- Perf artifacts (`mmm-perf.json`) are not considered sensitive by the team.\n\nThese clarifications reduce some \"mismatch\" items from blockers to documentation or governance issues, but they do not eliminate underlying security and correctness risks described below.\n\n## Verification Artifacts (executed locally)\n\n- `make test` (pass)\n- `make coverage-enforce` (pass)\n- `make build` (pass)\n- `go vet ./...` (pass)\n- `go mod verify` (pass)\n- `go test -race ./...` (fails; data races detected in tests and test-only harness code)\n- `staticcheck ./...` (findings; see Tooling)\n- `govulncheck -scan=module` and `govulncheck -scan=package ./...` (findings; see Security)\n- `govulncheck -scan=symbol ./...` fails with an internal type-checking error (toolchain/library incompatibility; see Security)\n- `go-licenses report ./...` (license inventory; see Licensing finding)\n\nNotes on reproducing these runs:\n\n- `staticcheck` and `govulncheck` are not shipped as part of this repo; I installed them via `go install` into `/tmp/bin` using `GOTOOLCHAIN=go1.25.0` so they can analyze a `go 1.25` module.\n\n## Executive Verdict\n\nNot release-ready. There are multiple blocker/critical risks across release automation consistency, documentation accuracy, credential exfiltration risk, network robustness (unbounded hangs), and download integrity.\n\n## Findings (prioritized)\n\n\n## Tracking\n\nThis epic tracks every severity-labeled finding in audit.md as a child issue.\nEach child issue duplicates the full finding text (Evidence/Impact/Remediation/Confidence) and provides acceptance criteria.\naudit.md is annotated with the corresponding ticket IDs next to each finding title.\n\n### Finding tickets\n\n- mmm-63.1: Blocker - Data races detected under `go test -race`\n- mmm-63.2: Blocker - Release automation is internally inconsistent / likely non-functional\n- mmm-63.3: Blocker - Documentation is materially out of sync with current Go behavior\n- mmm-63.4: Medium - ADR corpus is Node-era and references are inconsistent (governance drift)\n- mmm-63.5: Medium - Markdown \"no non-ASCII formatting\" rule is violated broadly\n- mmm-63.6: Critical - Credential exfiltration risk via runtime `.env` autoload + API base URL overrides\n- mmm-63.7: Critical - `make build` executes `.env` as shell code on Unix hosts (build-time code execution risk)\n- mmm-63.8: Critical - Downloader can overwrite arbitrary files via symlinks; partial writes are not cleaned up\n- mmm-63.9: Critical - Unsafe filename handling enables path traversal / arbitrary file overwrite or delete\n- mmm-63.10: High - `modsFolder` is treated as trusted and can point anywhere on disk (untrusted config risk)\n- mmm-63.11: High - Atomic writes are not symlink-safe (TOCTOU overwrite risk in untrusted directories)\n- mmm-63.12: Critical - Network calls can hang indefinitely (no timeouts, no deadlines)\n- mmm-63.13: Critical - Download integrity is not enforced; non-200 responses can be written as jars\n- mmm-63.14: High - Download URLs are not validated (can allow insecure HTTP or unexpected schemes)\n- mmm-63.15: Medium - Downloader progress bookkeeping can overflow on 32-bit platforms\n- mmm-63.16: High - HTTP retry implementation is unsafe for requests with bodies (retries can send empty bodies)\n- mmm-63.17: High - RLHTTPClient can panic if constructed with a nil rate limiter\n- mmm-63.18: High - RLHTTPClient retry loop ignores context cancellation and can hang shutdown\n- mmm-63.19: High - i18n global initialization is not concurrency-safe and can race/panic\n- mmm-63.20: High - Minecraft manifest cache is global, has no TTL, and is not concurrency-safe\n- mmm-63.21: Medium - internal/packager is an empty module (dead code / misleading structure)\n- mmm-63.22: High - HTTP retry/rate-limiting behavior is weak and does not match documented intent\n- mmm-63.23: High - JSON decode errors are ignored in multiple network response paths\n- mmm-63.24: High - Modrinth file selection ignores the \"primary\" file and can download the wrong artifact\n- mmm-63.25: Medium - CurseForge platform selection bypasses the low-level client helpers and loses typed error behavior\n- mmm-63.26: High - i18n can panic at runtime (availability and UX risk)\n- mmm-63.27: Medium - Locale detection is broken for common `LANG` formats (translations will not activate)\n- mmm-63.28: High - Modrinth API client ignores JSON decode errors (treats malformed API replies as success)\n- mmm-63.29: Medium - Config/lock existence checks ignore filesystem errors (misclassifies errors as \"missing\")\n- mmm-63.30: High - HTTP request construction errors are ignored (nil request panic risk)\n- mmm-63.31: High - Toolchain vulnerability posture is currently failing\n- mmm-63.32: High - govulncheck evidence (current toolchain)\n- mmm-63.33: Medium - No third-party license attribution / SBOM artifact for distributed binaries\n- mmm-63.34: Critical - Telemetry shutdown is not time-bounded in the production code path (hang risk)\n- mmm-63.35: High - Telemetry \"anonymized\" claim is not accurate as implemented\n- mmm-63.36: High - Telemetry payloads can leak local filesystem paths and potentially sensitive user inputs\n- mmm-63.37: Low - `mmm-perf.json` uses permissive permissions (team considers perf artifacts non-sensitive)\n- mmm-63.38: High - TUI key bindings are partially broken under non-English locales\n- mmm-63.39: High - CI supply chain risk due to unpinned GitHub Actions\n- mmm-63.40: Medium - Automated \"approve Renovate PRs without review\" guidance conflicts with supply chain safety\n- mmm-63.41: High - CI does not enforce basic quality/security gates it claims or implies\n- mmm-63.42: Medium - CI workflow conflates CI and release concerns and uses excessive permissions/secrets\n- mmm-63.43: Medium - Repo hygiene: local tooling config is committed\n- mmm-63.44: Low - Repo hygiene: `.editorconfig` is tracked as executable (mode bit drift)\n- mmm-63.45: Low - Lefthook configuration bypasses Makefile targets (workflow drift risk)\n- mmm-63.46: Low - Repo documentation violates the \"ASCII-only punctuation\" rule (non-ASCII dashes)\n- mmm-63.47: Low - `.gitattributes` line ending rules likely do not apply to `.cmd` and `.bat` files\n- mmm-63.48: Medium - Release scripts are not robust/portable and can silently produce wrong outputs\n- mmm-63.49: High - GitHub Actions workflow likely depends on undocumented behavior (no explicit checkout)\n- mmm-63.50: Medium - Stale bot configuration is present but there is no evidence it is active\n- mmm-63.51: Medium - Security vulnerability reporting flow encourages public disclosure\n- mmm-63.52: Low - Issue templates are missing key debugging fields and do not steer security reports\n- mmm-63.53: Low - CODEOWNERS is missing (review ownership and escalation unclear)\n- mmm-63.54: Low - Missing PR template and support policy file (triage and contributor UX)\n- mmm-63.55: Medium - `FUNDING.yml` location may not be recognized by GitHub\n- mmm-63.56: Medium - `CONTRIBUTING.md` does not reflect the actual Go workflow and is not enforceable as written\n- mmm-63.57: Low - `CLAUDE.md` contains conflicting agent instructions (repo hygiene)\n- mmm-63.58: High - Documentation and tests depend on env-driven API base URLs (must be refactored)\n- mmm-63.59: Medium - Coverage enforcement does not cover command packages\n- mmm-63.60: Medium - Command packages are overlarge and mix concerns (maintainability and correctness risk)\n- mmm-63.61: Medium - `--quiet` flag description does not match behavior\n- mmm-63.62: Medium - Help formatting assumes stdout is a TTY; non-TTY output can be malformed\n- mmm-63.63: Medium - .mmmignore semantics break when the mods folder is outside the config directory; path matching is not Windows-robust\n- mmm-63.64: Medium - `init --mods-folder` help/prompt text is incorrect and leaks machine-specific paths\n- mmm-63.65: Low - Branding/grammar issues in i18n strings reduce perceived quality and trust\n- mmm-63.66: Medium - User-facing strings bypass i18n and include emoji\n- mmm-63.67: Medium - CLI output uses emoji and non-ASCII glyphs even in non-TTY (automation UX risk)\n- mmm-63.68: Medium - Ignored errors and unsafe assumptions in core I/O paths\n- mmm-63.69: Low - Error wrapping strategy is inconsistent (`github.com/pkg/errors` vs standard library)\n- mmm-63.70: Low - Naming and API hygiene issues (nitpicks with real costs)\n- mmm-63.71: Low - Duplicate helper logic across commands increases drift risk\n- mmm-63.72: Low - Platform API clients set auth headers with `Header.Add` (prefer `Header.Set`) and inconsistent header key casing\n- mmm-63.73: Low - Test assertions contain copy/paste mistakes in failure messages (hygiene signal)\n- mmm-63.74: Medium - `SECURITY.md` claims are not backed by repository evidence\n\n## Non-finding sections from audit.md\n\n## Tooling Findings\n\n### staticcheck\n\n`staticcheck ./...` reports issues including:\n\n- Dead assignments / unused values:\n  - `cmd/mmm/add/add.go:328` (SA4006)\n- Redundant formatting:\n  - `cmd/mmm/init/init.go:426` and `cmd/mmm/init/init.go:440` (S1025)\n  - `cmd/mmm/init/loader.go:81` (S1025)\n- Unused functions/types in production and tests:\n  - `cmd/mmm/init/releaseTypes.go:133` (U1000)\n  - `cmd/mmm/scan/scan_test.go:27` and `cmd/mmm/scan/scan_test.go:32` (U1000)\n  - `cmd/mmm/version/version_test.go:10` and `cmd/mmm/version/version_test.go:14` (U1000)\n  - `internal/tui/terminal_test.go:11` and `internal/tui/terminal_test.go:13` (U1000)\n- Deprecated APIs:\n  - `cmd/mmm/install/install.go:575`, `cmd/mmm/list/list.go:239`, `cmd/mmm/scan/scan.go:762` use deprecated `lipgloss.Style.Copy` (SA1019)\n  - `internal/perf/perf.go:37` and `internal/perf/perf.go:72` use deprecated OTel noop tracer provider APIs (SA1019)\n- Error naming:\n  - `internal/minecraft/minecraftErrors.go:5` and `internal/minecraft/minecraftErrors.go:6` (ST1012)\n- Nil contexts in tests:\n  - `internal/perf/durations_test.go:23` and multiple `internal/perf/perf_test.go` and `internal/telemetry/telemetry_test.go` call sites (SA1012)\n\nJudgment:\n\n- These are mostly hygiene, but the volume indicates linting is not enforced in CI. Add a lint gate or accept accumulating debt explicitly.\n\n### gofmt / go vet\n\n- `go vet ./...` passes.\n- `gofmt -l` reports no formatting drift.\n\n## Recommended Go tooling to automate audit concerns\n\nThis section lists Go-centric tools that can be used to continuously enforce the expectations implied by this audit (security, correctness, hygiene, and release integrity). It is intentionally practical: each item includes what it catches and how it should be automated.\n\n### Baseline quality gates (should run on every PR)\n\n- Formatting:\n  - `gofmt` (canonical formatting; already effectively covered).\n  - Optional: `goimports` (import grouping and cleanup) if you want stronger standardization than gofmt alone.\n  - Automation pattern: a CI check that fails if formatting changes would be produced (do not auto-commit).\n- Static analysis:\n  - `go vet` (basic correctness checks; already run in this audit, not currently a CI gate).\n  - `staticcheck` (strong general-purpose lints; already run in this audit, not currently a CI gate).\n  - Alternative: `golangci-lint` as a wrapper to run multiple linters consistently; if used, pin the version and keep the enabled linters minimal and intentional to avoid noisy false positives.\n- Tests:\n  - `go test ./...` (already a CI gate).\n  - `go test -race ./...` (should be a CI gate once races are fixed; today it fails and is a blocker).\n  - Coverage enforcement: ensure the policy you claim is what you enforce (current `make coverage-enforce` covers `./internal/...` only).\n\n### Security automation (should run on every PR or at least daily)\n\n- Vulnerability scanning:\n  - `govulncheck` (official Go vuln tool). Given current symbol-scan instability in this repo, run `-scan=module` and `-scan=package` in CI until symbol scan is reliable again.\n  - Also gate on the Go toolchain patch level. Today the effective toolchain is `go1.25.0` and govulncheck reports fixed stdlib vulnerabilities; pin to a patched `go1.25.x` toolchain.\n- Dependency change review (GitHub, not Go-specific but directly relevant):\n  - `actions/dependency-review-action` to block PRs that introduce known-vulnerable dependencies (pairs well with Renovate automerge).\n- Optional static security analysis:\n  - `gosec` can be useful for obvious mistakes, but expect false positives and treat it as advisory unless you tune it.\n\n### Reliability and robustness (targets specific risks in this repo)\n\n- Fuzzing:\n  - Use Go's built-in fuzzing (`go test -fuzz=...`) for parsers and boundary logic (modlist/lock parsing, URL parsing/normalization, filename validation, and any JSON decoding of upstream API responses).\n  - Automate as a time-bounded CI job (nightly) to avoid slowing PRs.\n- HTTP correctness and timeouts:\n  - Prefer tests that assert all outbound HTTP uses timeouts (unit tests can validate constructed `http.Client` timeouts and request context deadlines).\n  - Add a regression test suite that intentionally sends malformed JSON and non-200 statuses to ensure decode/status errors are propagated (this targets the \"ignored decode error\" findings).\n\n### Release artifact integrity (Go ecosystem tooling that fits this repo)\n\n- Packaging, checksums, and provenance:\n  - Consider `goreleaser` to consistently build cross-platform artifacts, generate checksums, and attach release assets in a predictable way (even if you keep semantic-release for versioning).\n  - Consider signing and provenance (for example, cosign/SLSA-style attestations). This is not strictly \"Go tooling\", but it is commonly integrated into Go release pipelines and addresses the current \"zip only, no integrity metadata\" gap.\n\n### Licensing and SBOM (automate compliance and transparency)\n\n- License inventory:\n  - `go-licenses` for a repeatable dependency license report (already executed during this audit).\n  - Automate generation of a `THIRD_PARTY_NOTICES.txt` (or similar) for each release and attach it to the release (or bundle it in `dist/*.zip`).\n- SBOM generation (Go-centric options):\n  - `cyclonedx-gomod` to generate a CycloneDX SBOM directly from `go.mod`/`go.sum`.\n  - Alternative: `syft` can generate SPDX/CycloneDX SBOMs, but it is not Go-specific.\n\n### Tool version pinning (avoid \"works on my machine\" tooling drift)\n\n- Pin tool versions the same way you pin dependencies:\n  - Add a `tools.go` (build-tagged) to track tool dependencies.\n  - Install tools in CI using `go install \u003cmodule\u003e@\u003cversion\u003e` so the toolchain is deterministic.\n- Avoid using floating versions in CI (Go toolchain and Actions). Prefer pinned patch versions and pinned action SHAs.\n\n## Recommended Remediation Plan (order)\n\n1. Remove env-driven API base URL overrides and replace with test/build injection; reconsider runtime `.env` autoload scope (see Critical exfiltration finding).\n2. Fix path traversal risks by validating all filenames from remote/lock/config before any filesystem operation.\n3. Make the suite race-clean and add `go test -race ./...` to CI.\n4. Fix release automation consistency: either enable and align semantic-release for Go, or remove the Node-era config.\n5. Make docs truthful to the current Go binary and remove references to unimplemented commands from user docs.\n6. Add bounded timeouts and robust retry behavior across all HTTP operations.\n7. Harden downloads: validate HTTP status, verify file hashes, prevent symlink overwrites, and make update swaps atomic.\n8. Add CI gates for staticcheck (or golangci-lint) and govulncheck (at least module/package scan until symbol scan is stable).\n9. Add release/CI artifacts for license attribution (THIRD_PARTY_NOTICES) and consider an SBOM for each release.\n10. Update telemetry documentation and minimize sensitive payload fields while keeping opt-out.\n\n## Remediation checklist (acceptance criteria and evidence)\n\nThis section turns the highest-impact findings into a maintainer-executable checklist. Each item includes:\n\n- the required change outcome (what must be true)\n- acceptance criteria (what to run / what must pass)\n- artifacts to attach to prove closure (what evidence is required)\n\nWhere practical, prefer adding `make` targets for these checks and using those targets in CI, so local and CI behavior cannot drift.\n\n### Definition of done: \"release-ready\"\n\nThis project can be considered \"release-ready\" only when all items below are true and backed by verifiable evidence (CI logs, test outputs, and release asset listings). This is intentionally strict because the current findings include security-impacting footguns and release automation inconsistencies.\n\n- [ ] No blockers remain in `## Findings (prioritized)` (race-clean, release pipeline consistent, API base URL exfiltration control, and path safety addressed).\n- [ ] Every item in `## Remediation checklist (acceptance criteria and evidence)` is closed with the required evidence attached (or the maintainers explicitly document a risk acceptance decision and why).\n- [ ] CI on `main` enforces (and is required by branch protection):\n  - `make test`\n  - `make coverage-enforce` (or an updated coverage gate that matches the stated policy)\n  - `make test-race` (or equivalent race gate)\n  - lint gate (`staticcheck` or curated `golangci-lint`)\n  - vulnerability scan gate (`govulncheck` at least module/package)\n- [ ] Release automation is reproducible:\n  - a dry-run release job (no publish) succeeds end-to-end and produces exactly the expected assets\n  - release artifacts include integrity/metadata deliverables (checksums/signatures/provenance as chosen, plus `LICENSE` and third-party notices)\n- [ ] Telemetry invariants are enforced by tests (URLs allowed, secret headers forbidden) and shutdown is time-bounded in the real code path.\n\n### 1) Remove runtime API base URL overrides (credential exfiltration control)\n\n- [ ] Outcome: production code has no runtime configuration for API base URLs (CurseForge/Modrinth base URLs are fixed, not env-driven).\n- [ ] Acceptance criteria:\n  - `rg -n \"MODRINTH_API_URL|CURSEFORGE_API_URL\" .` returns no hits outside tests/tools (define and enforce what \"test-only\" means).\n  - All tests that previously depended on env URL overrides are migrated to an explicit injection seam (constructor param or test-only setter).\n  - `make test` passes.\n- [ ] Evidence to attach:\n  - A short log showing the `rg` search output (no runtime hits).\n  - A note describing the chosen test seam (API base URL injection mechanism) and where it is defined.\n\n### 2) Fix filesystem path safety (path traversal, symlink/reparse-point safety, predictable temp names)\n\n- [ ] Outcome: no untrusted remote metadata (filenames, URLs, IDs) can cause writes/deletes outside the intended mods folder or config directory.\n- [ ] Acceptance criteria:\n  - Add unit tests that prove the sanitizer rejects:\n    - relative traversal (`../x.jar`, `..\\\\x.jar`)\n    - absolute paths (`/etc/passwd`, `C:\\\\Windows\\\\system32\\\\x`)\n    - UNC paths (`\\\\\\\\server\\\\share\\\\x`)\n    - path separators in \"filenames\" from remote sources\n  - Add unit tests that prove write paths are symlink-safe (do not follow a symlink that points outside the directory) on supported platforms, or explicitly document platform limitations and add tests for those constraints.\n  - `make test` passes.\n  - If Windows is a supported target: add tests for Windows rename/replace semantics and reparse-point behavior (at minimum: do not overwrite through symlink-like constructs).\n- [ ] Evidence to attach:\n  - New/updated test names proving traversal rejection and symlink safety.\n  - A short explanation of the chosen safe-write strategy (how you prevent TOCTOU and symlink exploitation).\n\n### 3) Make the suite race-clean and gate it\n\n- [ ] Outcome: `go test -race` is clean and remains clean.\n- [ ] Acceptance criteria:\n  - Add a `make test-race` target that runs `go test -race ./...`.\n  - `make test-race` passes locally.\n  - CI runs `make test-race` and it passes on main.\n- [ ] Evidence to attach:\n  - CI job link or log excerpt showing the race job passed.\n  - A note listing the fixed race sites (by package/file) and what synchronization change was applied.\n\n### 4) Fix release automation consistency and artifact integrity\n\n- [ ] Outcome: release pipeline is deterministic, consistent with the Go repo layout, and does not silently produce wrong artifacts.\n- [ ] Acceptance criteria:\n  - Decide and document the release authority:\n    - either semantic-release is authoritative and configured for the Go repo, or it is removed/disabled for this repo.\n  - If semantic-release remains:\n    - `scripts/prepare.sh` must be robust (strict mode, validated inputs, portable or constrained to a documented runner OS).\n    - Asset selection globs in `.releaserc.json` must not pick up stale/unrelated zips (clean `dist/` before packaging or narrow globs).\n  - Add a CI \"release dry run\" on main (no publishing) that verifies the pipeline can run end-to-end and produce expected artifacts.\n- [ ] Evidence to attach:\n  - The command(s) used for the dry run and their output.\n  - A list of the expected release assets (filenames) and a proof they are the only assets produced.\n\n### 5) Bound all HTTP operations (timeouts and safe retries)\n\n- [ ] Outcome: no HTTP call can hang indefinitely; retries are safe even when upstream uses POST.\n- [ ] Acceptance criteria:\n  - Add explicit timeouts (client and/or per-request context) and prove via tests that a stuck server fails within a bounded window.\n  - Ensure retries:\n    - retry network errors as well as selected status codes (as intended)\n    - do not reuse a consumed request body (use a replayable body strategy)\n  - `make test` passes.\n- [ ] Evidence to attach:\n  - A test that simulates a non-responding handler and asserts bounded failure time.\n  - A test that retries a request with a body without data corruption.\n\n### 6) Stop ignoring decode/status/request-build errors (correctness and observability)\n\n- [ ] Outcome: invalid responses and malformed URLs fail fast with typed, user-relevant errors (no silent empty structs).\n- [ ] Acceptance criteria:\n  - For each API client:\n    - `http.NewRequestWithContext` errors are handled (no discarded error values).\n    - Non-2xx statuses are treated as errors before decode.\n    - JSON decode errors are returned (not ignored).\n  - Add tests for each of the above in Modrinth and CurseForge clients.\n  - `make test` passes.\n- [ ] Evidence to attach:\n  - Links to the specific tests covering \"bad URL\", \"non-200\", and \"bad JSON\" per client.\n\n### 7) Telemetry safety gates (URLs allowed, secret headers forbidden)\n\n- [ ] Outcome: telemetry and perf export can never include API keys or other secret header values, even under error conditions.\n- [ ] Acceptance criteria:\n  - Add a test that sets a known secret value (for example `MODRINTH_API_KEY=test-secret`) and asserts:\n    - recorded telemetry payloads contain request URL fields only as allowed\n    - no payload contains `test-secret` anywhere (string search over JSON payload)\n  - Ensure shutdown is time-bounded even when passed a non-nil context without deadline (fix the current \"timeout only when ctx==nil\" behavior).\n  - `make test` passes.\n- [ ] Evidence to attach:\n  - The redaction/leak-prevention tests and a short description of the redaction strategy.\n\n### 8) Toolchain and CI hardening (make it impossible to regress)\n\n- [ ] Outcome: CI prevents the regressions identified by this audit.\n- [ ] Acceptance criteria:\n  - Add CI jobs (prefer via `make` targets):\n    - formatting check (gofmt/goimports policy)\n    - lint (`staticcheck` or `golangci-lint`)\n    - vulnerability scan (`govulncheck` at least module/package)\n    - dependency review (GitHub) if you allow Renovate automerge\n  - Pin:\n    - GitHub Actions by SHA\n    - Go toolchain to a patched `go1.25.x` (and ensure the version used in CI matches the pinned version)\n  - CI permissions are least-privilege for PRs (avoid broad write permissions on PR runs).\n- [ ] Evidence to attach:\n  - Workflow diffs and a CI run showing all new gates passing.\n  - A note documenting the chosen Go patch version and the rationale (must address the govulncheck-reported stdlib fixes).\n\n### 9) Licensing and SBOM artifacts for releases\n\n- [ ] Outcome: distributed artifacts have transparent licensing and (optionally) SBOM metadata.\n- [ ] Acceptance criteria:\n  - Add a reproducible artifact generation step:\n    - `THIRD_PARTY_NOTICES.txt` (from `go-licenses report`, plus any manual notices required)\n    - optional: SBOM (CycloneDX or SPDX) for each release\n  - Ensure release artifacts include `LICENSE` and third-party notices (either bundled in zips or attached as separate assets with clear naming).\n- [ ] Evidence to attach:\n  - A sample release asset listing showing notices/SBOM present.\n  - The exact command(s) used to generate the notices/SBOM and how they are versioned.\n\n## Appendix - Package-by-package judgement (spotlight)\n\nThis is not a complete re-listing of all findings above; it is a quick \"where the bodies are buried\" index so reviewers can jump straight to the highest-risk packages.\n\n- `main.go`: runtime `.env` autoload (`main.go:12`), perf always enabled (`main.go:115`), telemetry shutdown not time-bounded (`main.go:155` plus `internal/telemetry/telemetry.go:381-400`).\n- `cmd/mmm/root.go`: help/version surface has drift and confusing overlaps (cobra default `completion`, global `-v/--version` plus `version` command), `--quiet` help text overpromises (\"Suppress all output\") vs actual behavior.\n- `cmd/mmm/add/*`: large command surface with duplicated helpers and at least one staticcheck smell (`cmd/mmm/add/add.go:328` assignments unused).\n- `cmd/mmm/init/*`: uses `http.DefaultClient` (`cmd/mmm/init/init.go:66-69`) and has user-visible help text issues (see existing init findings).\n- `cmd/mmm/install/*`: downloads jars to paths derived from untrusted metadata (remote filenames) and emits non-ASCII output even when not a TTY (see existing download/path traversal and output-contract findings).\n- `cmd/mmm/list/*`: violates \"purely informational/no prompts\" spec by running TUI flows (`cmd/mmm/list/list.go:112-133`) and uses non-ASCII glyphs in non-TTY output (`cmd/mmm/list/list.go:224-233`).\n- `cmd/mmm/remove/*`: can remove paths derived from lock metadata (`cmd/mmm/remove/remove.go:151-171`) and prints emoji in standard output (`cmd/mmm/remove/remove.go:171`).\n- `cmd/mmm/scan/*`: prints emoji via `tui.SuccessIcon`/`tui.ErrorIcon` even when `colorize=false` (`cmd/mmm/scan/scan.go:764-804`, `internal/tui/icons.go:3-17`).\n- `cmd/mmm/test/*`: concurrency-heavy; the test suite is not race-clean (`go test -race` fails in this package), and production goroutines call `i18n.T(...)` (see earlier concurrency finding).\n- `cmd/mmm/update/*`: update swap is not atomic and uses predictable temp/backup names (`cmd/mmm/update/update.go:389-456`), compounding the download integrity and symlink/TOCTOU issues.\n\n- `internal/config/*`: atomic write uses predictable sibling names (`internal/config/atomic_write.go:11-57`) and `afero.Exists` errors are ignored (`internal/config/config.go:20-23`, `internal/config/lock.go:18-26`).\n- `internal/httpClient/*`: no timeouts (`internal/httpClient/httpClient.go:124-131`), partial retry semantics and blocking sleep (`internal/httpClient/httpClient.go:51-105`), downloader writes without status checks and is not symlink-safe (`internal/httpClient/downloader.go:50-83`).\n- `internal/modrinth/*`: base URL override via env (must be removed from production) and JSON decode errors ignored (`internal/modrinth/project.go:81-83`, `internal/modrinth/version.go:128-130`, `internal/modrinth/version.go:156-158`).\n- `internal/curseforge/*`: base URL override via env (must be removed from production) and request build errors ignored (`internal/curseforge/project.go:26-31`, `internal/curseforge/files.go:57-63`, `internal/curseforge/files.go:112-119`).\n- `internal/platform/*`: default clients disable rate limiting (`internal/platform/platform.go:35-44`) and inherit the API client weaknesses above.\n- `internal/i18n/*`: global lazy init without synchronization (race risk), panics on setup and arg count, and common `LANG` formats are ignored (`internal/i18n/i18n.go:111-116`, `internal/i18n/i18n.go:156-159`).\n- `internal/telemetry/*`: opt-out telemetry includes full performance span trees and error strings; shutdown timeout is effectively dead in production (`internal/telemetry/telemetry.go:341-404`).\n- `internal/tui/*`: emoji icons are unconditional (`internal/tui/icons.go:3-17`); terminal detection seams exist but are not used to gate ASCII output in commands.\n- `internal/minecraft/*`: caches global manifest pointer, collapses distinct failure modes into sentinel errors, ignores request build errors (`internal/minecraft/minecraft.go:45-49`).\n\n## Appendix - Environment variables inventory (code-derived)\n\nDirect lookups observed in code:\n\n- `MODRINTH_API_KEY` (auth; runtime override for embedded key): `internal/environment/environment.go:13-20`\n- `CURSEFORGE_API_KEY` (auth; runtime override for embedded key): `internal/environment/environment.go:22-29`\n- `POSTHOG_API_KEY` (telemetry; runtime override for embedded key): `internal/environment/environment.go:31-38`\n- `MMM_DISABLE_TELEMETRY` (opt-out): `internal/telemetry/telemetry.go:588`\n- `MACHINE_ID` (distinct id override): `internal/telemetry/telemetry.go:574`\n- `LANG` (locale selection): `internal/i18n/i18n.go:112-116`\n- `MMM_TEST` (test-mode i18n behavior; risky if set at runtime): `internal/i18n/i18n.go:81-85`\n- `MODRINTH_API_URL` (base URL override; must be removed from production): `internal/modrinth/modrinthClient.go:40`\n- `CURSEFORGE_API_URL` (base URL override; must be removed from production): `internal/curseforge/curseforgeClient.go:38`\n\nJudgment:\n\n- Key-related vars (`*_API_KEY`) and telemetry vars are expected and align with your desired runtime `.env` behavior.\n- Base URL vars (`*_API_URL`) are a security footgun (credential exfiltration), and per maintainer decision must be deleted or made test-only via explicit injection.\n\n## Resolved maintainer decisions (applied)\n\n1. Runtime `.env` loading scope: load `.env` from CWD (global config will be added later).\n2. \"No args starts TUI\" contract: current version should print help; no-args TUI is a known gap while pushing for Node parity and will be added after parity is complete.\n3. Retry semantics: retries must remain enabled even for APIs using POST; implement safe request-body replay semantics.\n4. Telemetry may include request URLs, but must not include API keys from headers (or other secret header values).\n5. Perf artifacts (`mmm-perf.json`) are not considered sensitive.\n\n## Audit coverage closure (deep audits completed here)\n\nThis audit performed deep review of all in-repo repository setup surfaces (not only Go code):\n\n- GitHub automation and community health files (in-repo): `.github/workflows/ci.yml`, `.github/renovate.json`, `.github/stale.yml`, `.github/ISSUE_TEMPLATE/*`, `.github/instructions/*`, `SECURITY.md`, `CONTRIBUTING.md`, `CODE_OF_CONDUCT.md`, `FUNDING.yml`, `LICENSE`, `README.md`.\n- Dependency supply chain:\n  - Vulnerability posture via govulncheck (see Security findings).\n  - License inventory via `go-licenses report ./...` (see Licensing finding above).\n  - Renovate preset behavior validated by inspecting the referenced external preset (see CI/supply chain findings).\n- Beads process health: validated via `bd` CLI only (per project policy), not by reading `.beads/` directly.\n- Release automation and artifact integrity (in-repo): `.releaserc.json`, `scripts/*`, `Makefile`, and `dist/` artifact naming/globs.\n\n## Evidence not present in-repo (requires maintainer confirmation)\n\nItems that materially affect real-world security/release readiness but cannot be audited from this checkout because they live in GitHub/org settings or external services:\n\n- Branch protection rules and required checks (required reviews, required status checks, signed commits, force-push rules).\n- Which GitHub Apps are installed/configured (Renovate app settings, stale bot/probot, CodeQL, secret scanning/push protection, dependency review, etc.).\n- Secret governance (where tokens live, rotation policy, who can access them, whether PRs from branches can access secrets).\n- Release provenance/signing (checksums, signatures, attestations, and whether they are verified by consumers).\n- Telemetry/compliance posture from a legal standpoint (GDPR/PII policies, retention, DPA, user-facing consent text).\n\n## Audit limitations (honesty)\n\n- This report is evidence-backed but cannot literally guarantee every single issue in the entire codebase has been enumerated; it reflects best-effort repo-wide review using local execution, static analysis, and targeted manual inspection of high-risk boundaries (networking, filesystem, config, i18n, CI/release).\n\n## Auditor self-check (persona requirement)\n\nThis section is a consistency and reasoning check for the top findings. It does not introduce new requirements; it exists to ensure the report is internally coherent and evidence-backed.\n\n### Top 3 findings: chain of reasoning\n\n1) Runtime API base URL overrides (credential exfiltration footgun)\n\n- Evidence: base URLs can be overridden via env vars: `internal/modrinth/modrinthClient.go:40` and `internal/curseforge/curseforgeClient.go:38`.\n- Risk chain:\n  - runtime `.env` loading from CWD is enabled (maintainer decision)\n  - base URL env override is therefore easy to influence (malicious `.env`, accidental config)\n  - auth headers are attached to requests\n  - result: API keys can be sent to attacker-controlled endpoints\n- Why it is prioritized: it is a direct secret exfiltration path that does not depend on upstream compromise.\n- Confidence: High (direct code evidence, clear attack path).\n\n2) Filesystem path safety (path traversal and write/delete boundaries)\n\n- Evidence: commands derive filesystem paths from untrusted/remote metadata and lock contents (see the file safety findings in `## Findings (prioritized)` and the package spotlight references for install/update/remove).\n- Risk chain:\n  - remote metadata and lock files are treated as authoritative inputs\n  - filenames/paths can contain traversal or absolute path forms\n  - writes/deletes can occur outside the intended directory if not normalized/validated\n  - result: data loss or unintended overwrite is possible\n- Why it is prioritized: it affects integrity of user systems and is easy to exploit if any untrusted metadata is accepted.\n- Confidence: Medium-High (exact exploitability depends on current filename/URL handling per command, but the boundary is clearly not consistently defended).\n\n3) Release automation consistency (risk of shipping wrong artifacts)\n\n- Evidence: semantic-release and scripts appear misaligned with the Go repo layout and rely on brittle scripts:\n  - `.releaserc.json:42` references `./src/version.ts` which does not exist here\n  - `scripts/prepare.sh:6-13` rewrites tracked files, uses `sed -i` portability-sensitive behavior, and uses `$HELP_URL` without validation\n  - `scripts/binaries.sh:5-7` zips binaries without notices/integrity metadata\n- Risk chain:\n  - inconsistent or non-functional release pipeline means releases can be non-reproducible\n  - brittle scripts can silently generate wrong output (placeholders, missing URLs, wrong assets)\n  - broad artifact globs can upload stale or unintended zips\n  - result: end users may receive incorrect binaries and maintainers cannot reliably reproduce them\n- Why it is prioritized: it undermines trust in releases and makes security fixes harder to ship reliably.\n- Confidence: High (direct configuration/script evidence).\n\n### Internal consistency validation\n\n- Maintainer clarifications were applied:\n  - embedded API keys are intended (still requires preventing URL override exfiltration)\n  - runtime `.env` from CWD is intended (increases importance of hardening env parsing and removing URL overrides)\n  - telemetry is opt-out and may include URLs but must not include secret headers (report recommends tests to enforce this invariant)\n  - no-args behavior is help today; no-args TUI is a known future goal (docs must reflect current behavior)\n  - retries must remain enabled even for POST (report recommends safe body replay for retries)\n- Renovate preset ownership was updated: team-owned upstream changes are treated as governance/auditability considerations, not an external supply chain risk.\n\n### Major conclusions and confidence\n\n- \"Not release-ready\" verdict: High confidence (multiple independent blockers with direct evidence).\n- Highest-risk security boundary issues (URL override + path safety + unbounded HTTP/telemetry shutdown): Medium-High confidence (direct code evidence; some real-world exploitability depends on runtime environment and usage patterns, but the footguns are present).\n","acceptance_criteria":"All audit findings are ticketed; audit.md annotated with IDs","status":"open","issue_type":"epic","created_at":"2025-12-19T21:23:15.347419978Z","updated_at":"2025-12-19T21:51:00.837852644Z","labels":["audit"]}
{"id":"mmm-63.1","title":"Blocker - Data races detected under `go test -race`","description":"# Source\n\n- audit.md#L57\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Blocker - Data races detected under `go test -race`\n\n\nEvidence:\n\n- `go test -race ./...` reports a race in `cmd/mmm/test` tests due to concurrent `fetchMod` calls updating shared test state without synchronization: `cmd/mmm/test/test_test.go:126` (race observed while executing `cmd/mmm/test/test.go:344` from goroutines created in `cmd/mmm/test/test.go:249`).\n- `go test -race ./...` reports a race in lifecycle test harness where `reset()` sets `signalChan=nil` while the listener goroutine reads from it: `internal/lifecycle/lifecycle.go:78` and `internal/lifecycle/lifecycle.go:126`.\n\nImpact:\n\n- Race-enabled CI would fail today.\n- Races inside tests indicate concurrency behavior is not being validated safely; this undermines confidence in concurrent command behavior even if production code is largely single-session.\n\nRemediation:\n\n- Make the test suite race-clean and add `go test -race ./...` to CI (either as a separate job or behind a periodic/nightly gate if runtime is too expensive).\n- Treat race failures as blockers; do not accept any racy tests.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:24:54.590072883Z","updated_at":"2025-12-19T21:49:48.949035454Z","labels":["audit","blocker"],"dependencies":[{"issue_id":"mmm-63.1","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.1","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.10","title":"High - `modsFolder` is treated as trusted and can point anywhere on disk (untrusted config risk)","description":"# Source\n\n- audit.md#L367\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - `modsFolder` is treated as trusted and can point anywhere on disk (untrusted config risk)\n\n\nEvidence:\n\n- `Metadata.ModsFolderPath` accepts absolute/rooted paths and returns them unchanged: `internal/config/metadata.go:28-33` and `internal/config/metadata.go:35-40`.\n- The command layer uses `meta.ModsFolderPath(cfg)` as the base directory for downloads/writes/removals (examples):\n  - `cmd/mmm/install/install.go:302-305`\n  - `cmd/mmm/update/update.go:381-429`\n  - `cmd/mmm/add/add.go:291-296`\n\nImpact:\n\n- A malicious/untrusted `modlist.json` can direct MMM to write, overwrite, or delete files outside the expected project directory by setting `modsFolder` to an absolute path or a traversal path (for example `/`, `C:\\\\`, or `../..`), under the current user's privileges.\n- This is not an RCE by itself, but it is a sharp edge that can cause real data loss when users run MMM on untrusted modpacks/repos.\n\nRemediation:\n\n- Decide whether `modsFolder` is allowed to be absolute/outside the config directory.\n- If not, validate that `modsFolder` resolves under `meta.Dir()` and reject/require explicit confirmation when it does not.\n- If it must remain flexible, document the trust boundary: treat `modlist.json` as code-like input (do not run it from untrusted sources) and add guardrails (warnings, `--allow-external-mods-folder` flag, etc.).\n\nConfidence: Medium-High (depends on whether you consider `modlist.json` a trusted local config vs an importable artifact).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:29:10.923032151Z","updated_at":"2025-12-19T21:49:53.916877617Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.10","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.10","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.11","title":"High - Atomic writes are not symlink-safe (TOCTOU overwrite risk in untrusted directories)","description":"# Source\n\n- audit.md#L392\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Atomic writes are not symlink-safe (TOCTOU overwrite risk in untrusted directories)\n\n\nEvidence:\n\n- Atomic config writes use a predictable sibling temp path and delete it before writing:\n  - `internal/config/atomic_write.go:12-24` allocates `targetPath + \".mmm.tmp\"` (or `...tmp.N`) and calls `_ = fs.Remove(tempPath)` then `afero.WriteFile(fs, tempPath, ...)`.\n- Update in-place swaps use predictable temp paths in the mods directory:\n  - `cmd/mmm/update/update.go:405-416` uses `newPath + \".mmm.tmp\"` and removes it before downloading.\n\nImpact:\n\n- In attacker-controlled directories (malicious repo checkout, extracted modpack, shared folder), an attacker can race-create a symlink at the temp path after removal and before write, causing MMM to write attacker-chosen content to an arbitrary file the user can write to.\n- This is a classic TOCTOU symlink attack pattern; it is hard to exploit reliably locally, but it is well-known and should be avoided for security-oriented tooling.\n\nRemediation:\n\n- Use secure temp file creation:\n  - create temp files with randomized names\n  - open with O_EXCL semantics when possible\n  - avoid following symlinks (platform-specific \"no-follow\" flags) when opening the destination\n- Consider additional hardening when `modsFolder` or `configPath` is outside the project directory.\n\nConfidence: Medium (attack requires local filesystem control/race, but the pattern is objectively unsafe).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:29:26.510231757Z","updated_at":"2025-12-19T21:49:54.371497832Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.11","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.11","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.12","title":"Critical - Network calls can hang indefinitely (no timeouts, no deadlines)","description":"# Source\n\n- audit.md#L418\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - Network calls can hang indefinitely (no timeouts, no deadlines)\n\n\nEvidence:\n\n- `http.Client` has no `Timeout`: `internal/httpClient/httpClient.go:124` (client created at `:125-131` without timeout).\n- `init` uses `http.DefaultClient` directly (also no timeout): `cmd/mmm/init/init.go:66-69`.\n- Command-level contexts are derived from `context.Background()` without deadlines: `main.go:119`.\n- Request builder errors are routinely ignored (examples):\n  - `internal/httpClient/downloader.go:50`\n  - `internal/minecraft/minecraft.go:45`\n\nImpact:\n\n- MMM can hang forever in degraded network conditions (automation-hostile).\n\nRemediation:\n\n- Establish a consistent timeout policy (global and per-request):\n  - set `http.Client.Timeout`, and/or\n  - `context.WithTimeout` per operation.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:29:43.576416487Z","updated_at":"2025-12-19T21:49:54.784989199Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.12","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.12","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.13","title":"Critical - Download integrity is not enforced; non-200 responses can be written as jars","description":"# Source\n\n- audit.md#L443\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - Download integrity is not enforced; non-200 responses can be written as jars\n\n\nEvidence:\n\n- Downloader does not check HTTP status code before writing: `internal/httpClient/downloader.go:51` onward.\n- No post-download hashing is performed to validate content against expected SHA-1 (lock file contains hashes, but the download path does not verify them).\n\nImpact:\n\n- HTML error pages, truncated downloads, or proxy responses can be written as `.jar`.\n- Update flows can delete the previous working file without verifying the replacement.\n\nRemediation:\n\n- Require `StatusCode == 200` and return errors otherwise.\n- Hash downloaded content and compare against expected hash before declaring success.\n- On update, do not remove the old file until the new file is verified.\n- In `internal/modinstall.Service.EnsureLockedFile`, re-hash the downloaded file and fail/cleanup when it does not match the expected hash (today it only hashes the existing local file before deciding to download): `internal/modinstall/modinstall.go:78-97`.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:30:00.057571015Z","updated_at":"2025-12-19T21:49:55.194756806Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.13","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.13","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.14","title":"High - Download URLs are not validated (can allow insecure HTTP or unexpected schemes)","description":"# Source\n\n- audit.md#L466\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Download URLs are not validated (can allow insecure HTTP or unexpected schemes)\n\n\nEvidence:\n\n- Remote/lock-provided download URLs are accepted as-is and passed into `http.NewRequestWithContext`: `internal/httpClient/downloader.go:40-51`.\n- Multiple command flows use `remote.DownloadURL` / `install.DownloadUrl` directly (examples):\n  - `internal/modinstall/modinstall.go:51-73`\n  - `cmd/mmm/install/install.go:302-305`\n  - `cmd/mmm/update/update.go:404-429`\n\nImpact:\n\n- If an upstream API (or a tampered lock file) provides an `http://` URL, MMM will download jars over plaintext HTTP (MITM risk).\n- If an upstream API provides a URL with an unexpected scheme, behavior becomes unpredictable (errors, crashes if request is nil, or \"unsupported protocol\" surprises). This is not just theoretical: URLs are an external input.\n\nRemediation:\n\n- Validate download URLs before any request:\n  - require `https` scheme (or explicitly decide which schemes are allowed)\n  - optionally enforce an allowlist of hosts for platform-controlled downloads (modrinth/curseforge/CDN), or at least log a loud warning for unknown hosts.\n\nConfidence: Medium-High (depends on upstream guarantees, but lock file tampering is always possible).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:30:16.848431733Z","updated_at":"2025-12-19T21:49:55.688577699Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.14","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.14","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.15","title":"Medium - Downloader progress bookkeeping can overflow on 32-bit platforms","description":"# Source\n\n- audit.md#L491\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Downloader progress bookkeeping can overflow on 32-bit platforms\n\n\nEvidence:\n\n- Downloader casts `response.ContentLength` (int64) to `int`: `internal/httpClient/downloader.go:65-66`.\n\nImpact:\n\n- On 32-bit platforms (or extremely large downloads), `int(response.ContentLength)` can overflow and produce negative or nonsensical progress ratios. This is primarily a correctness/UX issue, but it can also impact telemetry/perf if ratio is used downstream.\n\nRemediation:\n\n- Keep progress totals as `int64` and only convert to `int` when required by interfaces, with bounds checks.\n\nConfidence: Medium (MMM likely targets 64-bit desktops; still a real bug pattern).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:30:33.76274206Z","updated_at":"2025-12-19T21:49:56.12732244Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.15","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.15","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.16","title":"High - HTTP retry implementation is unsafe for requests with bodies (retries can send empty bodies)","description":"# Source\n\n- audit.md#L509\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - HTTP retry implementation is unsafe for requests with bodies (retries can send empty bodies)\n\n\nEvidence:\n\n- The retry loop reuses the same `*http.Request` across attempts: `internal/httpClient/httpClient.go:51-115`.\n- At least one call site issues POST requests with a body: `internal/curseforge/files.go:115` uses `http.NewRequestWithContext(..., bytes.NewBuffer(body))`.\n\nImpact:\n\n- If a request with a body is retried, the body may already be consumed by the first attempt and later attempts can send empty or partial bodies. This can corrupt API behavior and make retries actively harmful.\n\nRemediation:\n\n- Given maintainer decision that retries must remain enabled for POST-like APIs, implement retries safely:\n  - Require `request.GetBody != nil` and re-create `request.Body` per attempt via `GetBody` (or build a fresh request each attempt).\n  - Ensure header mutation is not compounded across attempts.\n  - Consider adding a request ID header (where supported) to reduce duplicate side-effect risk when the upstream actually is non-idempotent.\n\nConfidence: Medium (depends on whether retries are enabled for POST paths and whether 5xx responses occur).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:30:49.409426085Z","updated_at":"2025-12-19T21:49:56.544404186Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.16","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.16","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.17","title":"High - RLHTTPClient can panic if constructed with a nil rate limiter","description":"# Source\n\n- audit.md#L531\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - RLHTTPClient can panic if constructed with a nil rate limiter\n\n\nEvidence:\n\n- `NewRLClient` stores the passed limiter directly without validation: `internal/httpClient/httpClient.go:124-131`.\n- `Do` unconditionally calls `client.Ratelimiter.Wait(...)`: `internal/httpClient/httpClient.go:65-66`.\n\nImpact:\n\n- Any code path that calls `httpClient.NewRLClient(nil)` and then uses the client will panic at runtime.\n- Some READMEs show examples that could easily drift into passing nil (for example, \"use default clients\") unless constructors are defensive.\n\nRemediation:\n\n- Make `NewRLClient` safe by default: if limiter is nil, set a conservative default limiter or a `rate.NewLimiter(rate.Inf, 0)` explicitly (and then decide whether that is acceptable).\n\nConfidence: Medium (most code uses `platform.DefaultClients` which guards against nil).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:31:05.060633306Z","updated_at":"2025-12-19T21:49:56.931709491Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.17","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.17","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.18","title":"High - RLHTTPClient retry loop ignores context cancellation and can hang shutdown","description":"# Source\n\n- audit.md#L551\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - RLHTTPClient retry loop ignores context cancellation and can hang shutdown\n\n\nEvidence:\n\n- Retries sleep using `time.Sleep(retryConfig.Interval)` (not context-aware): `internal/httpClient/httpClient.go:102-104`.\n\nImpact:\n\n- If the user cancels the command (Ctrl+C) or the context is canceled, MMM can still block for the full retry interval (and potentially multiple intervals) before exiting.\n\nRemediation:\n\n- Replace `time.Sleep` with a context-aware wait (timer + select on `\u003c-ctx.Done()`), or compute backoff at the caller with a cancellable context.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:31:19.831873827Z","updated_at":"2025-12-19T21:49:57.354922436Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.18","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.18","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.19","title":"High - i18n global initialization is not concurrency-safe and can race/panic","description":"# Source\n\n- audit.md#L569\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - i18n global initialization is not concurrency-safe and can race/panic\n\n\nEvidence:\n\n- `T(...)` checks `localizer == nil` then calls `setup()` with no `sync.Once` / mutex: `internal/i18n/i18n.go:87-89`.\n- `setup()` mutates global variables `localizer`, `bundle`, `localeProvider` and uses `panic` on failure: `internal/i18n/i18n.go:30-33`, `internal/i18n/i18n.go:44-47`, `internal/i18n/i18n.go:48-51`, `internal/i18n/i18n.go:71-73`.\n- The codebase does call into i18n concurrently in production paths:\n  - `update` spawns one goroutine per mod and constructs log events containing `i18n.T(...)` inside that goroutine: `cmd/mmm/update/update.go:195-201` and `cmd/mmm/update/update.go:282-376`.\n  - `test` spawns one goroutine per mod and constructs debug/error messages containing `i18n.T(...)` inside that goroutine: `cmd/mmm/test/test.go:246-253` and `cmd/mmm/test/test.go:322-330`.\n\nImpact:\n\n- Any concurrent calls to `i18n.T(...)` early in process startup can race and produce undefined behavior, including panics or partially-initialized translation state.\n- This is exacerbated by the TUI/CLI architecture where multiple subsystems may log/translate concurrently (for example, telemetry shutdown hooks plus command output).\n\nRemediation:\n\n- Guard `setup()` behind a `sync.Once` and make `T(...)` non-panicking (see earlier \"i18n can panic\" finding).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:31:35.796789841Z","updated_at":"2025-12-19T21:49:57.883394703Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.19","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.19","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.2","title":"Blocker - Release automation is internally inconsistent / likely non-functional","description":"# Source\n\n- audit.md#L78\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Blocker - Release automation is internally inconsistent / likely non-functional\n\n\nEvidence:\n\n- CI workflow is named \"Verify and Release\" but does not actually release (release step is commented out): `.github/workflows/ci.yml:1` and `.github/workflows/ci.yml:40`.\n- `.releaserc.json` still references a Node-era file path `./src/version.ts` that does not exist in this Go repo: `.releaserc.json:42`.\n- The release prepare script will fail if `./src/` does not exist (it does a direct `cat \u003e \"$FILE\"`), and `.releaserc.json` passes `./src/version.ts`: `scripts/prepare.sh:6-8` and `.releaserc.json:42`.\n- `.releaserc.json` expects `CHANGELOG.md` output but the file is absent and the repo does not show any changelog generation in CI: `.releaserc.json:33`.\n- `scripts/prepare.sh` mutates a tracked Go source file (`internal/environment/environment.go`) in-place via `sed`: `scripts/prepare.sh:10`.\n- Release artifact selection uses broad globs (`dist/*-windows.zip`, etc) which can match unrelated or stale zip files in `dist/`, risking accidental upload of extra artifacts: `.releaserc.json:49-60`.\n- There is no checksum/signature generation or verification in the release scripts or CI workflow (no `.sha256` artifacts, no signing, no provenance attestation): `.github/workflows/ci.yml:1-45`, `scripts/binaries.sh:1-7`.\n\nImpact:\n\n- Releases cannot be reproduced from CI as written.\n- Version/help URL injection and artifact generation risk producing inconsistent outputs depending on workflow path.\n\nRemediation (decision required):\n\n- Decide a single authoritative release path:\n  - Either re-enable semantic-release in CI and make `.releaserc.json` match the Go repo layout, or\n  - Remove/replace Node-era semantic-release config if it is not intended for the Go port.\n- Avoid \"rewrite tracked Go files in CI\" as a release mechanism; prefer `-ldflags -X` injection (same pattern as the embedded tokens in the Makefile).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:25:47.483411748Z","updated_at":"2025-12-19T21:49:49.450968513Z","labels":["audit","blocker"],"dependencies":[{"issue_id":"mmm-63.2","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.2","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.20","title":"High - Minecraft manifest cache is global, has no TTL, and is not concurrency-safe","description":"# Source\n\n- audit.md#L592\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Minecraft manifest cache is global, has no TTL, and is not concurrency-safe\n\n\nEvidence:\n\n- Global cache pointer `latestManifest` is read/written without synchronization: `internal/minecraft/minecraft.go:32-33`, `internal/minecraft/minecraft.go:41-43`, `internal/minecraft/minecraft.go:59-60`.\n- `ClearManifestCache()` mutates the cache without synchronization: `internal/minecraft/minecraft.go:34-36`.\n- `getMinecraftVersionManifest` ignores request creation errors: `internal/minecraft/minecraft.go:45`.\n- No HTTP status code validation before decoding JSON: `internal/minecraft/minecraft.go:54-58` (decodes even on non-200).\n\nImpact:\n\n- Potential data races in any command that calls `GetLatestVersion`, `IsValidVersion`, or `GetAllMineCraftVersions` concurrently (for example, parallel operations inside commands).\n- Cache staleness: once populated, it is never refreshed unless `ClearManifestCache` is called.\n- Treating non-200 bodies as JSON can cache an invalid manifest and poison later behavior.\n\nRemediation:\n\n- Add a `sync.Mutex`/`sync.RWMutex` or `sync.Once` + immutable caching approach; add a TTL if correctness requires fresh manifests.\n- Validate request creation errors and HTTP status codes.\n\nConfidence: High for thread-safety defect; Medium for real-world impact (depends on concurrency patterns).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:31:54.026595503Z","updated_at":"2025-12-19T21:49:58.325873573Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.20","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.20","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.21","title":"Medium - internal/packager is an empty module (dead code / misleading structure)","description":"# Source\n\n- audit.md#L616\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - internal/packager is an empty module (dead code / misleading structure)\n\n\nEvidence:\n\n- `internal/packager/` exists but contains no Go files: `find internal/packager -maxdepth 2 -type f` returns nothing.\n\nImpact:\n\n- Confuses maintainers and suggests incomplete or abandoned functionality without any comment/ADR explaining it.\n\nRemediation:\n\n- Remove the empty directory or add a minimal README explaining intended future purpose (if it must remain).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:32:09.61329571Z","updated_at":"2025-12-19T21:49:58.772646735Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.21","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.21","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.22","title":"High - HTTP retry/rate-limiting behavior is weak and does not match documented intent","description":"# Source\n\n- audit.md#L633\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - HTTP retry/rate-limiting behavior is weak and does not match documented intent\n\n\nEvidence:\n\n- Retry loop returns immediately on request error and does not retry network errors: `internal/httpClient/httpClient.go:80-92`.\n- Rate limiting is typically disabled in commands by using `rate.NewLimiter(rate.Inf, 0)` (for example `cmd/mmm/test/test.go:106`).\n- No handling for 429 or rate limit headers; only 5xx triggers retry: `internal/httpClient/httpClient.go:94-106`.\n\nImpact:\n\n- The CLI can overload upstream APIs and is more fragile under transient network failures than implied by docs.\n\nRemediation:\n\n- Implement retries for transient network errors (with backoff and context awareness).\n- Implement 429 handling and platform-specific rate-limit header behavior (if this is a requirement for parity with Node).\n- Establish a real default limiter (not infinite) at command boundaries.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:32:26.781636522Z","updated_at":"2025-12-19T21:49:59.159192801Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.22","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.22","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.23","title":"High - JSON decode errors are ignored in multiple network response paths","description":"# Source\n\n- audit.md#L655\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - JSON decode errors are ignored in multiple network response paths\n\n\nEvidence (examples):\n\n- Modrinth project decode ignores errors: `internal/modrinth/project.go:81-83`.\n- Modrinth versions decode ignores errors: `internal/modrinth/version.go:128-130` and `internal/modrinth/version.go:156-158`.\n\nImpact:\n\n- Malformed or truncated API responses can be treated as valid zero values, leading to confusing downstream failures or silent incorrect behavior.\n\nRemediation:\n\n- Always handle JSON decode errors and propagate as typed API errors with context.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:32:44.037587176Z","updated_at":"2025-12-19T21:49:59.651430852Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.23","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.23","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.24","title":"High - Modrinth file selection ignores the \"primary\" file and can download the wrong artifact","description":"# Source\n\n- audit.md#L674\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Modrinth file selection ignores the \"primary\" file and can download the wrong artifact\n\n\nEvidence:\n\n- Platform selection always uses `selectedVersion.Files[0]` without preferring `Primary`: `internal/platform/modrinth.go:46-52`.\n- Other code explicitly prefers the primary Modrinth file: `cmd/mmm/scan/scan.go:708-714`.\n\nImpact:\n\n- For Modrinth versions that publish multiple files, MMM can install a secondary/non-primary file. This can be the wrong loader variant, a non-JAR artifact, or otherwise not the intended download.\n\nRemediation:\n\n- Centralize a single \"choose Modrinth file\" helper (prefer `Primary`, otherwise fall back deterministically), and use it in both scan/install/update/add flows.\n\nConfidence: Medium-High (logic discrepancy is objective; impact depends on upstream projects publishing multiple files).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:33:00.932346698Z","updated_at":"2025-12-19T21:50:00.119819862Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.24","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.24","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.25","title":"Medium - CurseForge platform selection bypasses the low-level client helpers and loses typed error behavior","description":"# Source\n\n- audit.md#L693\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - CurseForge platform selection bypasses the low-level client helpers and loses typed error behavior\n\n\nEvidence:\n\n- Platform layer issues its own GET request and returns a plain error for non-200 responses: `internal/platform/curseforge.go:79-103` and `internal/platform/curseforge.go:93-100`.\n- Low-level CurseForge package wraps API failures into typed `globalErrors` failures: `internal/curseforge/files.go:61-82`.\n- Low-level CurseForge package also explicitly paginates file listings, while the platform layer does not: `internal/curseforge/files.go:86-104` and `internal/platform/curseforge.go:79-103`.\n\nImpact:\n\n- Callers see inconsistent error types depending on whether they hit `internal/platform` vs `internal/curseforge`, undermining the intended \"typed expected errors\" contract described in `internal/platform/README.md`.\n- If the filtered file listing endpoint is paginated by default (common), the platform selection may miss candidate files and incorrectly report \"no compatible file\" or pick an older/newer-than-intended file from the first page only.\n\nRemediation:\n\n- Prefer calling `internal/curseforge.GetFilesForProject` (or a filtered/paginated variant) from the platform layer so error typing and pagination behavior stays consistent.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:33:19.367225137Z","updated_at":"2025-12-19T21:50:00.562558195Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.25","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.25","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.26","title":"High - i18n can panic at runtime (availability and UX risk)","description":"# Source\n\n- audit.md#L714\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - i18n can panic at runtime (availability and UX risk)\n\n\nEvidence:\n\n- Translation setup uses `panic` on embedded file read failure: `internal/i18n/i18n.go:48-51` and on bundle load failure: `internal/i18n/i18n.go:71-73`.\n- Translation function panics if more than one arg is passed: `internal/i18n/i18n.go:91-93`.\n\nImpact:\n\n- Any bug in a call site that accidentally passes two `Tvars` values will crash the entire program instead of returning a best-effort string.\n- This is especially risky in user-facing CLI flows where translation keys are pervasive (help templates, UI labels, error messages).\n\nRemediation:\n\n- Make `T(...)` total and non-panicking:\n  - return a fallback string on setup failures (for example `key` or `formatKeyAndArgs(key, args...)`)\n  - validate args defensively (ignore extras or merge) rather than panic\n- Restrict `MMM_TEST` behavior to test binaries rather than runtime env, or at least ensure `.env` cannot accidentally flip it (runtime `.env` autoload makes this easier).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:33:36.246233596Z","updated_at":"2025-12-19T21:50:00.958140234Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.26","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.26","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.27","title":"Medium - Locale detection is broken for common `LANG` formats (translations will not activate)","description":"# Source\n\n- audit.md#L737\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Locale detection is broken for common `LANG` formats (translations will not activate)\n\n\nEvidence:\n\n- If `LANG` is set, it is used verbatim: `internal/i18n/i18n.go:111-116`.\n- Locale parsing drops any `LANG` value that is not a well-formed BCP47-ish tag: `internal/i18n/i18n.go:156-159`.\n\nImpact:\n\n- Many systems set `LANG` to values like `fr_FR.UTF-8` / `de_DE.UTF-8` or `C.UTF-8`. These values do not parse as language tags, so they are skipped and the effective locale list becomes empty.\n- Net effect: users on non-English systems will still get the default locale because their real locale is ignored.\n\nRemediation:\n\n- Normalize `LANG` before parsing by stripping common suffixes and modifiers (for example split on `.` and `@` first), then parse the base locale token.\n- Add tests for `LANG=fr_FR.UTF-8`, `LANG=C.UTF-8`, and `LANG=en_US.UTF-8` to pin expected behavior.\n\nConfidence: High (direct code-path evidence; behavior is a known property of `golang.org/x/text/language.Parse`).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:33:52.590475641Z","updated_at":"2025-12-19T21:50:01.7472717Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.27","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.27","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.28","title":"High - Modrinth API client ignores JSON decode errors (treats malformed API replies as success)","description":"# Source\n\n- audit.md#L758\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Modrinth API client ignores JSON decode errors (treats malformed API replies as success)\n\n\nEvidence:\n\n- Response JSON decode errors are discarded and treated as success:\n  - Project: `internal/modrinth/project.go:81-83`\n  - Versions list: `internal/modrinth/version.go:128-130`\n  - Version-by-hash: `internal/modrinth/version.go:156-158`\n\nImpact:\n\n- A transient upstream issue (truncated response, HTML error page with 200, proxy injection, partial body) can silently turn into \"empty\" structs/slices, which will then be interpreted as legitimate \"not found / no compatible file / missing fields\" behavior at higher layers.\n- This weakens both correctness and observability because callers lose the real failure signal and may emit misleading user-facing errors.\n\nRemediation:\n\n- Check `Decode(...)` errors and wrap them in the existing platform error types (`globalErrors.ProjectApiErrorWrap(...)` and `VersionApiErrorWrap(...)`), preserving the underlying decode error for debugging.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:34:08.106727588Z","updated_at":"2025-12-19T21:50:02.337676584Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.28","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.28","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.29","title":"Medium - Config/lock existence checks ignore filesystem errors (misclassifies errors as \"missing\")","description":"# Source\n\n- audit.md#L780\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Config/lock existence checks ignore filesystem errors (misclassifies errors as \"missing\")\n\n\nEvidence:\n\n- `ReadConfig` ignores `afero.Exists` errors and treats them as \"not found\": `internal/config/config.go:20-23`.\n- `EnsureLock` ignores `afero.Exists` errors and treats them as \"missing\": `internal/config/lock.go:18-26`.\n\nImpact:\n\n- Permission errors, invalid paths, or I/O failures can be misreported as \"file not found\", producing confusing UX and potentially causing write attempts in unexpected states (for example trying to create a lock when the underlying error was a permission/FS failure).\n\nRemediation:\n\n- Treat `Exists` errors as errors (return them) rather than defaulting to `exists=false`.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:34:24.401341756Z","updated_at":"2025-12-19T21:50:02.878430681Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.29","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.29","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.3","title":"Blocker - Documentation is materially out of sync with current Go behavior","description":"# Source\n\n- audit.md#L106\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Blocker - Documentation is materially out of sync with current Go behavior\n\n\nEvidence:\n\n- `README.md` documents Node.js + pnpm contributor workflow, not the actual `make`-based Go workflow: `README.md:522`.\n- `docs/tui-design-doc.md` describes \"no args starts full TUI\", but current behavior prints help (no root `Run` behavior in `cmd/mmm/root.go:23`). Maintainer confirms help is correct for the current version and the no-args TUI is a known gap while pushing for Node parity.\n- Command set mismatch: `mmm --help` does not list `change` or `prune`, but README/specs imply them. (Go port not complete per maintainer; therefore docs must reflect current state.)\n- Maintainer/package docs are also stale and conflict with code and build tooling:\n  - `internal/config/README.md` documents `ReadConfig(fs, meta)` and `EnsureLock(fs, meta)`, but the actual public API is context-aware: `internal/config/config.go:16` and `internal/config/lock.go:14`.\n  - `internal/httpClient/README.md` documents `DownloadFile(url, filepath, ...)`, but the actual API includes context: `internal/httpClient/downloader.go:40`.\n  - `internal/environment/README.md` claims release/CI injection uses `-ldflags -X` and \"not rewriting source files\": `internal/environment/README.md:28`, but `scripts/prepare.sh` rewrites `internal/environment/environment.go` in-place via `sed`: `scripts/prepare.sh:10-12` (and `.releaserc.json` still references `./src/version.ts`: `.releaserc.json:42`).\n\nImpact:\n\n- Users and contributors cannot rely on docs to understand current behavior.\n- Specs cannot be used as acceptance criteria if they describe unimplemented commands as current.\n\nRemediation:\n\n- Bring user-facing docs (especially `README.md` and `docs/commands/*`) into alignment with the Go binary that currently ships.\n- If some commands are not implemented yet, remove them from user docs or clearly mark them as unavailable in the current Go build without framing as \"future plans\" (per your documentation principles).\n- `docs/tui-design-doc.md` must stop claiming current behavior that is not implemented; treat it as an aspirational design doc and ensure user docs match today's behavior (help by default).\n\nAdditional evidence - command-by-command docs/specs vs current CLI (help + code):\n\n- Global flags and command set:\n  - Specs list only `--config`, `--quiet`, `--debug` and claim they must appear before the command name: `docs/specs/README.md:16-24`.\n  - The Go CLI also exposes `--perf` and `--perf-out-dir` global flags: `cmd/mmm/root.go:30-34`.\n  - Cobra also exposes a global `-v, --version` flag because `Version` is set: `cmd/mmm/root.go:24-28` (this directly conflicts with docs that claim `add` uses `-v` for its own `--version` flag).\n  - Verification: persistent flags are accepted after the command name (contradicting `docs/specs/README.md:24`), for example `mmm install --config ./modlist.json --help` works (exit code 0) and prints help.\n  - `mmm --help` includes a `completion` command (cobra default). This is not mentioned in `docs/specs/README.md:5-14` nor in `docs/commands/*`.\n\n- `add`:\n  - User docs claim short flags that do not exist:\n    - `docs/commands/add.md:23-24` claims `-f, --allow-version-fallback` and `-v, --version`.\n    - Actual flags are long-only (no shorthands): `cmd/mmm/add/add.go:148-149`.\n    - Additionally, `-v` is already taken by the global `--version` flag (see above), so the docs are not just stale; they are internally inconsistent with the current CLI surface.\n  - User docs say Modrinth requires a project slug, but the examples use what looks like a Modrinth project ID (base62-ish), not a slug:\n    - `docs/commands/add.md:8-9` uses `AANobbMI`\n    - `docs/commands/add.md:68-74` claims \"project slug (last part of the URL)\" for Modrinth\n    - The CLI likely accepts both slug and ID (Modrinth API does), so the docs should state \"slug or project ID\" to match reality.\n\n- `init`:\n  - User docs promise an interactive TUI when running in a terminal and a flag-driven flow in scripts: `docs/commands/init.md:11-13`. This broadly matches the code structure (TUI selection is terminal-dependent), but multiple help strings are incorrect and leak host-specific paths (see the dedicated finding on `init --mods-folder` help text).\n  - User docs include a process-oriented \"open an issue on GitHub\" note, which conflicts with the \"no future plans / no internal process\" constraint for user-facing docs: `docs/commands/init.md:30`.\n\n- `install`:\n  - User docs omit a major behavioral constraint: install can fail due to unmanaged/unresolved files and can suggest running `scan` first.\n    - Spec includes this preflight and failure mode: `docs/specs/install.md:6-16`.\n    - User docs (`docs/commands/install.md:1-37`) do not mention unmanaged file detection or the \"unresolved\" failure mode at all.\n  - User docs provide no flags/options table (even if the only options are global flags), which makes the page inconsistent with the other command docs and harder to use as a reference: `docs/commands/install.md:1`.\n\n- `list`:\n  - Specs claim the command is purely informational and has no prompts: `docs/specs/list.md:13-14`.\n  - Implementation can run in a TUI mode (interactive) depending on TTY and `--quiet`: `cmd/mmm/list/list.go:112-133`.\n  - Implementation prints non-ASCII check/cross glyphs in list output even when not using the TUI (this is a CLI output contract decision that should be documented): `cmd/mmm/list/list.go:224-233`.\n  - User docs are missing core usage/flags documentation and do not mention the TUI mode:\n    - `docs/commands/list.md:1-13` has no flags table and no mention of the interactive list UI.\n\n- `remove`:\n  - User docs claim `--dry-run` does not create a missing lock file: `docs/commands/remove.md:24-25`. This is true for dry-run specifically.\n  - However, non-dry-run will create `modlist-lock.json` if it is missing (via `EnsureLock`) even if there are no matching lock entries to remove: `cmd/mmm/remove/remove.go:178-191`.\n  - Implementation prints a hard-coded emoji check mark and bypasses i18n: `cmd/mmm/remove/remove.go:135-172`.\n\n- `scan`:\n  - Specs and user docs both claim persistence is skipped when any file is \"unsure\": `docs/commands/scan.md:20-21` and `docs/specs/scan.md:14-18`. This matches implementation: `cmd/mmm/scan/scan.go:264-276`.\n  - The docs still inherit the global `--quiet` description mismatch (\"no normal output\" vs \"suppress all output\") because the root flag help text is inaccurate: `cmd/mmm/root.go:31`.\n\n- `test`:\n  - User docs describe exit codes for automation: `docs/commands/test.md:26-35`. This aligns with the implementation intent (exit code 2 for same-version): `cmd/mmm/test/test.go:67-71`.\n  - CLI help output does not mention the exit code contract anywhere; this is a UX/doc mismatch for an \"automation-first\" command.\n  - Internal spec claims interactive prompting when the latest version lookup fails: `docs/specs/test.md:14`. Current implementation is non-interactive and instead requires an explicit version (see the maintainer clarification and `cmd/mmm/test/test.go:198-207`).\n\n- `update`:\n  - User docs and specs both describe \"runs install first\" behavior: `docs/commands/update.md:13-17` and `docs/specs/update.md:6-16`. This matches implementation: `cmd/mmm/update/update.go:157-165`.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:26:15.829784525Z","updated_at":"2025-12-19T21:49:50.197893851Z","labels":["audit","blocker"],"dependencies":[{"issue_id":"mmm-63.3","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.3","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.30","title":"High - HTTP request construction errors are ignored (nil request panic risk)","description":"# Source\n\n- audit.md#L799\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - HTTP request construction errors are ignored (nil request panic risk)\n\n\nEvidence:\n\n- Multiple call sites discard the `error` returned by `http.NewRequestWithContext(...)` and proceed as if the request is valid:\n  - Downloader: `internal/httpClient/downloader.go:50-53`\n  - Minecraft manifest: `internal/minecraft/minecraft.go:45-49`\n  - Modrinth: `internal/modrinth/project.go:62-66`, `internal/modrinth/version.go:110-113`, `internal/modrinth/version.go:139-143`\n  - CurseForge: `internal/curseforge/project.go:26-31`, `internal/curseforge/files.go:57-63`, `internal/curseforge/files.go:112-119`\n  - Platform wrapper: `internal/platform/curseforge.go:80-85`\n\nImpact:\n\n- If any constructed URL is malformed (for example due to unexpected characters in a project ID, a corrupted lock file download URL, or a bad base URL), `http.NewRequestWithContext` can return `(nil, err)`.\n- These paths then dereference `request` (for example in `client.Do(request)`), leading to a crash (nil pointer dereference) rather than a user-facing error.\n\nRemediation:\n\n- Handle and propagate `http.NewRequestWithContext` errors at every call site.\n- Validate/normalize untrusted inputs before interpolating them into URLs (project IDs, download URLs, and any test-only base URL seams).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:34:40.44208527Z","updated_at":"2025-12-19T21:50:03.289901792Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.30","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.30","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.31","title":"High - Toolchain vulnerability posture is currently failing","description":"# Source\n\n- audit.md#L824\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Toolchain vulnerability posture is currently failing\n\n\nEvidence:\n\n- `govulncheck -scan=module` reports multiple standard library vulnerabilities for `go1.25.0` (fixed in `go1.25.1+` / `go1.25.2+` / `go1.25.3` / `go1.25.5` depending on vuln; see IDs below).\n- `govulncheck -scan=symbol ./...` fails with an internal type-checking error, so the strongest scan mode is not usable in this repo currently.\n\nImpact:\n\n- Your security posture cannot be credibly validated via the standard Go vuln tool at symbol-level.\n- Even if the program does not exercise all vulnerable packages, shipping on a vulnerable toolchain without a plan is hard to justify.\n\nRemediation:\n\n- Upgrade Go toolchain to a patched `go1.25.x` release (at least `go1.25.5` per govulncheck output).\n- Consider adding a `toolchain go1.25.5` directive to `go.mod` so hosts with older Go versions do not auto-select `go1.25.0` (the vulnerable .0 toolchain) when `GOTOOLCHAIN=auto` is in effect.\n- Track govulncheck/x_tools compatibility with your chosen Go version and indirect deps.\n\nConfidence: Medium-High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:34:57.200200496Z","updated_at":"2025-12-19T21:50:03.73362264Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.31","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.31","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.32","title":"High - govulncheck evidence (current toolchain)","description":"# Source\n\n- audit.md#L846\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - govulncheck evidence (current toolchain)\n\n\nEvidence:\n\n- `govulncheck -scan=module` reports 13 stdlib vulnerabilities (examples):\n  - `GO-2025-4175` (crypto/x509) fixed in `go1.25.5`\n  - `GO-2025-4155` (crypto/x509) fixed in `go1.25.5`\n  - `GO-2025-4007` (crypto/x509) fixed in `go1.25.3`\n  - `GO-2025-3955` (net/http) fixed in `go1.25.1`\n  - multiple others fixed in `go1.25.2`\n- `govulncheck -scan=package ./...` reports 11 stdlib vulnerabilities in packages MMM depends on.\n- `govulncheck -scan=symbol ./...` fails with:\n  - `internal error: package \"golang.org/x/sys/unix\" without types was imported from \"github.com/mattn/go-isatty\"`\n\nImpact:\n\n- The current CI/workstation toolchain has known fixed vulnerabilities and cannot be fully symbol-scanned for reachability.\n\nRemediation:\n\n- Upgrade Go toolchain and re-run govulncheck; if symbol scan still fails, pin `golang.org/x/vuln` / `golang.org/x/tools` versions (or track upstream bug) until symbol scan works.\n\nConfidence: High (direct evidence from local runs).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:35:12.028272748Z","updated_at":"2025-12-19T21:50:04.147465413Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.32","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.32","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.33","title":"Medium - No third-party license attribution / SBOM artifact for distributed binaries","description":"# Source\n\n- audit.md#L872\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - No third-party license attribution / SBOM artifact for distributed binaries\n\n\nEvidence:\n\n- A dependency license inventory exists (generated during this audit) but is not produced by CI or release tooling today:\n  - `go-licenses report ./...` output captured at `/tmp/go-licenses.txt` (52 modules) with warnings at `/tmp/go-licenses.err` (for example, non-Go asm files and module HEAD URL warning).\n- Release packaging only zips binaries and does not include any license/notice bundle:\n  - `scripts/binaries.sh:5-7` creates `dist/*.zip` with only the executable (`zip -j ... build/.../mmm[.exe]`).\n- No in-repo `THIRD_PARTY_NOTICES*`, `NOTICE*`, or `SBOM*` files were found (verified by searching tracked files during this audit).\n\nImpact:\n\n- This is a compliance and supply chain transparency gap for distributed artifacts, especially given the repo is GPL-3.0 (`LICENSE` at repo root) and vendors many third-party dependencies with varying licenses (MIT/BSD/Apache/MPL observed in the inventory).\n- Users and downstream redistributors have no machine-readable or human-readable way to see the dependency license set for a given release artifact.\n\nRemediation:\n\n- Add a reproducible license/SBOM artifact as part of release builds (and ideally CI):\n  - Generate `THIRD_PARTY_NOTICES.txt` (or similar) from `go-licenses report` (plus any manual notices required).\n  - Consider generating an SBOM (SPDX or CycloneDX) for each release build and attaching it to GitHub Releases.\n  - Ensure `dist/*.zip` includes `LICENSE` and the third-party notices file (or ship them as sibling assets with clear labeling).\n- Add a CI gate that fails if license inventory generation fails or changes unexpectedly (at least on release branches).\n\nConfidence: Medium-High (inventory evidence is strong; compliance obligations depend on your distribution model and legal interpretation).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:35:28.150236771Z","updated_at":"2025-12-19T21:50:04.613582146Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.33","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.33","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.34","title":"Critical - Telemetry shutdown is not time-bounded in the production code path (hang risk)","description":"# Source\n\n- audit.md#L899\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - Telemetry shutdown is not time-bounded in the production code path (hang risk)\n\n\nEvidence:\n\n- Telemetry timeout behavior is only applied when `ctx == nil`: `internal/telemetry/telemetry.go:381-400`.\n- Production always passes a non-nil context (no deadline) into `telemetry.Shutdown`: `main.go:155` (the context is derived from `context.Background()` at `main.go:119`).\n\nImpact:\n\n- `defaultFlushTimeout` / `baseFlushTimeout` is effectively dead in production; telemetry close can block forever if the PostHog client hangs during shutdown.\n- Because shutdown runs inside the lifecycle handler, a hang here can prevent process exit and prevent perf export (`main.go:156-160`).\n\nRemediation:\n\n- Always bound shutdown time by wrapping the passed context with a timeout (for example `ctx, cancel := context.WithTimeout(ctx, snapshot.flushTimeout)`), or by applying a timeout when the provided context has no deadline.\n- Add a regression test that asserts `Shutdown(nonNilContextWithoutDeadline)` returns within `flushTimeout`.\n\nConfidence: High (direct code-path evidence). Actual hang likelihood: Medium (depends on posthog-go behavior and network conditions).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:35:44.894898972Z","updated_at":"2025-12-19T21:50:05.146684483Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.34","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.34","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.35","title":"High - Telemetry \"anonymized\" claim is not accurate as implemented","description":"# Source\n\n- audit.md#L920\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Telemetry \"anonymized\" claim is not accurate as implemented\n\n\nEvidence:\n\n- Telemetry uses machine ID as `DistinctId`: `internal/telemetry/telemetry.go:120` and sends it: `internal/telemetry/telemetry.go:167-171`.\n- Telemetry ships performance traces (a full span tree) and error strings:\n  - `internal/telemetry/telemetry.go:355-372`\n  - `internal/telemetry/telemetry.go:470-472`\n\nImpact:\n\n- This is pseudonymous at best. If docs claim anonymized, that is inaccurate.\n\nRemediation:\n\n- Update docs to describe exactly what is collected (and why).\n- Consider minimizing payload (truncate errors, strip path-like fields, hash IDs).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:36:01.001577955Z","updated_at":"2025-12-19T21:50:05.859319229Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.35","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.35","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.36","title":"High - Telemetry payloads can leak local filesystem paths and potentially sensitive user inputs","description":"# Source\n\n- audit.md#L942\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Telemetry payloads can leak local filesystem paths and potentially sensitive user inputs\n\n\nEvidence:\n\n- Telemetry stores the full error string in the session payload: `internal/telemetry/telemetry.go:222-225` and `internal/telemetry/telemetry.go:470-472`.\n- Telemetry includes the full perf span export tree on every shutdown (not only when `--perf` is set): `internal/telemetry/telemetry.go:355-371`.\n- Perf tracing is enabled unconditionally in the main entrypoint: `main.go:115-119`.\n- Perf tracing uses `trace.AlwaysSample()` (maximum collection) when enabled: `internal/perf/perf.go:42-45`.\n- Perf spans commonly include full request URLs and local file paths:\n  - `internal/httpClient/httpClient.go:31-36` records `url` and `host` for every request.\n  - `internal/modrinth/modrinthClient.go:24` records `url` for Modrinth requests.\n  - `internal/curseforge/curseforgeClient.go:23` records `url` for CurseForge requests.\n  - `internal/httpClient/downloader.go:41-46` records `url` and `path` for downloads.\n- Perf export normalization rewrites \"path-like\" keys but does not scrub `url` (including query strings): `internal/perf/export.go:291-340`.\n- No evidence in this repo that auth header values are recorded into perf attributes or telemetry payloads:\n  - Perf attributes record request URLs/hosts, not headers: `internal/httpClient/httpClient.go:31-36`.\n  - Platform HTTP wrappers set auth headers but only record the URL in spans: `internal/modrinth/modrinthClient.go:23-36`, `internal/curseforge/curseforgeClient.go:22-35`.\n- Some error strings explicitly include local filesystem paths:\n  - `ConfigFileNotFoundException.Error()` embeds `Path`: `internal/config/ConfigErrors.go:18-20`.\n- Some command telemetry includes user-provided values that can be absolute paths or otherwise sensitive:\n  - `init` includes `modsFolder` in `Arguments`: `cmd/mmm/init/init.go:241-247`.\n  - `remove` includes the user-provided lookup strings (mod names/IDs) in `Arguments`: `cmd/mmm/remove/remove.go:93-97`.\n\nImpact:\n\n- Even with telemetry opt-out available, the default (\"on\") behavior can upload machine-local path information and user-entered strings to PostHog. (Maintainer clarified that request URLs are intended to be included, but secret header values must not be.)\n\nRemediation:\n\n- Treat telemetry payload fields as untrusted/sensitive:\n  - Do not send raw error strings; send error categories and small allowlisted details only.\n  - Normalize or redact filesystem paths (prefer \"is_absolute\" booleans or relative-to-config paths).\n  - Avoid sending arbitrary user-entered strings; use counts/enums instead.\n- Do not send the full perf span tree by default. If you need performance telemetry:\n  - send aggregate metrics only (durations, counts, coarse status codes)\n  - scrub URLs to host + path only (drop query strings), or avoid URLs entirely\n  - gate trace attachment behind an explicit opt-in flag/env var\n  - document the attachment behavior clearly\n- Add an explicit invariant test: ensure telemetry payloads and perf exports never include API key values (for example: if `MODRINTH_API_KEY=test-secret`, no captured JSON should contain `test-secret`). This is the only robust way to enforce the \"URLs yes, headers no\" policy over time, especially if instrumentation changes.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:36:19.246798364Z","updated_at":"2025-12-19T21:50:06.482434641Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.36","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.36","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.37","title":"Low - `mmm-perf.json` uses permissive permissions (team considers perf artifacts non-sensitive)","description":"# Source\n\n- audit.md#L986\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - `mmm-perf.json` uses permissive permissions (team considers perf artifacts non-sensitive)\n\n\nEvidence:\n\n- Perf export creates the output directory with mode `0755`: `internal/perf/export.go:67-69`.\n- Perf export writes `mmm-perf.json` with mode `0644`: `internal/perf/export.go:71-78`.\n- Perf spans include full request URLs and local paths (see the telemetry findings above), and the perf exporter does not scrub URL values: `internal/perf/export.go:291-340`.\n\nImpact:\n\n- On multi-user systems, other local users may be able to read `mmm-perf.json` and learn API hosts/endpoints, download URLs, and some local path context. Maintainer clarified these artifacts are not considered sensitive, so treat this primarily as an operational/defense-in-depth note rather than a security blocker.\n\nRemediation:\n\n- Default perf artifacts to least-privilege permissions (for example: `0700` directories and `0600` files).\n- Consider scrubbing or omitting `url` values (or at minimum strip query strings) before writing the perf tree to disk.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:36:36.247281965Z","updated_at":"2025-12-19T21:50:07.000756304Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.37","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.37","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.38","title":"High - TUI key bindings are partially broken under non-English locales","description":"# Source\n\n- audit.md#L1007\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - TUI key bindings are partially broken under non-English locales\n\n\nEvidence:\n\n- Key binding definitions use localized strings as key identifiers, not just as help text:\n  - `internal/tui/keybindings.go:101` uses `i18n.T(\\\"key.pgdown\\\")` as a key name\n  - `internal/tui/keybindings.go:108` uses `i18n.T(\\\"key.pgup\\\")` as a key name\n- Locale files translate those key identifiers into human labels (not Bubble Tea key names), for example German uses localized labels: `internal/i18n/lang/de-DE.json:94-99`.\n\nImpact:\n\n- When the locale is not English, bindings for page navigation and some other keys will not match actual key events (Bubble Tea key event strings are not localized), so PgUp/PgDn navigation can stop working.\n- This is both a correctness defect and an accessibility defect (keybindings should be stable regardless of language).\n\nRemediation:\n\n- Never localize key identifiers passed to `key.WithKeys(...)`. Use canonical key strings only (for example `pgdown`, `pgup`, `home`, `end`).\n- Localize only the help/label side (`key.WithHelp(...)`).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:36:51.472714332Z","updated_at":"2025-12-19T21:50:07.423354819Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.38","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.38","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.39","title":"High - CI supply chain risk due to unpinned GitHub Actions","description":"# Source\n\n- audit.md#L1030\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - CI supply chain risk due to unpinned GitHub Actions\n\n\nEvidence:\n\n- CI uses an action pinned to a moving branch reference: `.github/workflows/ci.yml:20` uses `meza/action-go-setup@main`.\n- CI uses a floating Go toolchain version: `.github/workflows/ci.yml:24` sets `go-version: 'latest'`.\n- Renovate configuration extends a centrally managed team preset: `.github/renovate.json:3` uses `github\u003estateshifters/renovate-common` (maintainer clarified this upstream config is owned by the team and changes are intentional).\n\nImpact:\n\n- A compromised action repository or a malicious force-push to `main` can compromise CI and release artifacts.\n- `go-version: latest` makes builds non-reproducible and can break unexpectedly when Go releases (and it undermines response to toolchain-level vulnerabilities).\n- A centrally managed Renovate preset can change dependency update policy without a change in this repo; that is acceptable if you treat it as an intentional, governed org-level policy, but it reduces per-repo auditability unless you version/tag preset changes.\n\nRemediation:\n\n- Pin actions to immutable commit SHAs (preferred) or at least version tags.\n- Pin Go to a specific patch version compatible with `go.mod` (and keep it updated), for example `1.25.x`.\n- Reduce workflow permissions to least privilege (current workflow requests broad write permissions while not actually releasing): `.github/workflows/ci.yml:3-7`.\n- Consider using `make build-dev` (or `BUILD_REQUIRE_TOKENS=0`) for `pull_request` builds so forks are not blocked by missing secrets (current workflow runs `make build` and expects secrets): `.github/workflows/ci.yml:33-38` and `Makefile:9`.\n- If you want immutable audit trails of Renovate policy per repo, pin the preset by tag/commit; otherwise explicitly document that Renovate policy is centralized and changes are expected.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:37:07.077648147Z","updated_at":"2025-12-19T21:50:07.89007862Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.39","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.39","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.4","title":"Medium - ADR corpus is Node-era and references are inconsistent (governance drift)","description":"# Source\n\n- audit.md#L186\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - ADR corpus is Node-era and references are inconsistent (governance drift)\n\n\nEvidence:\n\n- Repo guidance claims ADRs live under `docs/docs/`, but this repository stores them under `doc/adr/`:\n  - `AGENTS.md:64` and `AGENTS.md:125`\n  - actual ADR path: `doc/adr/0001-record-architecture-decisions.md:1` (and peers)\n- Multiple ADRs are clearly written for the legacy Node implementation (pnpm, Renovate, `console.log` rules):\n  - `doc/adr/0004-using-pnpm.md:1-24`\n  - `doc/adr/0005-using-renovate-bot.md:1-22`\n  - `doc/adr/0002-console-log-only-in-actions.md:20-27`\n- ADR 0006 explicitly assumes a rate-limited client with retries, but the Go port often disables rate limiting and does not retry request errors:\n  - ADR intent: `doc/adr/0006-verifying-minecraft-versions-error-handling.md:21-22`\n  - Go behavior: `cmd/mmm/test/test.go:106` (uses `rate.NewLimiter(rate.Inf, 0)`), `internal/httpClient/httpClient.go:80-92` (returns immediately on request error)\n\nImpact:\n\n- Reviewers and contributors do not have a reliable single source of truth for \"why\" decisions in the Go port.\n- ADR 0006 intent is partially violated in the Go implementation (not just documentation drift).\n\nRemediation:\n\n- Fix the ADR location references in contributor guidance to match the repo layout.\n- Decide which ADRs still apply to the Go port vs are historical Node-only decisions, and clarify scope in `doc/adr/decisions.md`.\n- Write Go-port ADRs for current, security-relevant decisions (telemetry scope, retries, download integrity, base URL override policy) so these constraints are not tribal knowledge.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:27:36.195205369Z","updated_at":"2025-12-19T21:49:50.778213757Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.4","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.4","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.40","title":"Medium - Automated \"approve Renovate PRs without review\" guidance conflicts with supply chain safety","description":"# Source\n\n- audit.md#L1056\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Automated \"approve Renovate PRs without review\" guidance conflicts with supply chain safety\n\n\nEvidence:\n\n- Repository-provided code review instructions explicitly say to \"stand-down and approve\" Renovate dependency update PRs: `.github/instructions/github/code-review.md:23-24`.\n- The Renovate preset this repo extends (`github\u003estateshifters/renovate-common`) enables broad automerge behavior for Go module updates:\n  - It sets `automerge: true` for `gomod` updates, including `\u003c1.0.0` dependencies: external preset `https://raw.githubusercontent.com/stateshifters/renovate-common/main/golang.json` (repro: `curl -fsSL .../golang.json`) at lines 9-23.\n  - It only adds an \"approval\" requirement for major updates, not for minor/patch: same file lines 30-36.\n\nImpact:\n\n- This removes human review pressure from one of the highest-risk change categories (dependency updates).\n- It is especially risky given:\n  - CI currently does not run any vulnerability scanning as claimed in `SECURITY.md` (see the next CI gate finding).\n- Renovate policy (including automerge) is centrally managed by the team (per maintainer clarification), which is fine, but it increases the importance of having machine-verifiable CI security gates because changes can merge without meaningful review.\n- Even if Renovate is \"fully automated\", auto-approving without verification is not compatible with a strict security posture. At minimum, there should be a machine-verifiable gate (dependency review action, govulncheck, etc.) that is required before merge.\n\nRemediation:\n\n- Replace \"auto-approve renovate\" guidance with \"approve only after passing security gates\" guidance, and document what those gates are.\n- If the intent is truly \"no human review\", add hard CI policies: dependency review, govulncheck, and (optionally) CodeQL or equivalent.\n\nConfidence: Medium (impact depends on how strictly the team follows these AI instructions in practice, but the guidance is unambiguous).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:37:23.642872604Z","updated_at":"2025-12-19T21:50:08.289917945Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.40","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.40","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.41","title":"High - CI does not enforce basic quality/security gates it claims or implies","description":"# Source\n\n- audit.md#L1082\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - CI does not enforce basic quality/security gates it claims or implies\n\n\nEvidence:\n\n- Only CI workflow runs `make test`, `make coverage-enforce`, and `make build`: `.github/workflows/ci.yml:27-39`.\n- CI does not run:\n  - `make fmt` (or any gofmt gate)\n  - `go vet` / static analysis gate (`staticcheck` or `golangci-lint`)\n  - `govulncheck` (contradicts `SECURITY.md:3` claims)\n\nImpact:\n\n- Formatting drift, lint regressions, and vulnerable dependency/toolchain updates can land without any CI signal.\n- This undermines the project's \"strict hygiene\" posture and makes audits less actionable because regressions are not prevented.\n\nRemediation:\n\n- Add explicit CI steps for formatting (`make fmt` or a gofmt check), lint (`staticcheck` or `golangci-lint`), and vuln scanning (govulncheck at least `-scan=module`/`-scan=package` until symbol scan is stable).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:37:41.259106391Z","updated_at":"2025-12-19T21:50:08.738786627Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.41","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.41","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.42","title":"Medium - CI workflow conflates CI and release concerns and uses excessive permissions/secrets","description":"# Source\n\n- audit.md#L1105\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - CI workflow conflates CI and release concerns and uses excessive permissions/secrets\n\n\nEvidence:\n\n- Workflow is named \"Verify and Release\" but release is commented out: `.github/workflows/ci.yml:1` and `.github/workflows/ci.yml:40-45`.\n- Workflow requests broad write permissions for all events (including pull requests): `.github/workflows/ci.yml:3-7`.\n- Workflow runs on `pull_request` but relies on secrets for `make build`: `.github/workflows/ci.yml:9-12` and `.github/workflows/ci.yml:33-38`.\n\nImpact:\n\n- Increased blast radius: write permissions on PR runs amplify supply chain risk (a compromised action or dependency can write to repo contents, issues, PRs).\n- External contributors/fork PRs will likely fail build due to missing secrets, reducing contribution viability (even if secrets are required for \"real\" builds).\n\nRemediation:\n\n- Split workflows:\n  - CI workflow for PRs with least privilege (read-only permissions, no secrets required; skip/soften build step or use `BUILD_REQUIRE_TOKENS=0`).\n  - Release workflow on protected branches/tags with required secrets and carefully pinned actions.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:39:04.786704157Z","updated_at":"2025-12-19T21:50:09.200527184Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.42","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.42","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.43","title":"Medium - Repo hygiene: local tooling config is committed","description":"# Source\n\n- audit.md#L1128\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Repo hygiene: local tooling config is committed\n\n\nEvidence:\n\n- `.claude/settings.local.json` is tracked in git (file name implies it is local-only).\n\nImpact:\n\n- Adds noise and encourages committing machine-local agent configuration; can become a secret or policy leak vector over time.\n\nRemediation:\n\n- Decide whether this is intended to be a committed project policy file (rename accordingly) or remove it from version control and ensure it is ignored.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:39:27.293314841Z","updated_at":"2025-12-19T21:50:09.675005776Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.43","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.43","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.44","title":"Low - Repo hygiene: `.editorconfig` is tracked as executable (mode bit drift)","description":"# Source\n\n- audit.md#L1146\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Repo hygiene: `.editorconfig` is tracked as executable (mode bit drift)\n\n\nEvidence:\n\n- `.editorconfig` is stored in git with mode `100755` (executable): verified during this audit via `git ls-files -s .editorconfig` showing `100755 ... .editorconfig`.\n\nImpact:\n\n- Misleading metadata: tools and downstream packaging can treat `.editorconfig` as an executable file.\n- Indicates broader risk of mode-bit drift being missed, especially since many environments set `core.filemode=false` (this audit checkout has `git config core.filemode` set to `false`).\n\nRemediation:\n\n- Normalize tracked modes so only actual scripts/binaries are executable, and ensure CI or hooks prevent mode-bit drift.\n\nConfidence: High (direct repository metadata evidence).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:39:44.587973987Z","updated_at":"2025-12-19T21:50:10.087096727Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.44","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.44","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.45","title":"Low - Lefthook configuration bypasses Makefile targets (workflow drift risk)","description":"# Source\n\n- audit.md#L1165\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Lefthook configuration bypasses Makefile targets (workflow drift risk)\n\n\nEvidence:\n\n- Lefthook is configured to run some checks via the Go toolchain directly, not via documented `make` targets:\n  - `go mod tidy` runs directly: `lefthook.yml:12-15`.\n  - `go vet` runs directly: `lefthook.yml:16-21`.\n- Only one hook uses the Makefile gate (`make coverage-enforce`): `lefthook.yml:9-11`.\n\nImpact:\n\n- Inconsistent developer experience: local hooks can behave differently from CI (and from documented workflow), and may apply repo-specific flags inconsistently.\n- `go mod tidy` as a pre-commit step can create churn and unexpected diffs (especially if run under different Go versions).\n\nRemediation:\n\n- Prefer driving hook behavior through the Makefile (for example: `make fmt`, `make test`, `make coverage-enforce`, and a `make tidy` target) so local and CI behavior stays aligned.\n- If `go mod tidy` remains a hook, document the expected Go toolchain version and the intended policy for go.mod/go.sum changes.\n\nConfidence: High (direct file evidence).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:40:01.012743757Z","updated_at":"2025-12-19T21:50:10.517136333Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.45","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.45","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.46","title":"Low - Repo documentation violates the \"ASCII-only punctuation\" rule (non-ASCII dashes)","description":"# Source\n\n- audit.md#L1188\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Repo documentation violates the \"ASCII-only punctuation\" rule (non-ASCII dashes)\n\n\nEvidence:\n\n- `AGENTS.md` includes non-ASCII punctuation characters:\n  - `AGENTS.md:29` uses an em dash in \"during the session-not just at the end\".\n  - `AGENTS.md:144` uses an en dash in \"1-2 sentences\".\n  - `AGENTS.md:170` uses an em dash in \"guideline-it's\".\n- `memory.md` (tracked markdown in repo root) also contains non-ASCII punctuation (examples):\n  - `memory.md:3` contains an em dash in \"... cmd bug-cross-reference ...\"\n  - `memory.md:8` contains an em dash in \"... defaults-need ldflags-driven ...\"\n\nImpact:\n\n- This directly violates the stated repository rule that markdown must be ASCII (and your clarified preference to ban smart punctuation like em dashes and en dashes).\n- It also makes automated linting for ASCII-only docs harder if the policy doc itself violates the rule.\n\nRemediation:\n\n- Replace non-ASCII punctuation in markdown files with ASCII equivalents:\n  - Use `-` instead of en/em dashes.\n  - Use an ASCII hyphen between ranges (for example, write `1-2` using ASCII characters only).\n\nConfidence: High (direct evidence).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:40:17.213254622Z","updated_at":"2025-12-19T21:50:10.940172119Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.46","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.46","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.47","title":"Low - `.gitattributes` line ending rules likely do not apply to `.cmd` and `.bat` files","description":"# Source\n\n- audit.md#L1215\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - `.gitattributes` line ending rules likely do not apply to `.cmd` and `.bat` files\n\n\nEvidence:\n\n- `.gitattributes:10-11` uses brace expansion-style patterns:\n  - `*.{cmd,[cC][mM][dD]} text eol=crlf`\n  - `*.{bat,[bB][aA][tT]} text eol=crlf`\n\nImpact:\n\n- Git attribute patterns do not support shell brace expansion; these rules likely do not match any files.\n- If the intent is to force CRLF for Windows batch scripts (as described in `.gitattributes:8-11`), the repo is not actually enforcing it.\n\nRemediation:\n\n- Replace these patterns with valid git attribute patterns, for example:\n  - `*.[cC][mM][dD] text eol=crlf`\n  - `*.[bB][aA][tT] text eol=crlf`\n\nConfidence: Medium-High (git attribute pattern behavior is well-defined; confirm by adding a small `.cmd` file and observing attribute application in a maintainer-controlled environment).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:40:33.517705832Z","updated_at":"2025-12-19T21:50:11.341521511Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.47","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.47","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.48","title":"Medium - Release scripts are not robust/portable and can silently produce wrong outputs","description":"# Source\n\n- audit.md#L1238\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Release scripts are not robust/portable and can silently produce wrong outputs\n\n\nEvidence:\n\n- `scripts/prepare.sh`:\n  - Does not use strict mode (`set -euo pipefail`) and does not validate arguments: `scripts/prepare.sh:1-13`.\n  - Uses `sed -i` without portability handling; BSD/macOS `sed` requires a different `-i` form: `scripts/prepare.sh:10-11`.\n  - Uses `$HELP_URL` without validating it is set, which can replace the placeholder with an empty string: `scripts/prepare.sh:11`.\n  - Mutates a tracked Go source file in-place via `sed` as part of release preparation: `scripts/prepare.sh:10-11`.\n- `scripts/binaries.sh`:\n  - Does not enable strict mode and does not verify inputs or ensure `dist/` exists before writing: `scripts/binaries.sh:1-7`.\n\nImpact:\n\n- Local/off-CI release runs can fail or generate inconsistent artifacts depending on host OS/tooling (especially macOS sed behavior).\n- Lack of strict mode increases the chance of partial/incomplete placeholder injection with a \"successful\" exit, which is the worst failure mode for release automation.\n\nRemediation:\n\n- Harden scripts:\n  - Add strict mode and explicit argument validation.\n  - Make `sed` usage portable or constrain release execution to a known Linux environment (and document that explicitly).\n  - Prefer `-ldflags -X` injection over in-place rewriting of tracked Go sources.\n  - Ensure `dist/` is cleaned/created deterministically before zipping, and consider adding checksums/signatures as part of the same pipeline.\n\nConfidence: High (direct code-path evidence).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:40:49.699769718Z","updated_at":"2025-12-19T21:50:11.775664422Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.48","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.48","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.49","title":"High - GitHub Actions workflow likely depends on undocumented behavior (no explicit checkout)","description":"# Source\n\n- audit.md#L1267\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - GitHub Actions workflow likely depends on undocumented behavior (no explicit checkout)\n\n\nEvidence:\n\n- The only workflow does not include an explicit `actions/checkout` step: `.github/workflows/ci.yml:19-39`.\n- The workflow uses a custom action `meza/action-go-setup@main` (unpinned) and then immediately runs `make test` / `make build`: `.github/workflows/ci.yml:20-38`.\n\nImpact:\n\n- If `meza/action-go-setup` does not also check out the repository, this workflow is non-functional (there will be no source tree to run `make` against).\n- Even if it does check out, hiding repository checkout inside a custom \"setup\" action is a maintenance hazard:\n  - it obscures the trust boundary (checkout + token usage + go setup all in one place)\n  - it makes it harder to reason about permissions and what code runs before the repo is present\n  - it increases blast radius if the action is compromised\n\nRemediation:\n\n- Add an explicit `actions/checkout@\u003cpinned\u003e` step (pinned to SHA) and keep the custom action focused on Go installation only.\n- Document the intended behavior of `meza/action-go-setup` (what it does with `GH_TOKEN`, whether it checks out code, and what outputs it provides).\n\nConfidence: Medium (the workflow may still work if the custom action checks out the repo, but the current state is not auditable from this repository).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:41:05.16474843Z","updated_at":"2025-12-19T21:50:12.546901428Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.49","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.49","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.5","title":"Medium - Markdown \"no non-ASCII formatting\" rule is violated broadly","description":"# Source\n\n- audit.md#L216\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Markdown \"no non-ASCII formatting\" rule is violated broadly\n\n\nMaintainer clarification:\n\n- Smart quotes, em-dashes, and any non-ASCII formatting characters are banned.\n- Non-ASCII is acceptable in TUI examples and emojis.\n\nEvidence:\n\n- Scanning tracked Markdown files found widespread non-ASCII characters outside fenced code blocks and excluding emoji. Summary:\n  - tracked markdown files scanned: 69\n  - violations outside code fences (non-emoji): 277\n- Examples of banned formatting characters in prose (not code fences):\n  - em-dash in `AGENTS.md:29`\n  - en-dash and smart quotes in `docs/packaging-research.md:11`\n  - non-breaking hyphen in `docs/tui-design-doc.md:7` and `docs/tui-design-doc.md:11`\n\nImpact:\n\n- This violates the stated documentation style rule and will keep regressing unless enforced automatically.\n- Non-ASCII punctuation causes copy/paste issues in terminals and makes docs inconsistent with project conventions.\n\nRemediation:\n\n- Implement an automated gate that rejects non-ASCII characters outside fenced code blocks, with a narrow allowlist for emoji (if you truly want emoji allowed outside code fences).\n- Normalize existing docs by replacing:\n  - smart quotes -\u003e `'` / `\"`\n  - em/en dashes -\u003e `--` / `-`\n  - non-breaking hyphens/spaces -\u003e regular `-` / space\n\nConfidence: High (tool-confirmed scan results).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:27:51.329322443Z","updated_at":"2025-12-19T21:49:51.260365084Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.5","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.5","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.50","title":"Medium - Stale bot configuration is present but there is no evidence it is active","description":"# Source\n\n- audit.md#L1291\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Stale bot configuration is present but there is no evidence it is active\n\n\nEvidence:\n\n- Stale policy exists: `.github/stale.yml:1-20`.\n- There is no workflow referencing stale automation; the workflow directory contains only `.github/workflows/ci.yml`.\n\nImpact:\n\n- The repo may be relying on an external GitHub App / bot configuration that is not visible here.\n- Contributors cannot predict whether/when issues will be auto-labeled or auto-closed, and maintainers cannot reproduce the behavior from the repo alone.\n\nRemediation:\n\n- If this is intended to be enforced by a GitHub App, document which app and how it is configured (and confirm it actually consumes `.github/stale.yml`).\n- If this is intended to be enforced by Actions, add a workflow that uses `actions/stale` (pinned) and remove ambiguity.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:41:20.387809605Z","updated_at":"2025-12-19T21:50:13.025619325Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.50","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.50","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.51","title":"Medium - Security vulnerability reporting flow encourages public disclosure","description":"# Source\n\n- audit.md#L1312\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Security vulnerability reporting flow encourages public disclosure\n\n\nEvidence:\n\n- `SECURITY.md` instructs reporters to open a public issue for vulnerabilities: `SECURITY.md:8-10`.\n\nImpact:\n\n- This increases the chance of 0-day vulnerabilities being disclosed publicly before a fix exists.\n- It conflicts with common GitHub best practices (private security advisories / private reporting channel).\n\nRemediation:\n\n- Provide a private reporting channel (GitHub Security Advisories / private report link, or a security email) and reserve issues for post-fix, post-embargo tracking.\n- Document supported versions and how fixes are backported (or explicitly say \"only latest is supported\").\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:41:36.039831032Z","updated_at":"2025-12-19T21:50:13.458998757Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.51","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.51","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.52","title":"Low - Issue templates are missing key debugging fields and do not steer security reports","description":"# Source\n\n- audit.md#L1332\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Issue templates are missing key debugging fields and do not steer security reports\n\n\nEvidence:\n\n- Bug report template does not ask for logs (`--debug` output) or repro steps beyond freeform text; it does request command/config/lock: `.github/ISSUE_TEMPLATE/bug_report.yml:9-71`.\n- Issue template config enables blank issues: `.github/ISSUE_TEMPLATE/config.yml:1`.\n- There is no `contact_links` entry for security reporting (only discussions): `.github/ISSUE_TEMPLATE/config.yml:2-5`.\n\nImpact:\n\n- Maintainers are likely to spend extra time extracting the minimum info needed to reproduce.\n- Allowing blank issues increases triage noise; security reports may get filed as public issues instead of being routed privately.\n\nRemediation:\n\n- Add a dedicated \"Security vulnerability\" contact link (private channel) and point users to `SECURITY.md`.\n- Add explicit fields for:\n  - expected vs actual\n  - repro steps with copy/paste command lines\n  - sanitized debug logs (explicitly warn users not to paste API keys)\n- Consider disabling blank issues to force templated intake.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:41:52.825702606Z","updated_at":"2025-12-19T21:50:13.913467163Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.52","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.52","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.53","title":"Low - CODEOWNERS is missing (review ownership and escalation unclear)","description":"# Source\n\n- audit.md#L1358\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - CODEOWNERS is missing (review ownership and escalation unclear)\n\n\nEvidence:\n\n- No `CODEOWNERS` file exists in the repository (none under repo root or `.github/`).\n\nImpact:\n\n- Review ownership and escalation paths are informal and can drift.\n- In security-sensitive areas (networking, filesystem, release), lack of explicit ownership increases the chance of unreviewed changes landing.\n\nRemediation:\n\n- Add a `CODEOWNERS` file (for example under `.github/CODEOWNERS`) covering:\n  - release/CI (`.github/workflows/*`, `scripts/*`)\n  - networking/telemetry (`internal/httpClient/*`, `internal/telemetry/*`, `internal/perf/*`)\n  - filesystem/data safety (`internal/config/*`, `internal/modinstall/*`, `cmd/mmm/*`)\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:42:08.11214063Z","updated_at":"2025-12-19T21:50:14.307776157Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.53","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.53","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.54","title":"Low - Missing PR template and support policy file (triage and contributor UX)","description":"# Source\n\n- audit.md#L1380\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Missing PR template and support policy file (triage and contributor UX)\n\n\nEvidence:\n\n- No PR template file exists (no `.github/pull_request_template.md` and no `PULL_REQUEST_TEMPLATE.md` under repo root).\n- No `SUPPORT.md` file exists to route common support requests (the only explicit routing is a discussions link in `.github/ISSUE_TEMPLATE/config.yml:2-5`).\n\nImpact:\n\n- PRs may arrive without consistent checklists (tests run, docs updated, risk notes), increasing review burden and reducing auditability.\n- Users may file issues for support questions, increasing triage noise.\n\nRemediation:\n\n- Add `.github/pull_request_template.md` with a minimal checklist aligned to repo gates (`make test`, `make coverage-enforce`, `make build`) and explicit \"no secrets in logs\" reminder.\n- Add `SUPPORT.md` (or equivalent) pointing users to discussions for questions, issues for confirmed bugs, and the private security reporting channel for vulnerabilities.\n\nConfidence: Medium (absence-of-file finding is easy to verify, but impact depends on current maintainer workflow).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:42:24.286203002Z","updated_at":"2025-12-19T21:50:14.759958574Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.54","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.54","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.55","title":"Medium - `FUNDING.yml` location may not be recognized by GitHub","description":"# Source\n\n- audit.md#L1401\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - `FUNDING.yml` location may not be recognized by GitHub\n\n\nEvidence:\n\n- `FUNDING.yml` exists at repo root: `FUNDING.yml:1`.\n\nImpact:\n\n- GitHub's sponsor button configuration is conventionally read from `.github/FUNDING.yml`. If GitHub does not read the root-level file, funding links may not show up as intended.\n\nRemediation:\n\n- Confirm whether GitHub is picking up the current `FUNDING.yml`. If not, move it to `.github/FUNDING.yml`.\n\nConfidence: Medium (depends on GitHub behavior; requires confirmation in the hosted repo UI).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:42:41.116393992Z","updated_at":"2025-12-19T21:50:15.192931756Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.55","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.55","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.56","title":"Medium - `CONTRIBUTING.md` does not reflect the actual Go workflow and is not enforceable as written","description":"# Source\n\n- audit.md#L1419\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - `CONTRIBUTING.md` does not reflect the actual Go workflow and is not enforceable as written\n\n\nEvidence:\n\n- `CONTRIBUTING.md` is generic and does not reference the project's actual `make` targets or Go tooling, but requires \"tests and linters\" without specifying how to run them: `CONTRIBUTING.md:8-15`.\n- It requires Conventional Commits: `CONTRIBUTING.md:12`, but the semantic-release step is currently commented out in CI: `.github/workflows/ci.yml:40-45`.\n\nImpact:\n\n- Contributors are not given the correct, repo-specific path to validate changes.\n- Requirements become \"paper policy\": easy to violate unintentionally, and hard for maintainers to enforce consistently.\n\nRemediation:\n\n- Update `CONTRIBUTING.md` to reflect current Go workflow (`make fmt`, `make test`, `make coverage-enforce`, `make build`) and clarify whether Conventional Commits are actually enforced today.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:42:56.970231Z","updated_at":"2025-12-19T21:50:15.670669088Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.56","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.56","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.57","title":"Low - `CLAUDE.md` contains conflicting agent instructions (repo hygiene)","description":"# Source\n\n- audit.md#L1439\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - `CLAUDE.md` contains conflicting agent instructions (repo hygiene)\n\n\nEvidence:\n\n- `CLAUDE.md:1` instructs using a different agent persona (\"senior-engnieer\") regardless of context, which conflicts with the explicit Auditor persona requested for this audit.\n\nImpact:\n\n- Confusing or conflicting meta-instructions increase the chance of inconsistent automation behavior and reduce trust in repo guidance files.\n\nRemediation:\n\n- Either delete `CLAUDE.md` if it is obsolete, or rewrite it to be consistent with `AGENTS.md` and the repo's desired tooling workflow.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:43:14.580112696Z","updated_at":"2025-12-19T21:50:16.118618723Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.57","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.57","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.58","title":"High - Documentation and tests depend on env-driven API base URLs (must be refactored)","description":"# Source\n\n- audit.md#L1457\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## High - Documentation and tests depend on env-driven API base URLs (must be refactored)\n\n\nEvidence:\n\n- Internal docs explicitly document base URL overrides via env vars:\n  - `internal/platform/README.md:121-125`\n  - `internal/modrinth/README.md:34`\n  - `internal/curseforge/README.md:24`\n- Tests use env vars to redirect API calls to `httptest` servers (examples include `internal/platform/platform_test.go` and `internal/modrinth/versions_test.go`).\n\nImpact:\n\n- After removing env-driven base URL overrides (required per maintainer decision), both docs and tests will break unless migrated to an explicit injection mechanism.\n\nRemediation:\n\n- Replace env-var test strategy with a stable, explicit test seam:\n  - package-level base URL variable plus `SetBaseURLForTesting(...) func() restore`, or\n  - dependency injection (pass base URL into constructors), or\n  - build-time injected test defaults (only for tests).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-19T21:43:32.665367927Z","updated_at":"2025-12-19T21:50:16.52166225Z","labels":["audit","high"],"dependencies":[{"issue_id":"mmm-63.58","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.58","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.59","title":"Medium - Coverage enforcement does not cover command packages","description":"# Source\n\n- audit.md#L1482\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Coverage enforcement does not cover command packages\n\n\nEvidence:\n\n- `make coverage-enforce` only runs coverage over `./internal/...`: `Makefile:204-208`.\n\nImpact:\n\n- The project policy states 100 percent coverage; the current gate enforces 100 percent only for internal packages, not `cmd/...` or root package behavior.\n\nRemediation:\n\n- Expand the coverage target to include all packages (or add a second gate for command packages) and ensure the enforcement logic matches the stated policy.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-19T21:43:49.178217502Z","updated_at":"2025-12-20T10:23:18.985212996Z","closed_at":"2025-12-20T10:23:18.985212996Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.59","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.59","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.6","title":"Critical - Credential exfiltration risk via runtime `.env` autoload + API base URL overrides","description":"# Source\n\n- audit.md#L250\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - Credential exfiltration risk via runtime `.env` autoload + API base URL overrides\n\n\nContext (why this matters):\n\nYou asked for more context on my earlier question about API base URL overrides. The issue is not \"having overrides\" by itself; it is the combination of:\n\n1) The binary auto-loads `.env` at runtime from the current working directory, and\n2) The HTTP clients allow overriding the API base URL via env vars, and\n3) Those clients always attach auth headers (your embedded keys) to requests.\n\nEvidence:\n\n- Runtime `.env` autoload: `main.go:12` imports `github.com/joho/godotenv/autoload`.\n- Modrinth base URL override: `internal/modrinth/modrinthClient.go:39` reads `MODRINTH_API_URL`.\n- CurseForge base URL override: `internal/curseforge/curseforgeClient.go:37` reads `CURSEFORGE_API_URL`.\n- Auth headers are unconditionally added:\n  - Modrinth: `internal/modrinth/modrinthClient.go:26`\n  - CurseForge: `internal/curseforge/curseforgeClient.go:25`\n\nExploit scenario:\n\n- If a user runs `mmm` in a folder containing a malicious `.env` (for example, shipped inside a modpack zip or a repo checkout), that `.env` can set `MODRINTH_API_URL` / `CURSEFORGE_API_URL` to an attacker-controlled host.\n- The binary will then send the embedded API keys to that host via `Authorization` / `x-api-key`.\n\nImpact:\n\n- Leaks embedded API keys.\n- Keys are intended to be embedded, but that does not make exfiltration acceptable; it broadens the exposure surface and makes accidental leakage easier and harder to detect.\n\nRemediation:\n\n- Remove production support for env-driven API base URL overrides entirely (per maintainer decision).\n- Replace test usage of `MODRINTH_API_URL` / `CURSEFORGE_API_URL` with an explicit test hook:\n  - either a `SetBaseURLForTesting(...) func() restore` pattern in each package, or\n  - a build-time injected default (for example `-ldflags -X ...`) used only in test binaries.\n- Also reject empty base URLs defensively; today `internal/curseforge/curseforgeClient.go:39-41` returns an empty string when the env var is set to empty.\n- Maintain runtime `.env` support for user-supplied keys (per maintainer decision) loaded from CWD, but do not allow `.env` to affect network destinations; use an allowlist-based loader (only import known MMM env vars) rather than `godotenv/autoload` loading everything from the current directory.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"closed","issue_type":"task","created_at":"2025-12-19T21:28:06.929036723Z","updated_at":"2025-12-19T23:13:25.991323755Z","closed_at":"2025-12-19T23:13:25.991323755Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.6","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.6","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.60","title":"Medium - Command packages are overlarge and mix concerns (maintainability and correctness risk)","description":"# Source\n\n- audit.md#L1500\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Command packages are overlarge and mix concerns (maintainability and correctness risk)\n\n\nEvidence:\n\n- Several command implementation files are very large and contain multiple layers of concerns (CLI parsing, TUI, domain logic, filesystem I/O, networking, telemetry):\n  - `cmd/mmm/install/install.go` (684 lines in this workspace)\n  - `cmd/mmm/scan/scan.go` (803 lines in this workspace)\n  - `cmd/mmm/update/update.go` (564 lines in this workspace)\n  - `cmd/mmm/add/add.go` (544 lines in this workspace) plus `cmd/mmm/add/tui.go` (605 lines in this workspace)\n  - `cmd/mmm/init/init.go` (520 lines in this workspace)\n- These files also duplicate multiple helper behaviors across commands (see the duplication finding above), which is a common symptom of missing shared domain services.\n\nImpact:\n\n- Harder to audit and reason about security invariants (path safety, retries, URL validation) because the logic is scattered and intertwined with UI concerns.\n- Higher regression risk: small changes require touching large files with broad responsibilities.\n\nRemediation:\n\n- Split command packages into thin orchestration layers and move reusable domain logic into internal packages with tight unit tests.\n- Establish a consistent \"deps + service\" pattern per command (the repo already uses deps structs; extend the pattern by pulling business logic out of cobra RunE closures).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:05.881518801Z","updated_at":"2025-12-19T21:50:17.394796195Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.60","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.60","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.61","title":"Medium - `--quiet` flag description does not match behavior","description":"# Source\n\n- audit.md#L1526\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - `--quiet` flag description does not match behavior\n\n\nEvidence:\n\n- Flag says \"Suppress all output\": `cmd/mmm/root.go:31`.\n- Logger always prints errors regardless of `quiet`: `internal/logger/logger.go:38-44`.\n- Multiple commands intentionally force important output even when `--quiet` is set:\n  - `list` always prints the rendered view with `forceShow=true`: `cmd/mmm/list/list.go:131-133`.\n  - `test` prints failure summaries with `forceShow=true` (while suppressing the success message in quiet mode): `cmd/mmm/test/test.go:283-303`.\n- `--debug` also weakens \"quiet\" by design: `Logger.Log` prints when `debug=true` even if `quiet=true` (it only suppresses when `quiet \u0026\u0026 !forceShow \u0026\u0026 !debug`): `internal/logger/logger.go:24-36`.\n\nImpact:\n\n- Automation users can rely on `--quiet` and still receive stderr output, which may be acceptable, but then the flag description is incorrect (and expectations are violated).\n - The current behavior is closer to \"suppress prompts and non-essential output, but still print errors and required results\" which should be documented consistently.\n\nRemediation:\n\n- Either change the flag description to \"suppress non-error output\" (or similar), or change behavior to fully silence output (usually a bad idea for CLIs, so prefer correcting the description and being explicit).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:22.356067888Z","updated_at":"2025-12-19T21:50:17.88055218Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.61","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.61","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.62","title":"Medium - Help formatting assumes stdout is a TTY; non-TTY output can be malformed","description":"# Source\n\n- audit.md#L1550\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Help formatting assumes stdout is a TTY; non-TTY output can be malformed\n\n\nEvidence:\n\n- Help template wrapping width is derived from `term.GetSize(int(os.Stdout.Fd()))` with ignored errors: `cmd/mmm/root.go:92-97`.\n\nImpact:\n\n- When stdout is not a TTY (piped output, CI logs), `term.GetSize` can fail and `width` can be `0`, leading to unpredictable wrapping behavior.\n\nRemediation:\n\n- On error or width \u003c= 0, fall back to a sane default (for example 80) or disable wrapping modifications entirely when stdout is not a TTY.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:40.785932Z","updated_at":"2025-12-19T21:50:18.305134682Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.62","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.62","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.63","title":"Medium - .mmmignore semantics break when the mods folder is outside the config directory; path matching is not Windows-robust","description":"# Source\n\n- audit.md#L1568\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - .mmmignore semantics break when the mods folder is outside the config directory; path matching is not Windows-robust\n\n\nEvidence:\n\n- Ignore patterns are rooted at `meta.Dir()` (config directory), but mod files may live outside that root when `modsFolder` is absolute or points elsewhere: `cmd/mmm/install/install.go:625-658`.\n- `IsIgnored` enforces \"path must be under rootDir\" using `strings.HasPrefix` on cleaned paths: `internal/mmmignore/mmmignore.go:42-47` (case-sensitive, path-string-based check).\n\nImpact:\n\n- If `modsFolder` is outside the config directory, `.mmmignore` rules will never match mod files.\n- On Windows, case-insensitive paths can cause false negatives (string prefix checks are case-sensitive), reducing reliability of ignore behavior.\n\nRemediation:\n\n- Clarify what `.mmmignore` roots to (config dir vs mods dir) and implement accordingly.\n- Replace the prefix check with a robust path containment check (volume-aware on Windows; consider `filepath.Rel` + error handling).\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:44:58.495118472Z","updated_at":"2025-12-19T21:50:18.720630795Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.63","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.63","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.64","title":"Medium - `init --mods-folder` help/prompt text is incorrect and leaks machine-specific paths","description":"# Source\n\n- audit.md#L1589\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - `init --mods-folder` help/prompt text is incorrect and leaks machine-specific paths\n\n\nEvidence:\n\n- The `--mods-folder` flag help text interpolates the current working directory into the usage string: `cmd/mmm/init/init.go:112-114` with translation key `cmd.init.usage.mods-folder` in `internal/i18n/lang/en-GB.json:33`.\n- Running `mmm init --help` shows a machine-specific path hint (example from this environment): \"full or relative path from /work\".\n- Actual path resolution for `modsFolder` is relative to the config directory, not CWD: `internal/config/metadata.go:28-33` (relative to `meta.Dir()`).\n- The TUI prompt text also claims \"relative path from the current directory\": `internal/i18n/lang/en-GB.json:29`.\n\nImpact:\n\n- Users are misled about what a \"relative\" path means when `--config` points to a file in another directory (the most common non-default usage).\n- The help output becomes non-portable and environment-specific, and it can leak local directory paths in pasted help output/screenshots.\n\nRemediation:\n\n- Make help text stable and correct:\n  - describe relative paths as \"relative to the config file directory\" (or whatever the intended contract is)\n  - avoid interpolating runtime-specific absolute paths into help output\n- Align TUI prompt wording with the actual resolution logic.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:45:14.820329345Z","updated_at":"2025-12-19T21:50:19.119530311Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.64","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.64","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.65","title":"Low - Branding/grammar issues in i18n strings reduce perceived quality and trust","description":"# Source\n\n- audit.md#L1614\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Branding/grammar issues in i18n strings reduce perceived quality and trust\n\n\nEvidence:\n\n- Root description uses \"Curseforge\" instead of \"CurseForge\": `internal/i18n/lang/en-GB.json:2`.\n- Help command short text has a grammar error: `internal/i18n/lang/en-GB.json:7` (\"Get help for the any command\").\n\nImpact:\n\n- Reduces polish and user trust, especially for a CLI intended for automation and broad distribution.\n\nRemediation:\n\n- Fix the English locale strings and add a quick \"spellcheck\" review pass for user-facing strings as part of release readiness.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:45:31.711051132Z","updated_at":"2025-12-19T21:50:19.600765719Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.65","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.65","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.66","title":"Medium - User-facing strings bypass i18n and include emoji","description":"# Source\n\n- audit.md#L1633\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - User-facing strings bypass i18n and include emoji\n\n\nEvidence:\n\n- Remove command uses hard-coded English strings and an emoji check mark:\n  - `cmd/mmm/remove/remove.go:135`\n  - `cmd/mmm/remove/remove.go:143`\n  - `cmd/mmm/remove/remove.go:171`\n- Init command logs an English string directly:\n  - `cmd/mmm/init/init.go:407`\n\nImpact:\n\n- Violates the stated i18n discipline in the project TUI guidelines and creates inconsistent UX across commands/locales.\n- Emoji output can be undesirable in automation logs and is not guaranteed to render consistently across terminals.\n\nRemediation:\n\n- Route user-facing strings through `internal/i18n` and use existing `internal/tui` icon helpers where appropriate.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:45:48.787206104Z","updated_at":"2025-12-19T21:50:20.150859425Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.66","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.66","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.67","title":"Medium - CLI output uses emoji and non-ASCII glyphs even in non-TTY (automation UX risk)","description":"# Source\n\n- audit.md#L1657\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - CLI output uses emoji and non-ASCII glyphs even in non-TTY (automation UX risk)\n\n\nEvidence:\n\n- Shared icon helpers always return emoji, even when `colorize=false` (non-TTY): `internal/tui/icons.go:3-17`.\n- Multiple non-TUI code paths use these emoji icons in normal output:\n  - `cmd/mmm/scan/scan.go:764-781` and `cmd/mmm/scan/scan.go:786-797` (uses `tui.SuccessIcon` / `tui.ErrorIcon` with `colorize` derived from `IsTerminalWriter`)\n  - `cmd/mmm/install/install.go:325`\n  - `cmd/mmm/update/update.go:243`\n- `list` prints non-ASCII check/cross glyphs as part of its normal output (not gated on TTY): `cmd/mmm/list/list.go:224-233`.\n- `remove` prints an emoji check mark directly (bypassing shared icon helpers): `cmd/mmm/remove/remove.go:171`.\n\nImpact:\n\n- For an automation-first CLI, non-ASCII output can cause practical issues:\n  - logs can become harder to parse and grep reliably across environments\n  - some terminals/fonts render these inconsistently (or as missing glyph boxes)\n  - users piping output into ASCII-only systems (or enforcing ASCII policies) will be surprised\n\nRemediation:\n\n- Decide on a single output contract:\n  - If the project wants \"pretty by default\", gate emoji/unicode behind `IsTerminalWriter(out)` and use ASCII equivalents when not a TTY (for example `[OK]` / `[ERR]` or `OK` / `ERR`).\n  - Alternatively, add a global `--no-icons` / `--ascii` flag and document it for automation users.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:46:04.134019517Z","updated_at":"2025-12-19T21:50:20.683559467Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.67","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.67","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.68","title":"Medium - Ignored errors and unsafe assumptions in core I/O paths","description":"# Source\n\n- audit.md#L1686\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - Ignored errors and unsafe assumptions in core I/O paths\n\n\nEvidence:\n\n- Request creation errors ignored (nil request risk if URL is malformed):\n  - `internal/httpClient/downloader.go:50`\n  - `internal/minecraft/minecraft.go:45`\n  - `internal/modrinth/project.go:62`\n  - `internal/modrinth/version.go:110`\n  - `internal/modrinth/version.go:139`\n  - `internal/curseforge/project.go:27`\n  - `internal/curseforge/files.go:58`\n  - `internal/curseforge/files.go:115`\n  - `internal/platform/curseforge.go:81`\n- JSON decode errors ignored:\n  - `internal/modrinth/project.go:82`\n  - `internal/modrinth/version.go:129`\n  - `internal/modrinth/version.go:157`\n- JSON marshal errors ignored (lock/config writes):\n  - `internal/config/config.go:42`\n  - `internal/config/lock.go:52`\n- URL parse errors ignored:\n  - `internal/modrinth/version.go:104`\n- JSON marshal errors ignored (request construction):\n  - `internal/modrinth/version.go:101-102`\n  - `internal/curseforge/files.go:114`\n- `afero.Exists` errors ignored in production code:\n  - `internal/config/config.go:20`\n  - `internal/config/lock.go:19`\n  - `internal/fileutils/fileutils.go:12`\n  - `cmd/mmm/init/init.go:360`\n\nImpact:\n\n- Turns malformed URLs, corrupted responses, or filesystem errors into silent failures or misleading downstream behavior.\n\nRemediation:\n\n- Treat all of the above as hard errors and propagate them as typed failures with context.\n- In tests, explicitly assert error paths for malformed URLs and bad JSON to prevent regressions.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:46:20.929140239Z","updated_at":"2025-12-19T21:50:21.135765235Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.68","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.68","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.69","title":"Low - Error wrapping strategy is inconsistent (`github.com/pkg/errors` vs standard library)","description":"# Source\n\n- audit.md#L1731\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Error wrapping strategy is inconsistent (`github.com/pkg/errors` vs standard library)\n\n\nEvidence:\n\n- Some packages use `github.com/pkg/errors` (`internal/modrinth/version.go:12`, `internal/curseforge/files.go:13`) while most of the repo uses `fmt.Errorf(\\\"...: %w\\\", err)`.\n\nImpact:\n\n- Inconsistent behavior for wrapping/unwrapping and stack traces; makes it harder to reason about error handling and user-facing error messages.\n\nRemediation:\n\n- Standardize on the Go standard library error wrapping patterns unless there is a specific, documented reason to retain `pkg/errors`.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:46:36.534087534Z","updated_at":"2025-12-19T21:50:21.959983634Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.69","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.69","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.7","title":"Critical - `make build` executes `.env` as shell code on Unix hosts (build-time code execution risk)","description":"# Source\n\n- audit.md#L292\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - `make build` executes `.env` as shell code on Unix hosts (build-time code execution risk)\n\n\nEvidence:\n\n- Unix Makefile logic sources `.env` directly into the shell using the `.` builtin: `Makefile:114` (`set -a; . ./.env; set +a`).\n\nImpact:\n\n- A `.env` file is treated as executable shell script, not as data. Any command substitutions or shell statements in `.env` will execute when a developer runs `make build` (or any build target using `GO_BUILD_WITH_EMBEDDED_TOKENS`).\n- This is a straightforward local code execution vector if a user runs `make build` in a directory where `.env` was supplied by an untrusted source (malicious repo checkout, extracted modpack, etc).\n\nRemediation:\n\n- Treat `.env` as data, not code: parse `KEY=VALUE` lines instead of sourcing.\n- Apply the same parsing behavior across Unix and Windows build paths (Windows already parses line-by-line rather than executing).\n- Document that `.env` must never be obtained from untrusted sources if it remains executable.\n\nConfidence: High (direct evidence in Makefile).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:28:22.691432566Z","updated_at":"2025-12-19T21:49:52.368981427Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.7","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.7","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.70","title":"Low - Naming and API hygiene issues (nitpicks with real costs)","description":"# Source\n\n- audit.md#L1749\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Naming and API hygiene issues (nitpicks with real costs)\n\n\nEvidence (examples):\n\n- Exported function name has inconsistent capitalization: `internal/minecraft/minecraft.go:95` (`GetAllMineCraftVersions`).\n  - Additional occurrences of the incorrect \"MineCraft\" casing in the repo (spreads the style defect across code/docs/tests):\n    - Caller: `cmd/mmm/init/gameVersion.go:111` (`minecraft.GetAllMineCraftVersions`)\n    - Tests: `internal/minecraft/minecraft_test.go:69`, `internal/minecraft/minecraft_test.go:101`, `internal/minecraft/minecraft_test.go:137`, `internal/minecraft/minecraft_test.go:145`\n    - Package README: `internal/minecraft/README.md:15`\n- `internal/httpClient/httpClient.go:26` uses field name `Ratelimiter` (mixed casing; prefer `RateLimiter`).\n- Go package naming deviates from standard practice (mixed case package names):\n  - `internal/httpClient/httpClient.go:1` (`package httpClient`)\n  - `internal/globalErrors` (`package globalErrors` across files)\n- Inconsistent initialism handling in core models:\n  - `internal/models/mod.go:5` uses `ID`\n  - `internal/models/modInstall.go:5` uses `Id`\n  - `internal/models/modInstall.go:10` uses `DownloadUrl` instead of `DownloadURL`\n\nImpact:\n\n- These reduce clarity, make exported APIs look unprofessional, and create long-term friction (renaming later is breaking).\n\nRemediation:\n\n- Fix naming before wider adoption. For exported symbols, consider deprecating the old name and introducing the corrected name if backwards compatibility matters.\n\nConfidence: Medium.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:46:52.147987436Z","updated_at":"2025-12-19T21:50:22.629601083Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.70","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.70","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.71","title":"Low - Duplicate helper logic across commands increases drift risk","description":"# Source\n\n- audit.md#L1779\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Duplicate helper logic across commands increases drift risk\n\n\nEvidence:\n\n- `lockIndexFor` is re-implemented in multiple commands:\n  - `cmd/mmm/remove/remove.go:240`\n  - `cmd/mmm/install/install.go:343`\n  - `cmd/mmm/update/update.go:497`\n- `effectiveAllowedReleaseTypes` is re-implemented in multiple commands:\n  - `cmd/mmm/install/install.go:336`\n  - `cmd/mmm/update/update.go:490`\n  - `cmd/mmm/test/test.go:364`\n- `downloadClient` is duplicated across commands:\n  - `cmd/mmm/add/add.go:468`\n  - `cmd/mmm/install/install.go:679`\n  - `cmd/mmm/update/update.go:521`\n- `noopSender` is duplicated across internal and command packages:\n  - `internal/modsetup/modsetup.go:287`\n  - `internal/modinstall/modinstall.go:113`\n  - `cmd/mmm/install/install.go:675`\n  - `cmd/mmm/update/update.go:517`\n\nImpact:\n\n- Increases the chance of subtle behavioral drift (for example: one command fixes a bug, another does not).\n- Makes security hardening (for example: filename/path validation) harder to implement consistently.\n\nRemediation:\n\n- Consolidate shared helpers into a small internal package (or reuse existing internal packages) and cover the shared behavior with focused unit tests.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:47:08.734120234Z","updated_at":"2025-12-19T21:50:23.099293627Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.71","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.71","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.72","title":"Low - Platform API clients set auth headers with `Header.Add` (prefer `Header.Set`) and inconsistent header key casing","description":"# Source\n\n- audit.md#L1814\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Platform API clients set auth headers with `Header.Add` (prefer `Header.Set`) and inconsistent header key casing\n\n\nEvidence:\n\n- Modrinth client sets headers via a map and `request.Header.Add(...)`: `internal/modrinth/modrinthClient.go:26-34`.\n  - Uses lowercase header keys like `user-agent`, `Accept`, `Authorization`.\n- CurseForge client sets headers via a map and `request.Header.Add(...)`: `internal/curseforge/curseforgeClient.go:25-34`.\n  - Uses lowercase `x-api-key`.\n\nImpact:\n\n- `Header.Add` can create duplicate header values if a request object is accidentally reused (or wrapped multiple times), which makes failures harder to debug and can create unexpected upstream behavior.\n- Inconsistent header key casing is not functionally wrong (HTTP header names are case-insensitive) but it is style noise and can complicate debugging/grepping.\n- Given the explicit policy \"URLs yes, header secrets no\", minimizing header weirdness helps reduce the chance of accidental exposure if instrumentation ever evolves to capture headers.\n\nRemediation:\n\n- Use `Header.Set` for these single-valued headers and standardize header key casing (canonical `User-Agent`, `Accept`, `Authorization`, `X-API-Key`).\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:47:25.597448177Z","updated_at":"2025-12-19T21:50:23.49676861Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.72","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.72","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.73","title":"Low - Test assertions contain copy/paste mistakes in failure messages (hygiene signal)","description":"# Source\n\n- audit.md#L1837\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Low - Test assertions contain copy/paste mistakes in failure messages (hygiene signal)\n\n\nEvidence:\n\n- Tests validate the `x-api-key` header but print `Authorization` in the failure message:\n  - `internal/curseforge/project_test.go:128-130`\n  - `internal/curseforge/files_test.go:118-120`\n  - `internal/curseforge/files_test.go:584-585`\n\nImpact:\n\n- Reduces trust in tests as documentation of intent and slows debugging when failures occur.\n- In the worst case, if a contributor points tests at real credentials and a failure message prints the wrong header value, it increases the chance of accidental secret disclosure in CI logs (even if current tests set mock values).\n\nRemediation:\n\n- Fix the assertion messages and consider a lightweight review pass for copy/paste issues in tests, especially around auth and networking.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-19T21:47:43.573840206Z","updated_at":"2025-12-19T21:50:23.933849852Z","labels":["audit","low"],"dependencies":[{"issue_id":"mmm-63.73","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.73","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.74","title":"Medium - `SECURITY.md` claims are not backed by repository evidence","description":"# Source\n\n- audit.md#L1859\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Medium - `SECURITY.md` claims are not backed by repository evidence\n\n\nEvidence:\n\n- `SECURITY.md:3` claims continuous vulnerability scanning and automatic dependency updates.\n- The only visible CI workflow (`.github/workflows/ci.yml:1`) runs tests/coverage/build but does not run vulnerability scanning (no govulncheck, no SCA, no CodeQL, no dependency review job).\n\nImpact:\n\n- Users are told there is continuous security scanning when there is no visible mechanism enforcing it. This is a trust and governance problem.\n\nRemediation:\n\n- Either implement the stated scanning (and document what runs where), or rewrite `SECURITY.md` to accurately reflect current practice.\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-19T21:48:00.124310158Z","updated_at":"2025-12-19T21:50:24.319686186Z","labels":["audit","medium"],"dependencies":[{"issue_id":"mmm-63.74","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.74","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.8","title":"Critical - Downloader can overwrite arbitrary files via symlinks; partial writes are not cleaned up","description":"# Source\n\n- audit.md#L313\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - Downloader can overwrite arbitrary files via symlinks; partial writes are not cleaned up\n\n\nEvidence:\n\n- Downloader writes directly to the destination path via `fs.Create(path)` with no attempt to detect symlinks or write to a temp file: `internal/httpClient/downloader.go:58`.\n- On download errors, it returns without removing partially-written files: `internal/httpClient/downloader.go:76-81`.\n- Update flow deletes the previous jar after a successful download without validating the replacement content: `cmd/mmm/update/update.go:419-428`.\n\nImpact:\n\n- If an attacker can place a symlink in the mods directory (or influence filenames via path traversal; see separate finding), MMM can be tricked into overwriting arbitrary files that the current user can write to.\n- Partial/truncated files can be left behind as `.jar`, leading to \"corrupt jar\" state and (in update flows) deletion of the previously working jar.\n\nRemediation:\n\n- Always download to a temp file in the same directory and `Rename` into place only after validation.\n- Validate HTTP status codes (see \"Download integrity\") and verify hashes before swap/delete.\n- On OS filesystems, detect and reject symlinks for jar destination paths (or open with platform-specific \"no-follow\" semantics where possible).\n\nConfidence: Medium-High (symlink overwrite depends on attacker control of the mods directory).\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:28:38.999112489Z","updated_at":"2025-12-19T21:49:52.955940987Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.8","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.8","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-63.9","title":"Critical - Unsafe filename handling enables path traversal / arbitrary file overwrite or delete","description":"# Source\n\n- audit.md#L336\n- Parent epic: mmm-63\n\n# Finding (verbatim)\n\n## Critical - Unsafe filename handling enables path traversal / arbitrary file overwrite or delete\n\n\nEvidence:\n\n- The tool uses remote or lock-provided filenames directly in filesystem paths via `filepath.Join(...)`:\n  - `internal/modsetup/modsetup.go:74` joins `remote.FileName`\n  - `internal/modinstall/modinstall.go:58` joins `install.FileName` (lock file content)\n  - `cmd/mmm/update/update.go:381` joins `remote.FileName` and later deletes `oldPath` on success: `cmd/mmm/update/update.go:423`\n  - `cmd/mmm/remove/remove.go:151` joins lock-provided `FileName` and then deletes it: `cmd/mmm/remove/remove.go:152-154`\n  - `cmd/mmm/add/add.go:291` joins `remoteMod.FileName`\n\nImpact:\n\n- If a remote API returns a filename containing path separators (or if the lock file is tampered with), the tool can write outside the mods directory (for example `../somewhere`), and update/remove flows can delete unintended files.\n- Relying on \"upstream APIs always return safe filenames\" is not an acceptable security boundary.\n\nRemediation:\n\n- Enforce that all mod filenames are safe base names before any file I/O:\n  - reject values containing path separators, drive letters, or traversal sequences\n  - require `filepath.Base(name) == name` (and `path.Base` equivalently for forward slashes)\n  - optionally enforce allowed extensions (for example `.jar`) and a maximum length\n- Apply the validation at every boundary:\n  - remote platform selection output\n  - lock file reads\n  - config-driven file operations\n\nConfidence: High.\n\n\n# Acceptance criteria\n\n- Implement all remediation steps described above.\n- Add/adjust tests/docs as needed; keep coverage at 100%.\n- Ensure make targets pass: make test; make coverage-enforce; make build.\n","acceptance_criteria":"Implement remediation; keep CI/coverage green","status":"open","issue_type":"task","created_at":"2025-12-19T21:28:56.169361922Z","updated_at":"2025-12-19T21:49:53.41478847Z","labels":["audit","critical"],"dependencies":[{"issue_id":"mmm-63.9","depends_on_id":"mmm-63","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-63.9","depends_on_id":"mmm-63","type":"discovered-from","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-64","title":"Extract Makefile multi-platform build logic into tools/build/build.go","description":"Why: Makefile build logic is hard to maintain for multi-platform builds; move to Go tool.\\n\\nScope:\\n- Implement tools/build/build.go to build all targets (darwin/linux/windows x amd64/arm64) and output raw binaries to build/\u003cos\u003e/\u003carch\u003e/mmm(.exe).\\n- Tokens always required: MODRINTH_API_KEY, CURSEFORGE_API_KEY, POSTHOG_API_KEY must be present (env or .env); fail with current error text if missing; preserve warning behavior only if explicitly desired (currently not).\\n- Read .env at repo root as fallback when env vars are unset.\\n- Use go build with -ldflags to embed token defaults (same package paths as Makefile).\\n- Update Makefile build targets to call the Go tool; remove BUILD_REQUIRE_TOKENS and build-dev.\\n- Ensure docs updated if build workflow changes.\\n\\nAcceptance:\\n- make build produces six binaries at build/\u003cos\u003e/\u003carch\u003e/mmm(.exe).\\n- Missing tokens cause build to fail with same error+hint text as Makefile.\\n- Go tool is in tools/build and has unit tests to maintain 100% coverage.\\n- Makefile uses the tool for build targets and no longer contains the complex platform-specific logic.\\n","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T10:34:27.403872126Z","updated_at":"2025-12-20T11:20:59.751607778Z","closed_at":"2025-12-20T11:20:59.751607778Z"}
{"id":"mmm-65","title":"Add dist packaging tool for zipped release artifacts","description":"Implement a tool that packages build outputs into zip files named dist/mmm-\u003cos\u003e-\u003carch\u003e[-\u003cversion].zip. The version should be passed as a flag from CI (semantic-release). For local runs, allow version to be omitted or set to 'dev'. The tool should iterate the existing build outputs and produce zip archives for each target.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-20T11:22:47.533197737Z","updated_at":"2025-12-20T11:59:23.157003352Z","closed_at":"2025-12-20T11:59:23.157003352Z"}
{"id":"mmm-7","title":"Implement update command for newer mod releases","description":"Port the `update` command so it first performs an `install` consistency check, then queries each configured mod for newer releases that match the loader, release type, and game version. When updates exist, download new files, clean up old ones, and refresh the lock/config entries while respecting pinned versions.","acceptance_criteria":"- `mmm update` exists (alias `u`) and runs `install` internally before checking for newer files.\n- Skips mods pinned to a specific version, and logs if no updates are available.\n- On success, downloads replacements, removes superseded jars, and updates lock + config metadata atomically.\n- Handles download failures by keeping the previous file/lock untouched and surfacing a clear error.\n- Includes tests covering pinned mods, update detection, and failure rollback.\n","notes":"Alignment (2025-12-17):\n- Pinned mods (mod.version set): update should not check for newer releases. Only network work allowed is to ensure the pinned jar matches the lock (missing file or on-disk SHA-1 != lock hash), which is handled by the initial install consistency phase.\n- Preflight abort semantics: update aborts when unmanaged files are detected by the initial install phase (matches docs/specs/update.md); install itself still only aborts on unresolved/unsure.\n- Update detection: treat release date as the primary signal. Only update when remote release date is newer AND the hash differs (date gates; hash mismatch confirms it’s truly a different version).\n- Atomic/rollback: if an update download fails, keep the previous jar and do not change the lock entry for that mod.\n\nImplementation (2025-12-17):\n- Added cmd/mmm/update and registered it in cmd/mmm/root.go.\n- update runs the install consistency check via cmd/mmm/install.Run.\n- cmd/mmm/install.Run now returns install.Result including UnmanagedFound so update can enforce unmanaged abort.\n- In-place updates (same filename) use a Windows-safe replace (rename existing to backup, rename temp into place, delete backup; rollback on failure).\n- Concurrency: per-mod checks run in goroutines; results are applied serially (WaitGroup + results channel).\n- Added i18n keys for update (en-GB/de-DE/fr-CA) and user-facing docs docs/commands/update.md.\n- UX: update shows usage only for incorrect invocation (cobra.NoArgs). Runtime errors silence usage.\n- Removed redundant timestamped stdlib log line on command failure; Cobra's error output is the single error line.\n\nVerification:\n- make fmt\n- make test\n- make coverage-enforce\n- make build","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:07:04.247698107Z","updated_at":"2025-12-18T02:16:38.265587666Z","closed_at":"2025-12-18T02:16:38.265587666Z","dependencies":[{"issue_id":"mmm-7","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-7","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-7","depends_on_id":"mmm-6","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-8","title":"Implement test command for Minecraft version viability","description":"Implement the `test` command per `docs/commands/test.md`: resolve a target game version (explicit or latest), query every configured mod for compatibility, and exit with status 0/1/2 based on results. Handle API failures according to ADR 0006 (assume user input is valid when manifests fail).","acceptance_criteria":"- `mmm test [game_version]` exists (alias `t`) and defaults to `latest` using the Minecraft manifest helper.\n- Returns exit code 2 if the requested version matches the currently configured version, 1 if any mods are missing support, and 0 otherwise.\n- Outputs missing mod details when compatibility fails, honoring quiet/debug options.\n- Uses ADR 0006 behavior: retries via the rate limiter and assumes string validity if manifest cannot be fetched.\n- Includes tests for each exit code path and manifest failure handling.\n","notes":"Reminder: consult epic mmm-1 for the canonical Node reference repo path and execution-order guidance before working on this task.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:07:19.657999372Z","updated_at":"2025-12-19T12:31:15.1916888Z","closed_at":"2025-12-19T12:31:15.1916888Z","dependencies":[{"issue_id":"mmm-8","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-8","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-8","depends_on_id":"mmm-5","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
{"id":"mmm-9","title":"Implement change command for switching Minecraft versions","description":"Port the `change` command workflow: verify the target version is viable (unless `--force`), update `modlist.json` with the new `gameVersion`, purge existing mod jars, and trigger a fresh `install` for the new version. Enforce exit codes per docs and respect `--force`.","acceptance_criteria":"- `mmm change [game_version]` exists with `--force` flag and matches README behavior.\n- Command reuses the `test` logic to verify compatibility unless forced; exits with code 2 when changing to the current version.\n- On success, removes previously installed mod files, updates config, and runs `install` to fetch the correct builds.\n- Force mode proceeds despite incompatibilities but logs skipped mods clearly.\n- Tests cover normal, force, same-version, and failure scenarios.\n","notes":"Reminder: consult epic mmm-1 for the canonical Node reference repo path and execution-order guidance before working on this task.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T14:07:40.123960043Z","updated_at":"2025-12-14T14:19:36.375302327Z","dependencies":[{"issue_id":"mmm-9","depends_on_id":"mmm-1","type":"parent-child","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-9","depends_on_id":"mmm-2","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-9","depends_on_id":"mmm-6","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""},{"issue_id":"mmm-9","depends_on_id":"mmm-8","type":"blocks","created_at":"0001-01-01T00:00:00Z","created_by":""}]}
